webpackJsonp([2], [function (t, e, n) { window.org = n(112), n(14); var r = n(128); window.App = r; var i = n(106); window.TimeChartCtrl = i, n(194), n(151), n(152), n(150), n(149), n(10), n(153), n(154), n(166), n(168), n(167), n(165), n(169), n(170), n(174), n(173), n(172), n(171), n(175), n(176), n(177), n(178), n(179), n(180), n(181), n(182), n(183), n(184), n(185), n(186), n(187), n(188), n(189), n(190), n(191), n(192), n(193) }, , , , , , function (t, e, n) { "use strict"; var r = {}; r.baseURL = __env.baseURL, r.cubeURL = __env.cubeURL, r.baseMapURL = __env.baseMapURL, r.useProton = __env.useProton, r.exploreURL = r.baseURL + "explore/api", t.exports = r }, function (t, e, n) { (function (e, r, i) { "use strict"; function o() { e.extend(this, r.Events) } var a = n(6); o.prototype.login = function (t, e) { i.ajax({ type: "POST", url: o.loginURL, contentType: "application/json", data: JSON.stringify({ username: t, password: e }), xhrFields: { withCredentials: !0 }, success: this._authenticated.bind(this), error: this._deauthenticated.bind(this) }) }, o.prototype.validate = function () { i.ajax({ type: "GET", url: o.meURL, contentType: "application/json", data: "", xhrFields: { withCredentials: !0 }, success: this._authenticated.bind(this), statusCode: { 401: this._deauthenticated.bind(this) } }) }, o.prototype.logout = function () { i.ajax({ type: "POST", url: o.logoutURL, contentType: "application/json", data: "", xhrFields: { withCredentials: !0 }, success: this._deauthenticated.bind(this) }) }, o.prototype._authenticated = function () { this.trigger("authenticated") }, o.prototype._deauthenticated = function () { this.trigger("deauthenticated") }, o.baseURL = a.cubeURL, o.loginURL = o.baseURL + "login", o.meURL = o.baseURL + "me", o.logoutURL = o.baseURL + "logout", t.exports = o }).call(e, n(4), n(5), n(3)) }, function (t, e, n) { "use strict"; function r() { sessionStorage.setItem("mapsense-saved-location", window.location), window.location = "/login/" } function i() { var t = sessionStorage.getItem("mapsense-saved-location"); t || (t = "/dashboard/"), sessionStorage.removeItem("mapsense-saved-location"), window.location = t } t.exports.navigateToLoginPage = r, t.exports.resumeNavigation = i }, function (t, e, n) {
    var r, r; !function (e) { t.exports = e() }(function () {
        var t; return function e(t, n, i) { function o(s, u) { if (!n[s]) { if (!t[s]) { var l = "function" == typeof r && r; if (!u && l) return r(s, !0); if (a) return a(s, !0); var c = new Error("Cannot find module '" + s + "'"); throw c.code = "MODULE_NOT_FOUND", c } var f = n[s] = { exports: {} }; t[s][0].call(f.exports, function (e) { var n = t[s][1][e]; return o(n ? n : e) }, f, f.exports, e, t, n, i) } return n[s].exports } for (var a = "function" == typeof r && r, s = 0; s < i.length; s++) o(i[s]); return o }({
            1: [function (t, e, n) { e.exports = t("protobufjs").newBuilder({ convertFieldsToCamelCase: !0 })["import"]({ "package": null, messages: [{ name: "TileGeometryTopologyProto", fields: [{ rule: "repeated", options: {}, type: "CoordinatesProto", name: "arcs", id: 1 }, { rule: "repeated", options: {}, type: "TileGeometryProto", name: "features", id: 2 }, { rule: "optional", options: {}, type: "PropertiesHeaderProto", name: "properties_header", id: 3 }, { rule: "optional", options: {}, type: "LayersProto", name: "layers", id: 4 }, { rule: "repeated", options: { packed: !0 }, type: "int64", name: "quantization", id: 5 }, { rule: "repeated", options: { packed: !0 }, type: "double", name: "transform", id: 6 }, { rule: "optional", options: {}, type: "string", name: "srid", id: 7 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "LayersProto", fields: [{ rule: "repeated", options: {}, type: "string", name: "names", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "sint32", name: "offsets", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "PropertiesHeaderProto", fields: [{ rule: "repeated", options: {}, type: "string", name: "keys", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "int32", name: "kv_keys", id: 2 }, { rule: "repeated", options: {}, type: "ValueProto", name: "kv_values", id: 3 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "PropertiesProto", fields: [{ rule: "repeated", options: { packed: !0 }, type: "sint32", name: "pointers", id: 1 }, { rule: "repeated", options: {}, type: "ValueProto", name: "values", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "ValueProto", fields: [{ rule: "optional", options: {}, type: "bool", name: "bool", id: 1, oneof: "value" }, { rule: "optional", options: {}, type: "sint64", name: "int", id: 2, oneof: "value" }, { rule: "optional", options: {}, type: "float", name: "float", id: 3, oneof: "value" }, { rule: "optional", options: {}, type: "double", name: "double", id: 4, oneof: "value" }, { rule: "optional", options: {}, type: "string", name: "string", id: 5, oneof: "value" }, { rule: "optional", options: {}, type: "bool", name: "null", id: 6, oneof: "value" }], enums: [], messages: [], options: {}, oneofs: { value: [1, 2, 3, 4, 5, 6] } }, { name: "CoordinatesProto", fields: [{ rule: "optional", options: {}, type: "LayoutProto", name: "layout", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "sint64", name: "coordinates", id: 2 }], enums: [{ name: "LayoutProto", values: [{ name: "XY", id: 0 }, { name: "XYZ", id: 1 }, { name: "XYA", id: 2 }, { name: "XYZA", id: 3 }], options: {} }], messages: [], options: {}, oneofs: {} }, { name: "TilePointProto", fields: [{ rule: "optional", options: {}, type: "sint64", name: "x", id: 1 }, { rule: "optional", options: {}, type: "sint64", name: "y", id: 2 }, { rule: "optional", options: {}, type: "sint64", name: "z", id: 3 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileMultiPointProto", fields: [{ rule: "optional", options: {}, type: "CoordinatesProto", name: "coordinates", id: 1 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileLinePieceProto", fields: [{ rule: "optional", options: {}, type: "CoordinatesProto", name: "coordinates", id: 1 }, { rule: "optional", options: { "default": 0 }, type: "int32", name: "start", id: 2 }, { rule: "optional", options: { "default": 0 }, type: "int32", name: "intersectionSides", id: 3 }, { rule: "repeated", options: { packed: !0 }, type: "sint32", name: "arcs", id: 6 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileRingPieceProto", fields: [{ rule: "optional", options: {}, type: "CoordinatesProto", name: "coordinates", id: 1 }, { rule: "optional", options: { "default": 0 }, type: "int32", name: "start", id: 2 }, { rule: "optional", options: {}, type: "int32", name: "sidesAndWind", id: 3 }, { rule: "repeated", options: { packed: !0 }, type: "sint32", name: "arcs", id: 6 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileLineStringProto", fields: [{ rule: "optional", options: {}, type: "int64", name: "span", id: 1 }, { rule: "repeated", options: {}, type: "TileLinePieceProto", name: "pieces", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "RingConnectedComponentProto", fields: [{ rule: "repeated", options: {}, type: "TileRingPieceProto", name: "pieces", id: 1 }, { rule: "optional", options: { "default": 0 }, type: "int32", name: "shell_component", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileRingProto", fields: [{ rule: "repeated", options: {}, type: "RingConnectedComponentProto", name: "components", id: 1 }, { rule: "optional", options: {}, type: "int64", name: "span", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TilePolygonProto", fields: [{ rule: "optional", options: {}, type: "TileRingProto", name: "shell", id: 1 }, { rule: "repeated", options: {}, type: "TileRingProto", name: "holes", id: 2 }, { rule: "repeated", options: { packed: !0 }, type: "int32", name: "hole_indices", id: 3 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileHoleProto", fields: [{ rule: "repeated", options: {}, type: "RingConnectedComponentProto", name: "pieces", id: 1 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileMultiLineStringProto", fields: [{ rule: "repeated", options: {}, type: "TileLineStringProto", name: "lines", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "int32", name: "line_indices", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileMultiPolygonProto", fields: [{ rule: "repeated", options: {}, type: "TilePolygonProto", name: "polygons", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "int32", name: "polygon_indices", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileGeometryCollectionProto", fields: [{ rule: "repeated", options: {}, type: "TileGeometryProto", name: "geometries", id: 1 }, { rule: "repeated", options: { packed: !0 }, type: "int32", name: "geometry_indices", id: 2 }], enums: [], messages: [], options: {}, oneofs: {} }, { name: "TileGeometryProto", fields: [{ rule: "optional", options: {}, type: "int64", name: "id", id: 10 }, { rule: "optional", options: {}, type: "PropertiesProto", name: "properties", id: 11 }, { rule: "optional", options: {}, type: "TilePointProto", name: "point", id: 1 }, { rule: "optional", options: {}, type: "TileLineStringProto", name: "line_string", id: 2 }, { rule: "optional", options: {}, type: "TilePolygonProto", name: "polygon", id: 3 }, { rule: "optional", options: {}, type: "TileMultiPointProto", name: "multi_point", id: 4 }, { rule: "optional", options: {}, type: "TileMultiLineStringProto", name: "multi_line_string", id: 5 }, { rule: "optional", options: {}, type: "TileMultiPolygonProto", name: "multi_polygon", id: 6 }, { rule: "optional", options: {}, type: "TileGeometryCollectionProto", name: "geometry_collection", id: 7 }, { rule: "optional", options: {}, type: "float", name: "minz", id: 8 }, { rule: "optional", options: {}, type: "float", name: "maxz", id: 9 }, { rule: "optional", options: {}, type: "int32", name: "topologyGroup", id: 16 }], enums: [], messages: [], options: {}, oneofs: {} }], enums: [], imports: [], options: { java_package: "moc.mapsense.tiler.geom.gen", java_outer_classname: "TileGeometryProtos" }, services: [] }).build() }, { protobufjs: 9 }], 2: [function (t, e, n) { "use strict"; var r = t("./src/convert"), i = t("./src/proton").convert, o = { version: "0.0.1", convert: r, convertProton: i }; e.exports = o }, { "./src/convert": 11, "./src/proton": 15 }], 3: [function (t, e, n) { }, {}], 4: [function (t, e, n) { (function (t) { function e(t, e) { for (var n = 0, r = t.length - 1; r >= 0; r--) { var i = t[r]; "." === i ? t.splice(r, 1) : ".." === i ? (t.splice(r, 1), n++) : n && (t.splice(r, 1), n--) } if (e) for (; n--; n) t.unshift(".."); return t } function r(t, e) { if (t.filter) return t.filter(e); for (var n = [], r = 0; r < t.length; r++) e(t[r], r, t) && n.push(t[r]); return n } var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/, o = function (t) { return i.exec(t).slice(1) }; n.resolve = function () { for (var n = "", i = !1, o = arguments.length - 1; o >= -1 && !i; o--) { var a = o >= 0 ? arguments[o] : t.cwd(); if ("string" != typeof a) throw new TypeError("Arguments to path.resolve must be strings"); a && (n = a + "/" + n, i = "/" === a.charAt(0)) } return n = e(r(n.split("/"), function (t) { return !!t }), !i).join("/"), (i ? "/" : "") + n || "." }, n.normalize = function (t) { var i = n.isAbsolute(t), o = "/" === a(t, -1); return t = e(r(t.split("/"), function (t) { return !!t }), !i).join("/"), t || i || (t = "."), t && o && (t += "/"), (i ? "/" : "") + t }, n.isAbsolute = function (t) { return "/" === t.charAt(0) }, n.join = function () { var t = Array.prototype.slice.call(arguments, 0); return n.normalize(r(t, function (t, e) { if ("string" != typeof t) throw new TypeError("Arguments to path.join must be strings"); return t }).join("/")) }, n.relative = function (t, e) { function r(t) { for (var e = 0; e < t.length && "" === t[e]; e++); for (var n = t.length - 1; n >= 0 && "" === t[n]; n--); return e > n ? [] : t.slice(e, n - e + 1) } t = n.resolve(t).substr(1), e = n.resolve(e).substr(1); for (var i = r(t.split("/")), o = r(e.split("/")), a = Math.min(i.length, o.length), s = a, u = 0; a > u; u++) if (i[u] !== o[u]) { s = u; break } for (var l = [], u = s; u < i.length; u++) l.push(".."); return l = l.concat(o.slice(s)), l.join("/") }, n.sep = "/", n.delimiter = ":", n.dirname = function (t) { var e = o(t), n = e[0], r = e[1]; return n || r ? (r && (r = r.substr(0, r.length - 1)), n + r) : "." }, n.basename = function (t, e) { var n = o(t)[2]; return e && n.substr(-1 * e.length) === e && (n = n.substr(0, n.length - e.length)), n }, n.extname = function (t) { return o(t)[3] }; var a = "b" === "ab".substr(-1) ? function (t, e, n) { return t.substr(e, n) } : function (t, e, n) { return 0 > e && (e = t.length + e), t.substr(e, n) } }).call(this, t("_process")) }, { _process: 5 }], 5: [function (t, e, n) { function r() { if (!s) { s = !0; for (var t, e = a.length; e;) { t = a, a = []; for (var n = -1; ++n < e;) t[n](); e = a.length } s = !1 } } function i() { } var o = e.exports = {}, a = [], s = !1; o.nextTick = function (t) { a.push(t), s || setTimeout(r, 0) }, o.title = "browser", o.browser = !0, o.env = {}, o.argv = [], o.version = "", o.on = i, o.addListener = i, o.once = i, o.off = i, o.removeListener = i, o.removeAllListeners = i, o.emit = i, o.binding = function (t) { throw new Error("process.binding is not supported") }, o.cwd = function () { return "/" }, o.chdir = function (t) { throw new Error("process.chdir is not supported") }, o.umask = function () { return 0 } }, {}], 6: [function (e, n, r) {/**
	 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/Long.js for details
	 */
                !function (i) { "use strict"; var o = function (t, e, n) { this.low = 0 | t, this.high = 0 | e, this.unsigned = !!n }; o.isLong = function (t) { return (t && t instanceof o) === !0 }; var a = {}, s = {}; o.fromInt = function (t, e) { var n, r; return e ? (t >>>= 0, t >= 0 && 256 > t && (r = s[t]) ? r : (n = new o(t, 0 > (0 | t) ? -1 : 0, !0), t >= 0 && 256 > t && (s[t] = n), n)) : (t = 0 | t, t >= -128 && 128 > t && (r = a[t]) ? r : (n = new o(t, 0 > t ? -1 : 0, !1), t >= -128 && 128 > t && (a[t] = n), n)) }, o.fromNumber = function (t, e) { return e = !!e, isNaN(t) || !isFinite(t) ? o.ZERO : !e && -h >= t ? o.MIN_VALUE : !e && t + 1 >= h ? o.MAX_VALUE : e && t >= f ? o.MAX_UNSIGNED_VALUE : 0 > t ? o.fromNumber(-t, e).negate() : new o(t % c | 0, t / c | 0, e) }, o.fromBits = function (t, e, n) { return new o(t, e, n) }, o.fromString = function (t, e, n) { if (0 === t.length) throw Error("number format error: empty string"); if ("NaN" === t || "Infinity" === t || "+Infinity" === t || "-Infinity" === t) return o.ZERO; if ("number" == typeof e && (n = e, e = !1), n = n || 10, 2 > n || n > 36) throw Error("radix out of range: " + n); var r; if ((r = t.indexOf("-")) > 0) throw Error('number format error: interior "-" character: ' + t); if (0 === r) return o.fromString(t.substring(1), e, n).negate(); for (var i = o.fromNumber(Math.pow(n, 8)), a = o.ZERO, s = 0; s < t.length; s += 8) { var u = Math.min(8, t.length - s), l = parseInt(t.substring(s, s + u), n); if (8 > u) { var c = o.fromNumber(Math.pow(n, u)); a = a.multiply(c).add(o.fromNumber(l)) } else a = a.multiply(i), a = a.add(o.fromNumber(l)) } return a.unsigned = e, a }, o.fromValue = function (t) { return "number" == typeof t ? o.fromNumber(t) : "string" == typeof t ? o.fromString(t) : o.isLong(t) ? t : new o(t.low, t.high, t.unsigned) }; var u = 65536, l = 1 << 24, c = u * u, f = c * c, h = f / 2, d = o.fromInt(l); o.ZERO = o.fromInt(0), o.UZERO = o.fromInt(0, !0), o.ONE = o.fromInt(1), o.UONE = o.fromInt(1, !0), o.NEG_ONE = o.fromInt(-1), o.MAX_VALUE = o.fromBits(-1, 2147483647, !1), o.MAX_UNSIGNED_VALUE = o.fromBits(-1, -1, !0), o.MIN_VALUE = o.fromBits(0, -2147483648, !1), o.prototype.toInt = function () { return this.unsigned ? this.low >>> 0 : this.low }, o.prototype.toNumber = function () { return this.unsigned ? (this.high >>> 0) * c + (this.low >>> 0) : this.high * c + (this.low >>> 0) }, o.prototype.toString = function (t) { if (t = t || 10, 2 > t || t > 36) throw RangeError("radix out of range: " + t); if (this.isZero()) return "0"; var e; if (this.isNegative()) { if (this.equals(o.MIN_VALUE)) { var n = o.fromNumber(t), r = this.div(n); return e = r.multiply(n).subtract(this), r.toString(t) + e.toInt().toString(t) } return "-" + this.negate().toString(t) } var i = o.fromNumber(Math.pow(t, 6), this.unsigned); e = this; for (var a = ""; ;) { var s = e.div(i), u = e.subtract(s.multiply(i)).toInt() >>> 0, l = u.toString(t); if (e = s, e.isZero()) return l + a; for (; l.length < 6;) l = "0" + l; a = "" + l + a } }, o.prototype.getHighBits = function () { return this.high }, o.prototype.getHighBitsUnsigned = function () { return this.high >>> 0 }, o.prototype.getLowBits = function () { return this.low }, o.prototype.getLowBitsUnsigned = function () { return this.low >>> 0 }, o.prototype.getNumBitsAbs = function () { if (this.isNegative()) return this.equals(o.MIN_VALUE) ? 64 : this.negate().getNumBitsAbs(); for (var t = 0 != this.high ? this.high : this.low, e = 31; e > 0 && 0 == (t & 1 << e) ; e--); return 0 != this.high ? e + 33 : e + 1 }, o.prototype.isZero = function () { return 0 === this.high && 0 === this.low }, o.prototype.isNegative = function () { return !this.unsigned && this.high < 0 }, o.prototype.isPositive = function () { return this.unsigned || this.high >= 0 }, o.prototype.isOdd = function () { return 1 === (1 & this.low) }, o.prototype.isEven = function () { return 0 === (1 & this.low) }, o.prototype.equals = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.unsigned !== t.unsigned && this.high >>> 31 === 1 && t.high >>> 31 === 1 ? !1 : this.high === t.high && this.low === t.low }, o.prototype.notEquals = function (t) { return o.isLong(t) || (t = o.fromValue(t)), !this.equals(t) }, o.prototype.lessThan = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.compare(t) < 0 }, o.prototype.lessThanOrEqual = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.compare(t) <= 0 }, o.prototype.greaterThan = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.compare(t) > 0 }, o.prototype.greaterThanOrEqual = function (t) { return this.compare(t) >= 0 }, o.prototype.compare = function (t) { if (this.equals(t)) return 0; var e = this.isNegative(), n = t.isNegative(); return e && !n ? -1 : !e && n ? 1 : this.unsigned ? t.high >>> 0 > this.high >>> 0 || t.high === this.high && t.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.subtract(t).isNegative() ? -1 : 1 }, o.prototype.negate = function () { return !this.unsigned && this.equals(o.MIN_VALUE) ? o.MIN_VALUE : this.not().add(o.ONE) }, o.prototype.add = function (t) { o.isLong(t) || (t = o.fromValue(t)); var e = this.high >>> 16, n = 65535 & this.high, r = this.low >>> 16, i = 65535 & this.low, a = t.high >>> 16, s = 65535 & t.high, u = t.low >>> 16, l = 65535 & t.low, c = 0, f = 0, h = 0, d = 0; return d += i + l, h += d >>> 16, d &= 65535, h += r + u, f += h >>> 16, h &= 65535, f += n + s, c += f >>> 16, f &= 65535, c += e + a, c &= 65535, o.fromBits(h << 16 | d, c << 16 | f, this.unsigned) }, o.prototype.subtract = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.add(t.negate()) }, o.prototype.multiply = function (t) { if (this.isZero()) return o.ZERO; if (o.isLong(t) || (t = o.fromValue(t)), t.isZero()) return o.ZERO; if (this.equals(o.MIN_VALUE)) return t.isOdd() ? o.MIN_VALUE : o.ZERO; if (t.equals(o.MIN_VALUE)) return this.isOdd() ? o.MIN_VALUE : o.ZERO; if (this.isNegative()) return t.isNegative() ? this.negate().multiply(t.negate()) : this.negate().multiply(t).negate(); if (t.isNegative()) return this.multiply(t.negate()).negate(); if (this.lessThan(d) && t.lessThan(d)) return o.fromNumber(this.toNumber() * t.toNumber(), this.unsigned); var e = this.high >>> 16, n = 65535 & this.high, r = this.low >>> 16, i = 65535 & this.low, a = t.high >>> 16, s = 65535 & t.high, u = t.low >>> 16, l = 65535 & t.low, c = 0, f = 0, h = 0, p = 0; return p += i * l, h += p >>> 16, p &= 65535, h += r * l, f += h >>> 16, h &= 65535, h += i * u, f += h >>> 16, h &= 65535, f += n * l, c += f >>> 16, f &= 65535, f += r * u, c += f >>> 16, f &= 65535, f += i * s, c += f >>> 16, f &= 65535, c += e * l + n * u + r * s + i * a, c &= 65535, o.fromBits(h << 16 | p, c << 16 | f, this.unsigned) }, o.prototype.div = function (t) { if (o.isLong(t) || (t = o.fromValue(t)), t.isZero()) throw new Error("division by zero"); if (this.isZero()) return this.unsigned ? o.UZERO : o.ZERO; var e, n, r; if (this.equals(o.MIN_VALUE)) { if (t.equals(o.ONE) || t.equals(o.NEG_ONE)) return o.MIN_VALUE; if (t.equals(o.MIN_VALUE)) return o.ONE; var i = this.shiftRight(1); return e = i.div(t).shiftLeft(1), e.equals(o.ZERO) ? t.isNegative() ? o.ONE : o.NEG_ONE : (n = this.subtract(t.multiply(e)), r = e.add(n.div(t))) } if (t.equals(o.MIN_VALUE)) return this.unsigned ? o.UZERO : o.ZERO; if (this.isNegative()) return t.isNegative() ? this.negate().div(t.negate()) : this.negate().div(t).negate(); if (t.isNegative()) return this.div(t.negate()).negate(); for (r = o.ZERO, n = this; n.greaterThanOrEqual(t) ;) { e = Math.max(1, Math.floor(n.toNumber() / t.toNumber())); for (var a = Math.ceil(Math.log(e) / Math.LN2), s = 48 >= a ? 1 : Math.pow(2, a - 48), u = o.fromNumber(e), l = u.multiply(t) ; l.isNegative() || l.greaterThan(n) ;) e -= s, u = o.fromNumber(e, this.unsigned), l = u.multiply(t); u.isZero() && (u = o.ONE), r = r.add(u), n = n.subtract(l) } return r }, o.prototype.modulo = function (t) { return o.isLong(t) || (t = o.fromValue(t)), this.subtract(this.div(t).multiply(t)) }, o.prototype.not = function () { return o.fromBits(~this.low, ~this.high, this.unsigned) }, o.prototype.and = function (t) { return o.isLong(t) || (t = o.fromValue(t)), o.fromBits(this.low & t.low, this.high & t.high, this.unsigned) }, o.prototype.or = function (t) { return o.isLong(t) || (t = o.fromValue(t)), o.fromBits(this.low | t.low, this.high | t.high, this.unsigned) }, o.prototype.xor = function (t) { return o.isLong(t) || (t = o.fromValue(t)), o.fromBits(this.low ^ t.low, this.high ^ t.high, this.unsigned) }, o.prototype.shiftLeft = function (t) { return o.isLong(t) && (t = t.toInt()), 0 === (t &= 63) ? this : 32 > t ? o.fromBits(this.low << t, this.high << t | this.low >>> 32 - t, this.unsigned) : o.fromBits(0, this.low << t - 32, this.unsigned) }, o.prototype.shiftRight = function (t) { return o.isLong(t) && (t = t.toInt()), 0 === (t &= 63) ? this : 32 > t ? o.fromBits(this.low >>> t | this.high << 32 - t, this.high >> t, this.unsigned) : o.fromBits(this.high >> t - 32, this.high >= 0 ? 0 : -1, this.unsigned) }, o.prototype.shiftRightUnsigned = function (t) { if (o.isLong(t) && (t = t.toInt()), t &= 63, 0 === t) return this; var e = this.high; if (32 > t) { var n = this.low; return o.fromBits(n >>> t | e << 32 - t, e >>> t, this.unsigned) } return 32 === t ? o.fromBits(e, 0, this.unsigned) : o.fromBits(e >>> t - 32, 0, this.unsigned) }, o.prototype.toSigned = function () { return this.unsigned ? new o(this.low, this.high, !1) : this }, o.prototype.toUnsigned = function () { return this.unsigned ? this : new o(this.low, this.high, !0) }, "function" == typeof e && "object" == typeof n && n && "object" == typeof r && r ? n.exports = o : "function" == typeof t && t.amd ? t(function () { return o }) : (i.dcodeIO = i.dcodeIO || {}).Long = o }(this)
            }, {}], 7: [function (t, e, n) { e.exports = t("./dist/Long.js") }, { "./dist/Long.js": 6 }], 8: [function (e, n, r) {/**
	 * @license ProtoBuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/ProtoBuf.js for details
	 */
                !function (i) {
                    "use strict"; function o(t) {
                        var n = {}; return n.VERSION = "3.8.2", n.WIRE_TYPES = {}, n.WIRE_TYPES.VARINT = 0, n.WIRE_TYPES.BITS64 = 1, n.WIRE_TYPES.LDELIM = 2, n.WIRE_TYPES.STARTGROUP = 3, n.WIRE_TYPES.ENDGROUP = 4, n.WIRE_TYPES.BITS32 = 5, n.PACKABLE_WIRE_TYPES = [n.WIRE_TYPES.VARINT, n.WIRE_TYPES.BITS64, n.WIRE_TYPES.BITS32], n.TYPES = { int32: { name: "int32", wireType: n.WIRE_TYPES.VARINT }, uint32: { name: "uint32", wireType: n.WIRE_TYPES.VARINT }, sint32: { name: "sint32", wireType: n.WIRE_TYPES.VARINT }, int64: { name: "int64", wireType: n.WIRE_TYPES.VARINT }, uint64: { name: "uint64", wireType: n.WIRE_TYPES.VARINT }, sint64: { name: "sint64", wireType: n.WIRE_TYPES.VARINT }, bool: { name: "bool", wireType: n.WIRE_TYPES.VARINT }, "double": { name: "double", wireType: n.WIRE_TYPES.BITS64 }, string: { name: "string", wireType: n.WIRE_TYPES.LDELIM }, bytes: { name: "bytes", wireType: n.WIRE_TYPES.LDELIM }, fixed32: { name: "fixed32", wireType: n.WIRE_TYPES.BITS32 }, sfixed32: { name: "sfixed32", wireType: n.WIRE_TYPES.BITS32 }, fixed64: { name: "fixed64", wireType: n.WIRE_TYPES.BITS64 }, sfixed64: { name: "sfixed64", wireType: n.WIRE_TYPES.BITS64 }, "float": { name: "float", wireType: n.WIRE_TYPES.BITS32 }, "enum": { name: "enum", wireType: n.WIRE_TYPES.VARINT }, message: { name: "message", wireType: n.WIRE_TYPES.LDELIM }, group: { name: "group", wireType: n.WIRE_TYPES.STARTGROUP } }, n.ID_MIN = 1, n.ID_MAX = 536870911, n.ByteBuffer = t, n.Long = t.Long || null, n.convertFieldsToCamelCase = !1, n.populateAccessors = !0, n.Util = function () { Object.create || (Object.create = function (t) { function e() { } if (arguments.length > 1) throw Error("Object.create polyfill only accepts the first parameter."); return e.prototype = t, new e }); var t = {}; t.IS_NODE = !1; try { t.IS_NODE = "function" == typeof e && "function" == typeof e("fs").readFileSync && "function" == typeof e("path").resolve } catch (n) { } return t.XHR = function () { for (var t = [function () { return new XMLHttpRequest }, function () { return new ActiveXObject("Msxml2.XMLHTTP") }, function () { return new ActiveXObject("Msxml3.XMLHTTP") }, function () { return new ActiveXObject("Microsoft.XMLHTTP") }], e = null, n = 0; n < t.length; n++) { try { e = t[n]() } catch (r) { continue } break } if (!e) throw Error("XMLHttpRequest is not supported"); return e }, t.fetch = function (n, r) { if (r && "function" != typeof r && (r = null), t.IS_NODE) if (r) e("fs").readFile(n, function (t, e) { r(t ? null : "" + e) }); else try { return e("fs").readFileSync(n) } catch (i) { return null } else { var o = t.XHR(); if (o.open("GET", n, r ? !0 : !1), o.setRequestHeader("Accept", "text/plain"), "function" == typeof o.overrideMimeType && o.overrideMimeType("text/plain"), !r) return o.send(null), 200 == o.status || 0 == o.status && "string" == typeof o.responseText ? o.responseText : null; if (o.onreadystatechange = function () { 4 == o.readyState && r(200 == o.status || 0 == o.status && "string" == typeof o.responseText ? o.responseText : null) }, 4 == o.readyState) return; o.send(null) } }, t.isArray = Array.isArray || function (t) { return "[object Array]" === Object.prototype.toString.call(t) }, t }(), n.Lang = { OPEN: "{", CLOSE: "}", OPTOPEN: "[", OPTCLOSE: "]", OPTEND: ",", EQUAL: "=", END: ";", STRINGOPEN: '"', STRINGCLOSE: '"', STRINGOPEN_SQ: "'", STRINGCLOSE_SQ: "'", COPTOPEN: "(", COPTCLOSE: ")", DELIM: /[\s\{\}=;\[\],'"\(\)]/g, RULE: /^(?:required|optional|repeated)$/, TYPE: /^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/, NAME: /^[a-zA-Z_][a-zA-Z_0-9]*$/, TYPEDEF: /^[a-zA-Z][a-zA-Z_0-9]*$/, TYPEREF: /^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/, FQTYPEREF: /^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/, NUMBER: /^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/, NUMBER_DEC: /^(?:[1-9][0-9]*|0)$/, NUMBER_HEX: /^0x[0-9a-fA-F]+$/, NUMBER_OCT: /^0[0-7]+$/, NUMBER_FLT: /^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/, ID: /^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/, NEGID: /^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/, WHITESPACE: /\s/, STRING: /(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g, BOOL: /^(?:true|false)$/i }, n.DotProto = function (t, e) { var n = {}, r = function (t) { this.source = "" + t, this.index = 0, this.line = 1, this.stack = [], this.readingString = !1, this.stringEndsWith = e.STRINGCLOSE }, i = r.prototype; i._readString = function () { e.STRING.lastIndex = this.index - 1; var t; if (null !== (t = e.STRING.exec(this.source))) { var n = "undefined" != typeof t[1] ? t[1] : t[2]; return this.index = e.STRING.lastIndex, this.stack.push(this.stringEndsWith), n } throw Error("Unterminated string at line " + this.line + ", index " + this.index) }, i.next = function () { if (this.stack.length > 0) return this.stack.shift(); if (this.index >= this.source.length) return null; if (this.readingString) return this.readingString = !1, this._readString(); var t, n; do { for (t = !1; e.WHITESPACE.test(n = this.source.charAt(this.index)) ;) if (this.index++, "\n" === n && this.line++, this.index === this.source.length) return null; if ("/" === this.source.charAt(this.index)) if ("/" === this.source.charAt(++this.index)) { for (; "\n" !== this.source.charAt(this.index) ;) if (this.index++, this.index == this.source.length) return null; this.index++, this.line++, t = !0 } else { if ("*" !== this.source.charAt(this.index)) throw Error("Unterminated comment at line " + this.line + ": /" + this.source.charAt(this.index)); for (n = ""; n + (n = this.source.charAt(this.index)) !== "*/";) if (this.index++, "\n" === n && this.line++, this.index === this.source.length) return null; this.index++, t = !0 } } while (t); if (this.index === this.source.length) return null; var r = this.index; e.DELIM.lastIndex = 0; var i = e.DELIM.test(this.source.charAt(r)); if (i)++r; else for (++r; r < this.source.length && !e.DELIM.test(this.source.charAt(r)) ;) r++; var o = this.source.substring(this.index, this.index = r); return o === e.STRINGOPEN ? (this.readingString = !0, this.stringEndsWith = e.STRINGCLOSE) : o === e.STRINGOPEN_SQ && (this.readingString = !0, this.stringEndsWith = e.STRINGCLOSE_SQ), o }, i.peek = function () { if (0 === this.stack.length) { var t = this.next(); if (null === t) return null; this.stack.push(t) } return this.stack[0] }, i.toString = function () { return "Tokenizer(" + this.index + "/" + this.source.length + " at line " + this.line + ")" }, n.Tokenizer = r; var o = function (t) { this.tn = new r(t) }, a = o.prototype; return a.parse = function () { for (var t, e = { name: "[ROOT]", "package": null, messages: [], enums: [], imports: [], options: {}, services: [] }, n = !0; t = this.tn.next() ;) switch (t) { case "package": if (!n || null !== e["package"]) throw Error("Unexpected package at line " + this.tn.line); e["package"] = this._parsePackage(t); break; case "import": if (!n) throw Error("Unexpected import at line " + this.tn.line); e.imports.push(this._parseImport(t)); break; case "message": this._parseMessage(e, null, t), n = !1; break; case "enum": this._parseEnum(e, t), n = !1; break; case "option": if (!n) throw Error("Unexpected option at line " + this.tn.line); this._parseOption(e, t); break; case "service": this._parseService(e, t); break; case "extend": this._parseExtend(e, t); break; case "syntax": this._parseIgnoredStatement(e, t); break; default: throw Error("Unexpected token at line " + this.tn.line + ": " + t) } return delete e.name, e }, a._parseNumber = function (t) { var n = 1; if ("-" == t.charAt(0) && (n = -1, t = t.substring(1)), e.NUMBER_DEC.test(t)) return n * parseInt(t, 10); if (e.NUMBER_HEX.test(t)) return n * parseInt(t.substring(2), 16); if (e.NUMBER_OCT.test(t)) return n * parseInt(t.substring(1), 8); if (e.NUMBER_FLT.test(t)) return n * parseFloat(t); throw Error("Illegal number at line " + this.tn.line + ": " + (0 > n ? "-" : "") + t) }, a._parseString = function () { var t, n = ""; do { if (t = this.tn.next(), n += this.tn.next(), t = this.tn.next(), t !== this.tn.stringEndsWith) throw Error("Illegal end of string at line " + this.tn.line + ": " + t); t = this.tn.peek() } while (t === e.STRINGOPEN || t === e.STRINGOPEN_SQ); return n }, a._parseId = function (t, n) { var r = -1, i = 1; if ("-" == t.charAt(0) && (i = -1, t = t.substring(1)), e.NUMBER_DEC.test(t)) r = parseInt(t); else if (e.NUMBER_HEX.test(t)) r = parseInt(t.substring(2), 16); else { if (!e.NUMBER_OCT.test(t)) throw Error("Illegal id at line " + this.tn.line + ": " + (0 > i ? "-" : "") + t); r = parseInt(t.substring(1), 8) } if (r = i * r | 0, !n && 0 > r) throw Error("Illegal id at line " + this.tn.line + ": " + (0 > i ? "-" : "") + t); return r }, a._parsePackage = function (t) { if (t = this.tn.next(), !e.TYPEREF.test(t)) throw Error("Illegal package name at line " + this.tn.line + ": " + t); var n = t; if (t = this.tn.next(), t != e.END) throw Error("Illegal end of package at line " + this.tn.line + ": " + t); return n }, a._parseImport = function (t) { if (t = this.tn.peek(), "public" === t && (this.tn.next(), t = this.tn.peek()), t !== e.STRINGOPEN && t !== e.STRINGOPEN_SQ) throw Error("Illegal start of import at line " + this.tn.line + ": " + t); var n = this._parseString(); if (t = this.tn.next(), t !== e.END) throw Error("Illegal end of import at line " + this.tn.line + ": " + t); return n }, a._parseOption = function (t, n) { n = this.tn.next(); var r = !1; if (n == e.COPTOPEN && (r = !0, n = this.tn.next()), !e.TYPEREF.test(n) && !/google\.protobuf\./.test(n)) throw Error("Illegal option name in message " + t.name + " at line " + this.tn.line + ": " + n); var i = n; if (n = this.tn.next(), r) { if (n !== e.COPTCLOSE) throw Error("Illegal end in message " + t.name + ", option " + i + " at line " + this.tn.line + ": " + n); i = "(" + i + ")", n = this.tn.next(), e.FQTYPEREF.test(n) && (i += n, n = this.tn.next()) } if (n !== e.EQUAL) throw Error("Illegal operator in message " + t.name + ", option " + i + " at line " + this.tn.line + ": " + n); var o; if (n = this.tn.peek(), n === e.STRINGOPEN || n === e.STRINGOPEN_SQ) o = this._parseString(); else if (this.tn.next(), e.NUMBER.test(n)) o = this._parseNumber(n, !0); else if (e.BOOL.test(n)) o = "true" === n; else { if (!e.TYPEREF.test(n)) throw Error("Illegal option value in message " + t.name + ", option " + i + " at line " + this.tn.line + ": " + n); o = n } if (n = this.tn.next(), n !== e.END) throw Error("Illegal end of option in message " + t.name + ", option " + i + " at line " + this.tn.line + ": " + n); t.options[i] = o }, a._parseIgnoredStatement = function (t, n) { for (var r; ;) { if (r = this.tn.next(), null === r) throw Error("Unexpected EOF in " + t.name + ", " + n + " at line " + this.tn.line); if (r === e.END) break } }, a._parseService = function (t, n) { if (n = this.tn.next(), !e.NAME.test(n)) throw Error("Illegal service name at line " + this.tn.line + ": " + n); var r = n, i = { name: r, rpc: {}, options: {} }; if (n = this.tn.next(), n !== e.OPEN) throw Error("Illegal start of service " + r + " at line " + this.tn.line + ": " + n); do if (n = this.tn.next(), "option" === n) this._parseOption(i, n); else if ("rpc" === n) this._parseServiceRPC(i, n); else if (n !== e.CLOSE) throw Error("Illegal type of service " + r + " at line " + this.tn.line + ": " + n); while (n !== e.CLOSE); t.services.push(i) }, a._parseServiceRPC = function (t, n) { var r = n; if (n = this.tn.next(), !e.NAME.test(n)) throw Error("Illegal method name in service " + t.name + " at line " + this.tn.line + ": " + n); var i = n, o = { request: null, response: null, options: {} }; if (n = this.tn.next(), n !== e.COPTOPEN) throw Error("Illegal start of request type in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (n = this.tn.next(), !e.TYPEREF.test(n)) throw Error("Illegal request type in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (o.request = n, n = this.tn.next(), n != e.COPTCLOSE) throw Error("Illegal end of request type in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (n = this.tn.next(), "returns" !== n.toLowerCase()) throw Error("Illegal delimiter in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (n = this.tn.next(), n != e.COPTOPEN) throw Error("Illegal start of response type in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (n = this.tn.next(), o.response = n, n = this.tn.next(), n !== e.COPTCLOSE) throw Error("Illegal end of response type in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); if (n = this.tn.next(), n === e.OPEN) { do if (n = this.tn.next(), "option" === n) this._parseOption(o, n); else if (n !== e.CLOSE) throw Error("Illegal start of option inservice " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); while (n !== e.CLOSE); this.tn.peek() === e.END && this.tn.next() } else if (n !== e.END) throw Error("Illegal delimiter in service " + t.name + "#" + i + " at line " + this.tn.line + ": " + n); "undefined" == typeof t[r] && (t[r] = {}), t[r][i] = o }, a._parseMessage = function (t, n, r) { var i = {}, o = "group" === r; if (r = this.tn.next(), !e.NAME.test(r)) throw Error("Illegal " + (o ? "group" : "message") + " name" + (t ? " in message " + t.name : "") + " at line " + this.tn.line + ": " + r); if (i.name = r, o) { if (r = this.tn.next(), r !== e.EQUAL) throw Error("Illegal id assignment after group " + i.name + " at line " + this.tn.line + ": " + r); r = this.tn.next(); try { n.id = this._parseId(r) } catch (a) { throw Error("Illegal field id value for group " + i.name + "#" + n.name + " at line " + this.tn.line + ": " + r) } i.isGroup = !0 } if (i.fields = [], i.enums = [], i.messages = [], i.options = {}, i.oneofs = {}, r = this.tn.next(), r === e.OPTOPEN && n && (this._parseFieldOptions(i, n, r), r = this.tn.next()), r !== e.OPEN) throw Error("Illegal start of " + (o ? "group" : "message") + " " + i.name + " at line " + this.tn.line + ": " + r); for (; ;) { if (r = this.tn.next(), r === e.CLOSE) { r = this.tn.peek(), r === e.END && this.tn.next(); break } if (e.RULE.test(r)) this._parseMessageField(i, r); else if ("oneof" === r) this._parseMessageOneOf(i, r); else if ("enum" === r) this._parseEnum(i, r); else if ("message" === r) this._parseMessage(i, null, r); else if ("option" === r) this._parseOption(i, r); else if ("extensions" === r) i.extensions = this._parseExtensions(i, r); else { if ("extend" !== r) throw Error("Illegal token in message " + i.name + " at line " + this.tn.line + ": " + r); this._parseExtend(i, r) } } return t.messages.push(i), i }, a._parseMessageField = function (t, n) { var r = {}, i = null; if (r.rule = n, r.options = {}, n = this.tn.next(), "group" === n) { if (i = this._parseMessage(t, r, n), !/^[A-Z]/.test(i.name)) throw Error("Group names must start with a capital letter"); r.type = i.name, r.name = i.name.toLowerCase(), n = this.tn.peek(), n === e.END && this.tn.next() } else { if (!e.TYPE.test(n) && !e.TYPEREF.test(n)) throw Error("Illegal field type in message " + t.name + " at line " + this.tn.line + ": " + n); if (r.type = n, n = this.tn.next(), !e.NAME.test(n)) throw Error("Illegal field name in message " + t.name + " at line " + this.tn.line + ": " + n); if (r.name = n, n = this.tn.next(), n !== e.EQUAL) throw Error("Illegal token in field " + t.name + "#" + r.name + " at line " + this.tn.line + ": " + n); n = this.tn.next(); try { r.id = this._parseId(n) } catch (o) { throw Error("Illegal field id in message " + t.name + "#" + r.name + " at line " + this.tn.line + ": " + n) } if (n = this.tn.next(), n === e.OPTOPEN && (this._parseFieldOptions(t, r, n), n = this.tn.next()), n !== e.END) throw Error("Illegal delimiter in message " + t.name + "#" + r.name + " at line " + this.tn.line + ": " + n) } return t.fields.push(r), r }, a._parseMessageOneOf = function (t, n) { if (n = this.tn.next(), !e.NAME.test(n)) throw Error("Illegal oneof name in message " + t.name + " at line " + this.tn.line + ": " + n); var r, i = n, o = []; if (n = this.tn.next(), n !== e.OPEN) throw Error("Illegal start of oneof " + i + " at line " + this.tn.line + ": " + n); for (; this.tn.peek() !== e.CLOSE;) r = this._parseMessageField(t, "optional"), r.oneof = i, o.push(r.id); this.tn.next(), t.oneofs[i] = o }, a._parseFieldOptions = function (t, n, r) { for (var i = !0; ;) { if (r = this.tn.next(), r === e.OPTCLOSE) break; if (r === e.OPTEND) { if (i) throw Error("Illegal start of options in message " + t.name + "#" + n.name + " at line " + this.tn.line + ": " + r); r = this.tn.next() } this._parseFieldOption(t, n, r), i = !1 } }, a._parseFieldOption = function (t, n, r) { var i = !1; if (r === e.COPTOPEN && (r = this.tn.next(), i = !0), !e.TYPEREF.test(r)) throw Error("Illegal field option in " + t.name + "#" + n.name + " at line " + this.tn.line + ": " + r); var o = r; if (r = this.tn.next(), i) { if (r !== e.COPTCLOSE) throw Error("Illegal delimiter in " + t.name + "#" + n.name + " at line " + this.tn.line + ": " + r); o = "(" + o + ")", r = this.tn.next(), e.FQTYPEREF.test(r) && (o += r, r = this.tn.next()) } if (r !== e.EQUAL) throw Error("Illegal token in " + t.name + "#" + n.name + " at line " + this.tn.line + ": " + r); var a; if (r = this.tn.peek(), r === e.STRINGOPEN || r === e.STRINGOPEN_SQ) a = this._parseString(); else if (e.NUMBER.test(r, !0)) a = this._parseNumber(this.tn.next(), !0); else if (e.BOOL.test(r)) a = "true" === this.tn.next().toLowerCase(); else { if (!e.TYPEREF.test(r)) throw Error("Illegal value in message " + t.name + "#" + n.name + ", option " + o + " at line " + this.tn.line + ": " + r); a = this.tn.next() } n.options[o] = a }, a._parseEnum = function (t, n) { var r = {}; if (n = this.tn.next(), !e.NAME.test(n)) throw Error("Illegal enum name in message " + t.name + " at line " + this.tn.line + ": " + n); if (r.name = n, n = this.tn.next(), n !== e.OPEN) throw Error("Illegal start of enum " + r.name + " at line " + this.tn.line + ": " + n); for (r.values = [], r.options = {}; ;) { if (n = this.tn.next(), n === e.CLOSE) { n = this.tn.peek(), n === e.END && this.tn.next(); break } if ("option" == n) this._parseOption(r, n); else { if (!e.NAME.test(n)) throw Error("Illegal name in enum " + r.name + " at line " + this.tn.line + ": " + n); this._parseEnumValue(r, n) } } t.enums.push(r) }, a._parseEnumValue = function (t, n) { var r = {}; if (r.name = n, n = this.tn.next(), n !== e.EQUAL) throw Error("Illegal token in enum " + t.name + " at line " + this.tn.line + ": " + n); n = this.tn.next(); try { r.id = this._parseId(n, !0) } catch (i) { throw Error("Illegal id in enum " + t.name + " at line " + this.tn.line + ": " + n) } if (t.values.push(r), n = this.tn.next(), n === e.OPTOPEN) { var o = { options: {} }; this._parseFieldOptions(t, o, n), n = this.tn.next() } if (n !== e.END) throw Error("Illegal delimiter in enum " + t.name + " at line " + this.tn.line + ": " + n) }, a._parseExtensions = function (n, r) { var i = []; if (r = this.tn.next(), i.push("min" === r ? t.ID_MIN : "max" === r ? t.ID_MAX : this._parseNumber(r)), r = this.tn.next(), "to" !== r) throw Error("Illegal extensions delimiter in message " + n.name + " at line " + this.tn.line + ": " + r); if (r = this.tn.next(), i.push("min" === r ? t.ID_MIN : "max" === r ? t.ID_MAX : this._parseNumber(r)), r = this.tn.next(), r !== e.END) throw Error("Illegal extensions delimiter in message " + n.name + " at line " + this.tn.line + ": " + r); return i }, a._parseExtend = function (t, n) { if (n = this.tn.next(), !e.TYPEREF.test(n)) throw Error("Illegal message name at line " + this.tn.line + ": " + n); var r = {}; if (r.ref = n, r.fields = [], n = this.tn.next(), n !== e.OPEN) throw Error("Illegal start of extend " + r.name + " at line " + this.tn.line + ": " + n); for (; ;) { if (n = this.tn.next(), n === e.CLOSE) { n = this.tn.peek(), n == e.END && this.tn.next(); break } if (!e.RULE.test(n)) throw Error("Illegal token in extend " + r.name + " at line " + this.tn.line + ": " + n); this._parseMessageField(r, n) } return t.messages.push(r), r }, a.toString = function () { return "Parser" }, n.Parser = o, n }(n, n.Lang), n.Reflect = function (e) {
                            function n(t, r) { var i = r.readVarint32(), o = 7 & i, a = i >> 3; switch (o) { case e.WIRE_TYPES.VARINT: do i = r.readUint8(); while (128 === (128 & i)); break; case e.WIRE_TYPES.BITS64: r.offset += 8; break; case e.WIRE_TYPES.LDELIM: i = r.readVarint32(), r.offset += i; break; case e.WIRE_TYPES.STARTGROUP: n(a, r); break; case e.WIRE_TYPES.ENDGROUP: if (a === t) return !1; throw Error("Illegal GROUPEND after unknown group: " + a + " (" + t + " expected)"); case e.WIRE_TYPES.BITS32: r.offset += 4; break; default: throw Error("Illegal wire type in unknown group " + t + ": " + o) } return !0 } function r(t, n) { if (t && "number" == typeof t.low && "number" == typeof t.high && "boolean" == typeof t.unsigned && t.low === t.low && t.high === t.high) return new e.Long(t.low, t.high, "undefined" == typeof n ? t.unsigned : n); if ("string" == typeof t) return e.Long.fromString(t, n || !1, 10); if ("number" == typeof t) return e.Long.fromNumber(t, n || !1); throw Error("not convertible to Long") } var i = {}, o = function (t, e, n) { this.builder = t, this.parent = e, this.name = n, this.className }, a = o.prototype; a.fqn = function () { for (var t = this.name, e = this; ;) { if (e = e.parent, null == e) break; t = e.name + "." + t } return t }, a.toString = function (t) { return (t ? this.className + " " : "") + this.fqn() }, a.build = function () { throw Error(this.toString(!0) + " cannot be built directly") }, i.T = o; var s = function (t, e, n, r) { o.call(this, t, e, n), this.className = "Namespace", this.children = [], this.options = r || {} }, u = s.prototype = Object.create(o.prototype); u.getChildren = function (t) { if (t = t || null, null == t) return this.children.slice(); for (var e = [], n = 0, r = this.children.length; r > n; ++n) this.children[n] instanceof t && e.push(this.children[n]); return e }, u.addChild = function (t) { var e; if (e = this.getChild(t.name)) if (e instanceof l.Field && e.name !== e.originalName && null === this.getChild(e.originalName)) e.name = e.originalName; else { if (!(t instanceof l.Field && t.name !== t.originalName && null === this.getChild(t.originalName))) throw Error("Duplicate name in namespace " + this.toString(!0) + ": " + t.name); t.name = t.originalName } this.children.push(t) }, u.getChild = function (t) { for (var e = "number" == typeof t ? "id" : "name", n = 0, r = this.children.length; r > n; ++n) if (this.children[n][e] === t) return this.children[n]; return null }, u.resolve = function (t, e) { var n = t.split("."), r = this, o = 0; if ("" === n[o]) { for (; null !== r.parent;) r = r.parent; o++ } var a; do { do { if (a = r.getChild(n[o]), !a || !(a instanceof i.T) || e && a instanceof i.Message.Field) { r = null; break } r = a, o++ } while (o < n.length); if (null != r) break; if (null !== this.parent) return this.parent.resolve(t, e) } while (null != r); return r }, u.build = function () { for (var t, e = {}, n = this.children, r = 0, i = n.length; i > r; ++r) t = n[r], t instanceof s && (e[t.name] = t.build()); return Object.defineProperty && Object.defineProperty(e, "$options", { value: this.buildOpt() }), e }, u.buildOpt = function () { for (var t = {}, e = Object.keys(this.options), n = 0, r = e.length; r > n; ++n) { var i = e[n], o = this.options[e[n]]; t[i] = o } return t }, u.getOption = function (t) { return "undefined" == typeof t ? this.options : "undefined" != typeof this.options[t] ? this.options[t] : null }, i.Namespace = s; var l = function (t, n, r, i, o) { s.call(this, t, n, r, i), this.className = "Message", this.extensions = [e.ID_MIN, e.ID_MAX], this.clazz = null, this.isGroup = !!o, this._fields = null, this._fieldsById = null, this._fieldsByName = null }, c = l.prototype = Object.create(s.prototype); c.build = function (n) { if (this.clazz && !n) return this.clazz; var r = function (e, n) { function r(e, n) { var i = {}; for (var o in e) e.hasOwnProperty(o) && (null === e[o] || "object" != typeof e[o] ? i[o] = e[o] : e[o] instanceof t ? n && (i[o] = e[o].toBase64()) : i[o] = r(e[o], n)); return i } var i = n.getChildren(e.Reflect.Message.Field), o = n.getChildren(e.Reflect.Message.OneOf), a = function (n, r) { e.Builder.Message.call(this); for (var a = 0, s = o.length; s > a; ++a) this[o[a].name] = null; for (a = 0, s = i.length; s > a; ++a) { var u = i[a]; this[u.name] = u.repeated ? [] : null, u.required && null !== u.defaultValue && (this[u.name] = u.defaultValue) } if (arguments.length > 0) if (1 !== arguments.length || "object" != typeof n || "function" == typeof n.encode || e.Util.isArray(n) || n instanceof t || n instanceof ArrayBuffer || e.Long && n instanceof e.Long) for (a = 0, s = arguments.length; s > a; ++a) this.$set(i[a].name, arguments[a]); else { var l = Object.keys(n); for (a = 0, s = l.length; s > a; ++a) this.$set(l[a], n[l[a]]) } }, s = a.prototype = Object.create(e.Builder.Message.prototype); s.add = function (t, r, i) { var o = n._fieldsByName[t]; if (!i) { if (!o) throw Error(this + "#" + t + " is undefined"); if (!(o instanceof e.Reflect.Message.Field)) throw Error(this + "#" + t + " is not a field: " + o.toString(!0)); if (!o.repeated) throw Error(this + "#" + t + " is not a repeated field") } null === this[o.name] && (this[o.name] = []), this[o.name].push(i ? r : o.verifyValue(r, !0)) }, s.$add = s.add, s.set = function (t, r, i) { if (t && "object" == typeof t) { for (var o in t) t.hasOwnProperty(o) && this.$set(o, t[o], i); return this } var a = n._fieldsByName[t]; if (i) this[a.name] = r; else { if (!a) throw Error(this + "#" + t + " is not a field: undefined"); if (!(a instanceof e.Reflect.Message.Field)) throw Error(this + "#" + t + " is not a field: " + a.toString(!0)); this[a.name] = r = a.verifyValue(r) } return a.oneof && (null !== r ? (null !== this[a.oneof.name] && (this[this[a.oneof.name]] = null), this[a.oneof.name] = a.name) : a.oneof.name === t && (this[a.oneof.name] = null)), this }, s.$set = s.set, s.get = function (t, r) { if (r) return this[t]; var i = n._fieldsByName[t]; if (!(i && i instanceof e.Reflect.Message.Field)) throw Error(this + "#" + t + " is not a field: undefined"); if (!(i instanceof e.Reflect.Message.Field)) throw Error(this + "#" + t + " is not a field: " + i.toString(!0)); return this[i.name] }, s.$get = s.get; for (var u = 0; u < i.length; u++) { var l = i[u]; l instanceof e.Reflect.Message.ExtensionField || n.builder.options.populateAccessors && function (t) { var e = t.originalName.replace(/(_[a-zA-Z])/g, function (t) { return t.toUpperCase().replace("_", "") }); e = e.substring(0, 1).toUpperCase() + e.substring(1); var r = t.originalName.replace(/([A-Z])/g, function (t) { return "_" + t }), i = function (e, n) { return this[t.name] = n ? e : t.verifyValue(e), this }, o = function () { return this[t.name] }; null === n.getChild("set" + e) && (s["set" + e] = i), null === n.getChild("set_" + r) && (s["set_" + r] = i), null === n.getChild("get" + e) && (s["get" + e] = o), null === n.getChild("get_" + r) && (s["get_" + r] = o) }(l) } s.encode = function (e, r) { "boolean" == typeof e && (r = e, e = void 0); var i = !1; e || (e = new t, i = !0); var o = e.littleEndian; try { return n.encode(this, e.LE(), r), (i ? e.flip() : e).LE(o) } catch (a) { throw e.LE(o), a } }, s.calculate = function () { return n.calculate(this) }, s.encodeDelimited = function (e) { var r = !1; e || (e = new t, r = !0); var i = (new t).LE(); return n.encode(this, i).flip(), e.writeVarint32(i.remaining()), e.append(i), r ? e.flip() : e }, s.encodeAB = function () { try { return this.encode().toArrayBuffer() } catch (t) { throw t.encoded && (t.encoded = t.encoded.toArrayBuffer()), t } }, s.toArrayBuffer = s.encodeAB, s.encodeNB = function () { try { return this.encode().toBuffer() } catch (t) { throw t.encoded && (t.encoded = t.encoded.toBuffer()), t } }, s.toBuffer = s.encodeNB, s.encode64 = function () { try { return this.encode().toBase64() } catch (t) { throw t.encoded && (t.encoded = t.encoded.toBase64()), t } }, s.toBase64 = s.encode64, s.encodeHex = function () { try { return this.encode().toHex() } catch (t) { throw t.encoded && (t.encoded = t.encoded.toHex()), t } }, s.toHex = s.encodeHex, s.toRaw = function (t) { return r(this, !!t) }, a.decode = function (e, r) { "string" == typeof e && (e = t.wrap(e, r ? r : "base64")), e = e instanceof t ? e : t.wrap(e); var i = e.littleEndian; try { var o = n.decode(e.LE()); return e.LE(i), o } catch (a) { throw e.LE(i), a } }, a.decodeDelimited = function (e, r) { if ("string" == typeof e && (e = t.wrap(e, r ? r : "base64")), e = e instanceof t ? e : t.wrap(e), e.remaining() < 1) return null; var i = e.offset, o = e.readVarint32(); if (e.remaining() < o) return e.offset = i, null; try { var a = n.decode(e.slice(e.offset, e.offset + o).LE()); return e.offset += o, a } catch (s) { throw e.offset += o, s } }, a.decode64 = function (t) { return a.decode(t, "base64") }, a.decodeHex = function (t) { return a.decode(t, "hex") }, s.toString = function () { return n.toString() }; return Object.defineProperty && (Object.defineProperty(a, "$options", { value: n.buildOpt() }), Object.defineProperty(s, "$type", { get: function () { return n } })), a }(e, this); this._fields = [], this._fieldsById = {}, this._fieldsByName = {}; for (var i, o = 0, a = this.children.length; a > o; o++) if (i = this.children[o], i instanceof g) r[i.name] = i.build(); else if (i instanceof l) r[i.name] = i.build(); else if (i instanceof l.Field) i.build(), this._fields.push(i), this._fieldsById[i.id] = i, this._fieldsByName[i.name] = i; else if (!(i instanceof l.OneOf || i instanceof v)) throw Error("Illegal reflect child of " + this.toString(!0) + ": " + children[o].toString(!0)); return this.clazz = r }, c.encode = function (t, e, n) { for (var r, i, o = null, a = 0, s = this._fields.length; s > a; ++a) r = this._fields[a], i = t[r.name], r.required && null === i ? null === o && (o = r) : r.encode(n ? i : r.verifyValue(i), e); if (null !== o) { var u = Error("Missing at least one required field for " + this.toString(!0) + ": " + o); throw u.encoded = e, u } return e }, c.calculate = function (t) { for (var e, n, r = 0, i = 0, o = this._fields.length; o > i; ++i) { if (e = this._fields[i], n = t[e.name], e.required && null === n) throw Error("Missing at least one required field for " + this.toString(!0) + ": " + e); r += e.calculate(n) } return r }, c.decode = function (t, r, i) { r = "number" == typeof r ? r : -1; for (var o, a, s, u, l = t.offset, c = new this.clazz; t.offset < l + r || -1 === r && t.remaining() > 0;) { if (o = t.readVarint32(), a = 7 & o, s = o >> 3, a === e.WIRE_TYPES.ENDGROUP) { if (s !== i) throw Error("Illegal group end indicator for " + this.toString(!0) + ": " + s + " (" + (i ? i + " expected" : "not a group") + ")"); break } if (u = this._fieldsById[s]) u.repeated && !u.options.packed ? c[u.name].push(u.decode(a, t)) : (c[u.name] = u.decode(a, t), u.oneof && (null !== this[u.oneof.name] && (this[this[u.oneof.name]] = null), c[u.oneof.name] = u.name)); else switch (a) { case e.WIRE_TYPES.VARINT: t.readVarint32(); break; case e.WIRE_TYPES.BITS32: t.offset += 4; break; case e.WIRE_TYPES.BITS64: t.offset += 8; break; case e.WIRE_TYPES.LDELIM: var f = t.readVarint32(); t.offset += f; break; case e.WIRE_TYPES.STARTGROUP: for (; n(s, t) ;); break; default: throw Error("Illegal wire type for unknown field " + s + " in " + this.toString(!0) + "#decode: " + a) } } for (var h = 0, d = this._fields.length; d > h; ++h) if (u = this._fields[h], null === c[u.name]) { if (u.required) { var p = Error("Missing at least one required field for " + this.toString(!0) + ": " + u.name); throw p.decoded = c, p } null !== u.defaultValue && (c[u.name] = u.defaultValue) } return c }, i.Message = l; var f = function (t, e, n, r, i, a, s, u) { o.call(this, t, e, i), this.className = "Message.Field", this.required = "required" === n, this.repeated = "repeated" === n, this.type = r, this.resolvedType = null, this.id = a, this.options = s || {}, this.defaultValue = null, this.oneof = u || null, this.originalName = this.name, !this.builder.options.convertFieldsToCamelCase || this instanceof l.ExtensionField || (this.name = f._toCamelCase(this.name)) }; f._toCamelCase = function (t) { return t.replace(/_([a-zA-Z])/g, function (t, e) { return e.toUpperCase() }) }; var h = f.prototype = Object.create(o.prototype); h.build = function () { this.defaultValue = "undefined" != typeof this.options["default"] ? this.verifyValue(this.options["default"]) : null }, h.verifyValue = function (n, i) { i = i || !1; var o = function (t, e) { throw Error("Illegal value for " + this.toString(!0) + " of type " + this.type.name + ": " + t + " (" + e + ")") }.bind(this); if (null === n) return this.required && o(typeof n, "required"), null; var a; if (this.repeated && !i) { e.Util.isArray(n) || (n = [n]); var s = []; for (a = 0; a < n.length; a++) s.push(this.verifyValue(n[a], !0)); return s } switch (!this.repeated && e.Util.isArray(n) && o(typeof n, "no array expected"), this.type) { case e.TYPES.int32: case e.TYPES.sint32: case e.TYPES.sfixed32: return ("number" != typeof n || n === n && n % 1 !== 0) && o(typeof n, "not an integer"), n > 4294967295 ? 0 | n : n; case e.TYPES.uint32: case e.TYPES.fixed32: return ("number" != typeof n || n === n && n % 1 !== 0) && o(typeof n, "not an integer"), 0 > n ? n >>> 0 : n; case e.TYPES.int64: case e.TYPES.sint64: case e.TYPES.sfixed64: if (e.Long) try { return r(n, !1) } catch (u) { o(typeof n, u.message) } else o(typeof n, "requires Long.js"); case e.TYPES.uint64: case e.TYPES.fixed64: if (e.Long) try { return r(n, !0) } catch (u) { o(typeof n, u.message) } else o(typeof n, "requires Long.js"); case e.TYPES.bool: return "boolean" != typeof n && o(typeof n, "not a boolean"), n; case e.TYPES["float"]: case e.TYPES["double"]: return "number" != typeof n && o(typeof n, "not a number"), n; case e.TYPES.string: return "string" == typeof n || n && n instanceof String || o(typeof n, "not a string"), "" + n; case e.TYPES.bytes: return t.isByteBuffer(n) ? n : t.wrap(n, "base64"); case e.TYPES["enum"]: var l = this.resolvedType.getChildren(g.Value); for (a = 0; a < l.length; a++) { if (l[a].name == n) return l[a].id; if (l[a].id == n) return l[a].id } o(n, "not a valid enum value"); case e.TYPES.group: case e.TYPES.message: if (n && "object" == typeof n || o(typeof n, "object expected"), n instanceof this.resolvedType.clazz) return n; if (n instanceof e.Builder.Message) { var c = {}; for (var a in n) n.hasOwnProperty(a) && (c[a] = n[a]); n = c } return new this.resolvedType.clazz(n) } throw Error("[INTERNAL] Illegal value for " + this.toString(!0) + ": " + n + " (undefined type " + this.type + ")") }, h.encode = function (n, r) { if (null === this.type || "object" != typeof this.type) throw Error("[INTERNAL] Unresolved type in " + this.toString(!0) + ": " + this.type); if (null === n || this.repeated && 0 == n.length) return r; try { if (this.repeated) { var i; if (this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) { r.writeVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), r.ensureCapacity(r.offset += 1); var o = r.offset; for (i = 0; i < n.length; i++) this.encodeValue(n[i], r); var a = r.offset - o, s = t.calculateVarint32(a); if (s > 1) { var u = r.slice(o, r.offset); o += s - 1, r.offset = o, r.append(u) } r.writeVarint32(a, o - s) } else for (i = 0; i < n.length; i++) r.writeVarint32(this.id << 3 | this.type.wireType), this.encodeValue(n[i], r) } else r.writeVarint32(this.id << 3 | this.type.wireType), this.encodeValue(n, r) } catch (l) { throw Error("Illegal value for " + this.toString(!0) + ": " + n + " (" + l + ")") } return r }, h.encodeValue = function (n, r) {
                                if (null === n) return r; switch (this.type) {
                                    case e.TYPES.int32: 0 > n ? r.writeVarint64(n) : r.writeVarint32(n); break; case e.TYPES.uint32: r.writeVarint32(n); break; case e.TYPES.sint32: r.writeVarint32ZigZag(n); break; case e.TYPES.fixed32: r.writeUint32(n); break; case e.TYPES.sfixed32: r.writeInt32(n); break; case e.TYPES.int64: case e.TYPES.uint64: r.writeVarint64(n); break; case e.TYPES.sint64: r.writeVarint64ZigZag(n); break; case e.TYPES.fixed64: r.writeUint64(n); break; case e.TYPES.sfixed64: r.writeInt64(n); break; case e.TYPES.bool: r.writeVarint32("string" == typeof n ? "false" === n.toLowerCase() ? 0 : !!n : n ? 1 : 0); break; case e.TYPES["enum"]: r.writeVarint32(n); break; case e.TYPES["float"]: r.writeFloat32(n); break; case e.TYPES["double"]: r.writeFloat64(n); break; case e.TYPES.string: r.writeVString(n); break; case e.TYPES.bytes: if (n.remaining() < 0) throw Error("Illegal value for " + this.toString(!0) + ": " + n.remaining() + " bytes remaining"); var i = n.offset; r.writeVarint32(n.remaining()), r.append(n), n.offset = i; break; case e.TYPES.message: var o = (new t).LE(); this.resolvedType.encode(n, o),
                                    r.writeVarint32(o.offset), r.append(o.flip()); break; case e.TYPES.group: this.resolvedType.encode(n, r), r.writeVarint32(this.id << 3 | e.WIRE_TYPES.ENDGROUP); break; default: throw Error("[INTERNAL] Illegal value to encode in " + this.toString(!0) + ": " + n + " (unknown type)")
                                } return r
                            }, h.calculate = function (n) { if (n = this.verifyValue(n), null === this.type || "object" != typeof this.type) throw Error("[INTERNAL] Unresolved type in " + this.toString(!0) + ": " + this.type); if (null === n || this.repeated && 0 == n.length) return 0; var r = 0; try { if (this.repeated) { var i, o; if (this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) { for (r += t.calculateVarint32(this.id << 3 | e.WIRE_TYPES.LDELIM), o = 0, i = 0; i < n.length; i++) o += this.calculateValue(n[i]); r += t.calculateVarint32(o), r += o } else for (i = 0; i < n.length; i++) r += t.calculateVarint32(this.id << 3 | this.type.wireType), r += this.calculateValue(n[i]) } else r += t.calculateVarint32(this.id << 3 | this.type.wireType), r += this.calculateValue(n) } catch (a) { throw Error("Illegal value for " + this.toString(!0) + ": " + n + " (" + a + ")") } return r }, h.calculateValue = function (n) { if (null === n) return 0; var r; switch (this.type) { case e.TYPES.int32: return 0 > n ? t.calculateVarint64(n) : t.calculateVarint32(n); case e.TYPES.uint32: return t.calculateVarint32(n); case e.TYPES.sint32: return t.calculateVarint32(t.zigZagEncode32(n)); case e.TYPES.fixed32: case e.TYPES.sfixed32: case e.TYPES["float"]: return 4; case e.TYPES.int64: case e.TYPES.uint64: return t.calculateVarint64(n); case e.TYPES.sint64: return t.calculateVarint64(t.zigZagEncode64(n)); case e.TYPES.fixed64: case e.TYPES.sfixed64: return 8; case e.TYPES.bool: return 1; case e.TYPES["enum"]: return t.calculateVarint32(n); case e.TYPES["double"]: return 8; case e.TYPES.string: return r = t.calculateUTF8Bytes(n), t.calculateVarint32(r) + r; case e.TYPES.bytes: if (n.remaining() < 0) throw Error("Illegal value for " + this.toString(!0) + ": " + n.remaining() + " bytes remaining"); return t.calculateVarint32(n.remaining()) + n.remaining(); case e.TYPES.message: return r = this.resolvedType.calculate(n), t.calculateVarint32(r) + r; case e.TYPES.group: return r = this.resolvedType.calculate(n), r + t.calculateVarint32(this.id << 3 | e.WIRE_TYPES.ENDGROUP) } throw Error("[INTERNAL] Illegal value to encode in " + this.toString(!0) + ": " + n + " (unknown type)") }, h.decode = function (t, n, r) { var i, o; if (t != this.type.wireType && (r || t != e.WIRE_TYPES.LDELIM || !this.repeated)) throw Error("Illegal wire type for field " + this.toString(!0) + ": " + t + " (" + this.type.wireType + " expected)"); if (t == e.WIRE_TYPES.LDELIM && this.repeated && this.options.packed && e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0 && !r) { o = n.readVarint32(), o = n.offset + o; for (var a = []; n.offset < o;) a.push(this.decode(this.type.wireType, n, !0)); return a } switch (this.type) { case e.TYPES.int32: return 0 | n.readVarint32(); case e.TYPES.uint32: return n.readVarint32() >>> 0; case e.TYPES.sint32: return 0 | n.readVarint32ZigZag(); case e.TYPES.fixed32: return n.readUint32() >>> 0; case e.TYPES.sfixed32: return 0 | n.readInt32(); case e.TYPES.int64: return n.readVarint64(); case e.TYPES.uint64: return n.readVarint64().toUnsigned(); case e.TYPES.sint64: return n.readVarint64ZigZag(); case e.TYPES.fixed64: return n.readUint64(); case e.TYPES.sfixed64: return n.readInt64(); case e.TYPES.bool: return !!n.readVarint32(); case e.TYPES["enum"]: return n.readVarint32(); case e.TYPES["float"]: return n.readFloat(); case e.TYPES["double"]: return n.readDouble(); case e.TYPES.string: return n.readVString(); case e.TYPES.bytes: if (o = n.readVarint32(), n.remaining() < o) throw Error("Illegal number of bytes for " + this.toString(!0) + ": " + o + " required but got only " + n.remaining()); return i = n.clone(), i.limit = i.offset + o, n.offset += o, i; case e.TYPES.message: return o = n.readVarint32(), this.resolvedType.decode(n, o); case e.TYPES.group: return this.resolvedType.decode(n, -1, this.id) } throw Error("[INTERNAL] Illegal wire type for " + this.toString(!0) + ": " + t) }, i.Message.Field = f; var d = function (t, e, n, r, i, o, a) { f.call(this, t, e, n, r, i, o, a), this.extension }; d.prototype = Object.create(f.prototype), i.Message.ExtensionField = d; var p = function (t, e, n) { o.call(this, t, e, n), this.fields = [] }; i.Message.OneOf = p; var g = function (t, e, n, r) { s.call(this, t, e, n, r), this.className = "Enum", this.object = null }, m = g.prototype = Object.create(s.prototype); m.build = function () { for (var t = {}, e = this.getChildren(g.Value), n = 0, r = e.length; r > n; ++n) t[e[n].name] = e[n].id; return Object.defineProperty && Object.defineProperty(t, "$options", { value: this.buildOpt() }), this.object = t }, i.Enum = g; var y = function (t, e, n, r) { o.call(this, t, e, n), this.className = "Enum.Value", this.id = r }; y.prototype = Object.create(o.prototype), i.Enum.Value = y; var v = function (t, e, n, r) { o.call(this, t, e, n), this.field = r }; v.prototype = Object.create(o.prototype), i.Extension = v; var _ = function (t, e, n, r) { s.call(this, t, e, n, r), this.className = "Service", this.clazz = null }, b = _.prototype = Object.create(s.prototype); b.build = function (t) { return this.clazz && !t ? this.clazz : this.clazz = function (t, e) { var n = function (e) { t.Builder.Service.call(this), this.rpcImpl = e || function (t, e, n) { setTimeout(n.bind(this, Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")), 0) } }, r = n.prototype = Object.create(t.Builder.Service.prototype); Object.defineProperty && (Object.defineProperty(n, "$options", { value: e.buildOpt() }), Object.defineProperty(r, "$options", { value: n.$options })); for (var i = e.getChildren(t.Reflect.Service.RPCMethod), o = 0; o < i.length; o++) !function (t) { r[t.name] = function (n, r) { try { if (!(n && n instanceof t.resolvedRequestType.clazz)) return void setTimeout(r.bind(this, Error("Illegal request type provided to service method " + e.name + "#" + t.name)), 0); this.rpcImpl(t.fqn(), n, function (n, i) { if (n) return void r(n); try { i = t.resolvedResponseType.clazz.decode(i) } catch (o) { } return i && i instanceof t.resolvedResponseType.clazz ? void r(null, i) : void r(Error("Illegal response type received in service method " + e.name + "#" + t.name)) }) } catch (i) { setTimeout(r.bind(this, i), 0) } }, n[t.name] = function (e, r, i) { new n(e)[t.name](r, i) }, Object.defineProperty && (Object.defineProperty(n[t.name], "$options", { value: t.buildOpt() }), Object.defineProperty(r[t.name], "$options", { value: n[t.name].$options })) }(i[o]); return n }(e, this) }, i.Service = _; var w = function (t, e, n, r) { o.call(this, t, e, n), this.className = "Service.Method", this.options = r || {} }, x = w.prototype = Object.create(o.prototype); x.buildOpt = u.buildOpt, i.Service.Method = w; var M = function (t, e, n, r, i, o) { w.call(this, t, e, n, o), this.className = "Service.RPCMethod", this.requestName = r, this.responseName = i, this.resolvedRequestType = null, this.resolvedResponseType = null }; return M.prototype = Object.create(w.prototype), i.Service.RPCMethod = M, i
                        }(n), n.Builder = function (t, n, r) { var i = function (t) { this.ns = new r.Namespace(this, null, ""), this.ptr = this.ns, this.resolved = !1, this.result = null, this.files = {}, this.importRoot = null, this.options = t || {} }, o = i.prototype; return o.reset = function () { this.ptr = this.ns }, o.define = function (t, e) { if ("string" != typeof t || !n.TYPEREF.test(t)) throw Error("Illegal package: " + t); var i, o = t.split("."); for (i = 0; i < o.length; i++) if (!n.NAME.test(o[i])) throw Error("Illegal package: " + o[i]); for (i = 0; i < o.length; i++) null === this.ptr.getChild(o[i]) && this.ptr.addChild(new r.Namespace(this, this.ptr, o[i], e)), this.ptr = this.ptr.getChild(o[i]); return this }, i.isValidMessage = function (e) { if ("string" != typeof e.name || !n.NAME.test(e.name)) return !1; if ("undefined" != typeof e.values || "undefined" != typeof e.rpc) return !1; var r; if ("undefined" != typeof e.fields) { if (!t.Util.isArray(e.fields)) return !1; var o, a = []; for (r = 0; r < e.fields.length; r++) { if (!i.isValidMessageField(e.fields[r])) return !1; if (o = parseInt(e.fields[r].id, 10), a.indexOf(o) >= 0) return !1; a.push(o) } a = null } if ("undefined" != typeof e.enums) { if (!t.Util.isArray(e.enums)) return !1; for (r = 0; r < e.enums.length; r++) if (!i.isValidEnum(e.enums[r])) return !1 } if ("undefined" != typeof e.messages) { if (!t.Util.isArray(e.messages)) return !1; for (r = 0; r < e.messages.length; r++) if (!i.isValidMessage(e.messages[r]) && !i.isValidExtend(e.messages[r])) return !1 } return "undefined" == typeof e.extensions || t.Util.isArray(e.extensions) && 2 === e.extensions.length && "number" == typeof e.extensions[0] && "number" == typeof e.extensions[1] ? !0 : !1 }, i.isValidMessageField = function (t) { if ("string" != typeof t.rule || "string" != typeof t.name || "string" != typeof t.type || "undefined" == typeof t.id) return !1; if (!(n.RULE.test(t.rule) && n.NAME.test(t.name) && n.TYPEREF.test(t.type) && n.ID.test("" + t.id))) return !1; if ("undefined" != typeof t.options) { if ("object" != typeof t.options) return !1; for (var e, r = Object.keys(t.options), i = 0; i < r.length; i++) if ("string" != typeof (e = r[i]) || "string" != typeof t.options[e] && "number" != typeof t.options[e] && "boolean" != typeof t.options[e]) return !1 } return !0 }, i.isValidEnum = function (e) { if ("string" != typeof e.name || !n.NAME.test(e.name)) return !1; if ("undefined" == typeof e.values || !t.Util.isArray(e.values) || 0 == e.values.length) return !1; for (var r = 0; r < e.values.length; r++) { if ("object" != typeof e.values[r]) return !1; if ("string" != typeof e.values[r].name || "undefined" == typeof e.values[r].id) return !1; if (!n.NAME.test(e.values[r].name) || !n.NEGID.test("" + e.values[r].id)) return !1 } return !0 }, o.create = function (e) { if (!e) return this; if (t.Util.isArray(e) || (e = [e]), 0 == e.length) return this; var n = []; for (n.push(e) ; n.length > 0;) { if (e = n.pop(), !t.Util.isArray(e)) throw Error("Not a valid namespace: " + JSON.stringify(e)); for (; e.length > 0;) { var o = e.shift(); if (i.isValidMessage(o)) { var a = new r.Message(this, this.ptr, o.name, o.options, o.isGroup), s = {}; if (o.oneofs) for (var u = Object.keys(o.oneofs), l = 0, c = u.length; c > l; ++l) a.addChild(s[u[l]] = new r.Message.OneOf(this, a, u[l])); if (o.fields && o.fields.length > 0) for (l = 0, c = o.fields.length; c > l; ++l) { var f = o.fields[l]; if (null !== a.getChild(f.id)) throw Error("Duplicate field id in message " + a.name + ": " + f.id); if (f.options) for (var h = Object.keys(f.options), d = 0, p = h.length; p > d; ++d) { if ("string" != typeof h[d]) throw Error("Illegal field option name in message " + a.name + "#" + f.name + ": " + h[d]); if ("string" != typeof f.options[h[d]] && "number" != typeof f.options[h[d]] && "boolean" != typeof f.options[h[d]]) throw Error("Illegal field option value in message " + a.name + "#" + f.name + "#" + h[d] + ": " + f.options[h[d]]) } var g = null; if ("string" == typeof f.oneof && (g = s[f.oneof], "undefined" == typeof g)) throw Error("Illegal oneof in message " + a.name + "#" + f.name + ": " + f.oneof); f = new r.Message.Field(this, a, f.rule, f.type, f.name, f.id, f.options, g), g && g.fields.push(f), a.addChild(f) } var m = []; if ("undefined" != typeof o.enums && o.enums.length > 0) for (l = 0; l < o.enums.length; l++) m.push(o.enums[l]); if (o.messages && o.messages.length > 0) for (l = 0; l < o.messages.length; l++) m.push(o.messages[l]); if (o.extensions && (a.extensions = o.extensions, a.extensions[0] < t.ID_MIN && (a.extensions[0] = t.ID_MIN), a.extensions[1] > t.ID_MAX && (a.extensions[1] = t.ID_MAX)), this.ptr.addChild(a), m.length > 0) { n.push(e), e = m, m = null, this.ptr = a, a = null; continue } m = null, a = null } else if (i.isValidEnum(o)) { for (a = new r.Enum(this, this.ptr, o.name, o.options), l = 0; l < o.values.length; l++) a.addChild(new r.Enum.Value(this, a, o.values[l].name, o.values[l].id)); this.ptr.addChild(a), a = null } else if (i.isValidService(o)) { a = new r.Service(this, this.ptr, o.name, o.options); for (l in o.rpc) o.rpc.hasOwnProperty(l) && a.addChild(new r.Service.RPCMethod(this, a, l, o.rpc[l].request, o.rpc[l].response, o.rpc[l].options)); this.ptr.addChild(a), a = null } else { if (!i.isValidExtend(o)) throw Error("Not a valid definition: " + JSON.stringify(o)); if (a = this.ptr.resolve(o.ref)) for (l = 0; l < o.fields.length; l++) { if (null !== a.getChild(o.fields[l].id)) throw Error("Duplicate extended field id in message " + a.name + ": " + o.fields[l].id); if (o.fields[l].id < a.extensions[0] || o.fields[l].id > a.extensions[1]) throw Error("Illegal extended field id in message " + a.name + ": " + o.fields[l].id + " (" + a.extensions.join(" to ") + " expected)"); var y = o.fields[l].name; this.options.convertFieldsToCamelCase && (y = r.Message.Field._toCamelCase(o.fields[l].name)), f = new r.Message.ExtensionField(this, a, o.fields[l].rule, o.fields[l].type, this.ptr.fqn() + "." + y, o.fields[l].id, o.fields[l].options); var v = new r.Extension(this, this.ptr, o.fields[l].name, f); f.extension = v, this.ptr.addChild(v), a.addChild(f) } else if (!/\.?google\.protobuf\./.test(o.ref)) throw Error("Extended message " + o.ref + " is not defined") } o = null } e = null, this.ptr = this.ptr.parent } return this.resolved = !1, this.result = null, this }, o["import"] = function (n, r) { if ("string" == typeof r) { if (t.Util.IS_NODE && (r = e("path").resolve(r)), this.files[r] === !0) return this.reset(), this; this.files[r] = !0 } if (n.imports && n.imports.length > 0) { var i, o = "/", a = !1; "object" == typeof r ? (this.importRoot = r.root, a = !0, i = this.importRoot, r = r.file, (i.indexOf("\\") >= 0 || r.indexOf("\\") >= 0) && (o = "\\")) : "string" == typeof r ? this.importRoot ? i = this.importRoot : r.indexOf("/") >= 0 ? (i = r.replace(/\/[^\/]*$/, ""), "" === i && (i = "/")) : r.indexOf("\\") >= 0 ? (i = r.replace(/\\[^\\]*$/, ""), o = "\\") : i = "." : i = null; for (var s = 0; s < n.imports.length; s++) if ("string" == typeof n.imports[s]) { if (!i) throw Error("Cannot determine import root: File name is unknown"); var u = n.imports[s]; if (/^google\/protobuf\//.test(u)) continue; if (u = i + o + u, this.files[u] === !0) continue; /\.proto$/i.test(u) && !t.DotProto && (u = u.replace(/\.proto$/, ".json")); var l = t.Util.fetch(u); if (null === l) throw Error("Failed to import '" + u + "' in '" + r + "': File not found"); /\.json$/i.test(u) ? this["import"](JSON.parse(l + ""), u) : this["import"](new t.DotProto.Parser(l + "").parse(), u) } else r ? /\.(\w+)$/.test(r) ? this["import"](n.imports[s], r.replace(/^(.+)\.(\w+)$/, function (t, e, n) { return e + "_import" + s + "." + n })) : this["import"](n.imports[s], r + "_import" + s) : this["import"](n.imports[s]); a && (this.importRoot = null) } return n.messages && (n["package"] && this.define(n["package"], n.options), this.create(n.messages), this.reset()), n.enums && (n["package"] && this.define(n["package"], n.options), this.create(n.enums), this.reset()), n.services && (n["package"] && this.define(n["package"], n.options), this.create(n.services), this.reset()), n["extends"] && (n["package"] && this.define(n["package"], n.options), this.create(n["extends"]), this.reset()), this }, i.isValidService = function (t) { return !("string" != typeof t.name || !n.NAME.test(t.name) || "object" != typeof t.rpc) }, i.isValidExtend = function (e) { if ("string" != typeof e.ref || !n.TYPEREF.test(e.ref)) return !1; var r; if ("undefined" != typeof e.fields) { if (!t.Util.isArray(e.fields)) return !1; var o, a = []; for (r = 0; r < e.fields.length; r++) { if (!i.isValidMessageField(e.fields[r])) return !1; if (o = parseInt(e.id, 10), a.indexOf(o) >= 0) return !1; a.push(o) } a = null } return !0 }, o.resolveAll = function () { var e; if (null != this.ptr && "object" != typeof this.ptr.type) { if (this.ptr instanceof r.Namespace) for (var i = this.ptr.children, o = 0, a = i.length; a > o; ++o) this.ptr = i[o], this.resolveAll(); else if (this.ptr instanceof r.Message.Field) if (n.TYPE.test(this.ptr.type)) this.ptr.type = t.TYPES[this.ptr.type]; else { if (!n.TYPEREF.test(this.ptr.type)) throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type); if (e = (this.ptr instanceof r.Message.ExtensionField ? this.ptr.extension.parent : this.ptr.parent).resolve(this.ptr.type, !0), !e) throw Error("Unresolvable type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type); if (this.ptr.resolvedType = e, e instanceof r.Enum) this.ptr.type = t.TYPES["enum"]; else { if (!(e instanceof r.Message)) throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.type); this.ptr.type = e.isGroup ? t.TYPES.group : t.TYPES.message } } else if (this.ptr instanceof t.Reflect.Enum.Value); else if (this.ptr instanceof t.Reflect.Service.Method) { if (!(this.ptr instanceof t.Reflect.Service.RPCMethod)) throw Error("Illegal service type in " + this.ptr.toString(!0)); if (e = this.ptr.parent.resolve(this.ptr.requestName), !(e && e instanceof t.Reflect.Message)) throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.requestName); if (this.ptr.resolvedRequestType = e, e = this.ptr.parent.resolve(this.ptr.responseName), !(e && e instanceof t.Reflect.Message)) throw Error("Illegal type reference in " + this.ptr.toString(!0) + ": " + this.ptr.responseName); this.ptr.resolvedResponseType = e } else if (!(this.ptr instanceof t.Reflect.Message.OneOf || this.ptr instanceof t.Reflect.Extension)) throw Error("Illegal object in namespace: " + typeof this.ptr + ":" + this.ptr); this.reset() } }, o.build = function (t) { if (this.reset(), this.resolved || (this.resolveAll(), this.resolved = !0, this.result = null), null == this.result && (this.result = this.ns.build()), t) { for (var e = t.split("."), n = this.result, r = 0; r < e.length; r++) { if (!n[e[r]]) { n = null; break } n = n[e[r]] } return n } return this.result }, o.lookup = function (t) { return t ? this.ns.resolve(t) : this.ns }, o.toString = function () { return "Builder" }, i.Message = function () { }, i.Service = function () { }, i }(n, n.Lang, n.Reflect), n.loadProto = function (t, e, r) { return ("string" == typeof e || e && "string" == typeof e.file && "string" == typeof e.root) && (r = e, e = void 0), n.loadJson(new n.DotProto.Parser(t).parse(), e, r) }, n.protoFromString = n.loadProto, n.loadProtoFile = function (t, e, r) { if (e && "object" == typeof e ? (r = e, e = null) : e && "function" == typeof e || (e = null), e) return n.Util.fetch("string" == typeof t ? t : t.root + "/" + t.file, function (i) { if (null === i) return void e(Error("Failed to fetch file")); try { e(null, n.loadProto(i, r, t)) } catch (o) { e(o) } }); var i = n.Util.fetch("object" == typeof t ? t.root + "/" + t.file : t); return null === i ? null : n.loadProto(i, r, t) }, n.protoFromFile = n.loadProtoFile, n.newBuilder = function (t) { return t = t || {}, "undefined" == typeof t.convertFieldsToCamelCase && (t.convertFieldsToCamelCase = n.convertFieldsToCamelCase), "undefined" == typeof t.populateAccessors && (t.populateAccessors = n.populateAccessors), new n.Builder(t) }, n.loadJson = function (t, e, r) { return ("string" == typeof e || e && "string" == typeof e.file && "string" == typeof e.root) && (r = e, e = null), e && "object" == typeof e || (e = n.newBuilder()), "string" == typeof t && (t = JSON.parse(t)), e["import"](t, r), e.resolveAll(), e }, n.loadJsonFile = function (t, e, r) { if (e && "object" == typeof e ? (r = e, e = null) : e && "function" == typeof e || (e = null), e) return n.Util.fetch("string" == typeof t ? t : t.root + "/" + t.file, function (i) { if (null === i) return void e(Error("Failed to fetch file")); try { e(null, n.loadJson(JSON.parse(i), r, t)) } catch (o) { e(o) } }); var i = n.Util.fetch("object" == typeof t ? t.root + "/" + t.file : t); return null === i ? null : n.loadJson(JSON.parse(i), r, t) }, n
                    } "function" == typeof e && "object" == typeof n && n && "object" == typeof r && r ? n.exports = o(e("bytebuffer")) : "function" == typeof t && t.amd ? t(["ByteBuffer"], o) : (i.dcodeIO = i.dcodeIO || {}).ProtoBuf = o(i.dcodeIO.ByteBuffer)
                }(this)
            }, { bytebuffer: 10, fs: 3, path: 4 }], 9: [function (t, e, n) { var r = t("./dist/ProtoBuf.js"); e.exports = r }, { "./dist/ProtoBuf.js": 8 }], 10: [function (e, n, r) {/**
	 * @license ByteBuffer.js (c) 2013-2014 Daniel Wirtz <dcode@dcode.io>
	 * This version of ByteBuffer.js uses an ArrayBuffer (AB) as its backing buffer and is compatible with modern browsers.
	 * Released under the Apache License, Version 2.0
	 * see: https://github.com/dcodeIO/ByteBuffer.js for details
	 */
                !function (o) {
                    "use strict"; function a(t) {
                        function e(t) { var e = 0; return function () { return e < t.length ? t.charCodeAt(e++) : null } } function n() { var t = [], e = []; return function () { return 0 === arguments.length ? e.join("") + s.apply(String, t) : (t.length + arguments.length > 1024 && (e.push(s.apply(String, t)), t.length = 0), void Array.prototype.push.apply(t, arguments)) } } var r = function (t, e, n) { if ("undefined" == typeof t && (t = r.DEFAULT_CAPACITY), "undefined" == typeof e && (e = r.DEFAULT_ENDIAN), "undefined" == typeof n && (n = r.DEFAULT_NOASSERT), !n) { if (t = 0 | t, 0 > t) throw RangeError("Illegal capacity"); e = !!e, n = !!n } this.buffer = 0 === t ? a : new ArrayBuffer(t), this.view = 0 === t ? null : new DataView(this.buffer), this.offset = 0, this.markedOffset = -1, this.limit = t, this.littleEndian = "undefined" != typeof e ? !!e : !1, this.noAssert = !!n }; r.VERSION = "3.5.4", r.LITTLE_ENDIAN = !0, r.BIG_ENDIAN = !1, r.DEFAULT_CAPACITY = 16, r.DEFAULT_ENDIAN = r.BIG_ENDIAN, r.DEFAULT_NOASSERT = !1, r.Long = t || null; var o = r.prototype, a = new ArrayBuffer(0), s = String.fromCharCode; r.allocate = function (t, e, n) { return new r(t, e, n) }, r.concat = function (t, e, n, i) { ("boolean" == typeof e || "string" != typeof e) && (i = n, n = e, e = void 0); for (var o, a = 0, s = 0, u = t.length; u > s; ++s) r.isByteBuffer(t[s]) || (t[s] = r.wrap(t[s], e)), o = t[s].limit - t[s].offset, o > 0 && (a += o); if (0 === a) return new r(0, n, i); var l, c = new r(a, n, i), f = new Uint8Array(c.buffer); for (s = 0; u > s;) l = t[s++], o = l.limit - l.offset, 0 >= o || (f.set(new Uint8Array(l.buffer).subarray(l.offset, l.limit), c.offset), c.offset += o); return c.limit = c.offset, c.offset = 0, c }, r.isByteBuffer = function (t) { return (t && t instanceof r) === !0 }, r.type = function () { return ArrayBuffer }, r.wrap = function (t, e, n, a) { if ("string" != typeof e && (a = n, n = e, e = void 0), "string" == typeof t) switch ("undefined" == typeof e && (e = "utf8"), e) { case "base64": return r.fromBase64(t, n); case "hex": return r.fromHex(t, n); case "binary": return r.fromBinary(t, n); case "utf8": return r.fromUTF8(t, n); case "debug": return r.fromDebug(t, n); default: throw Error("Unsupported encoding: " + e) } if (null === t || "object" != typeof t) throw TypeError("Illegal buffer"); var s; if (r.isByteBuffer(t)) return s = o.clone.call(t), s.markedOffset = -1, s; if (t instanceof Uint8Array) s = new r(0, n, a), t.length > 0 && (s.buffer = t.buffer, s.offset = t.byteOffset, s.limit = t.byteOffset + t.length, s.view = t.length > 0 ? new DataView(t.buffer) : null); else if (t instanceof ArrayBuffer) s = new r(0, n, a), t.byteLength > 0 && (s.buffer = t, s.offset = 0, s.limit = t.byteLength, s.view = t.byteLength > 0 ? new DataView(t) : null); else { if ("[object Array]" !== Object.prototype.toString.call(t)) throw TypeError("Illegal buffer"); for (s = new r(t.length, n, a), s.limit = t.length, i = 0; i < t.length; ++i) s.view.setUint8(i, t[i]) } return s }, o.writeInt8 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t |= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 1; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 1, this.view.setInt8(e, t), n && (this.offset += 1), this }, o.writeByte = o.writeInt8, o.readInt8 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength) } var n = this.view.getInt8(t); return e && (this.offset += 1), n }, o.readByte = o.readInt8, o.writeUint8 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 1; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 1, this.view.setUint8(e, t), n && (this.offset += 1), this }, o.readUint8 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength) } var n = this.view.getUint8(t); return e && (this.offset += 1), n }, o.writeInt16 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t |= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 2; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 2, this.view.setInt16(e, t, this.littleEndian), n && (this.offset += 2), this }, o.writeShort = o.writeInt16, o.readInt16 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 2 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+2) <= " + this.buffer.byteLength) } var n = this.view.getInt16(t, this.littleEndian); return e && (this.offset += 2), n }, o.readShort = o.readInt16, o.writeUint16 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 2; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 2, this.view.setUint16(e, t, this.littleEndian), n && (this.offset += 2), this }, o.readUint16 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 2 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+2) <= " + this.buffer.byteLength) } var n = this.view.getUint16(t, this.littleEndian); return e && (this.offset += 2), n }, o.writeInt32 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t |= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 4; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 4, this.view.setInt32(e, t, this.littleEndian), n && (this.offset += 4), this }, o.writeInt = o.writeInt32, o.readInt32 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 4 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+4) <= " + this.buffer.byteLength) } var n = this.view.getInt32(t, this.littleEndian); return e && (this.offset += 4), n }, o.readInt = o.readInt32, o.writeUint32 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 4; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 4, this.view.setUint32(e, t, this.littleEndian), n && (this.offset += 4), this }, o.readUint32 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 4 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+4) <= " + this.buffer.byteLength) } var n = this.view.getUint32(t, this.littleEndian); return e && (this.offset += 4), n }, t && (o.writeInt64 = function (e, n) { var r = "undefined" == typeof n; if (r && (n = this.offset), !this.noAssert) { if ("number" == typeof e) e = t.fromNumber(e); else if (!(e && e instanceof t)) throw TypeError("Illegal value: " + e + " (not an integer or Long)"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } "number" == typeof e && (e = t.fromNumber(e)), n += 8; var i = this.buffer.byteLength; return n > i && this.resize((i *= 2) > n ? i : n), n -= 8, this.littleEndian ? (this.view.setInt32(n, e.low, !0), this.view.setInt32(n + 4, e.high, !0)) : (this.view.setInt32(n, e.high, !1), this.view.setInt32(n + 4, e.low, !1)), r && (this.offset += 8), this }, o.writeLong = o.writeInt64, o.readInt64 = function (e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 8 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+8) <= " + this.buffer.byteLength) } var r = this.littleEndian ? new t(this.view.getInt32(e, !0), this.view.getInt32(e + 4, !0), !1) : new t(this.view.getInt32(e + 4, !1), this.view.getInt32(e, !1), !1); return n && (this.offset += 8), r }, o.readLong = o.readInt64, o.writeUint64 = function (e, n) { var r = "undefined" == typeof n; if (r && (n = this.offset), !this.noAssert) { if ("number" == typeof e) e = t.fromNumber(e); else if (!(e && e instanceof t)) throw TypeError("Illegal value: " + e + " (not an integer or Long)"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } "number" == typeof e && (e = t.fromNumber(e)), n += 8; var i = this.buffer.byteLength; return n > i && this.resize((i *= 2) > n ? i : n), n -= 8, this.littleEndian ? (this.view.setInt32(n, e.low, !0), this.view.setInt32(n + 4, e.high, !0)) : (this.view.setInt32(n, e.high, !1), this.view.setInt32(n + 4, e.low, !1)), r && (this.offset += 8), this }, o.readUint64 = function (e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 8 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+8) <= " + this.buffer.byteLength) } var r = this.littleEndian ? new t(this.view.getInt32(e, !0), this.view.getInt32(e + 4, !0), !0) : new t(this.view.getInt32(e + 4, !1), this.view.getInt32(e, !1), !0); return n && (this.offset += 8), r }), o.writeFloat32 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t) throw TypeError("Illegal value: " + t + " (not a number)"); if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 4; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 4, this.view.setFloat32(e, t, this.littleEndian), n && (this.offset += 4), this }, o.writeFloat = o.writeFloat32, o.readFloat32 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 4 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+4) <= " + this.buffer.byteLength) } var n = this.view.getFloat32(t, this.littleEndian); return e && (this.offset += 4), n }, o.readFloat = o.readFloat32, o.writeFloat64 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t) throw TypeError("Illegal value: " + t + " (not a number)"); if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } e += 8; var r = this.buffer.byteLength; return e > r && this.resize((r *= 2) > e ? r : e), e -= 8, this.view.setFloat64(e, t, this.littleEndian), n && (this.offset += 8), this }, o.writeDouble = o.writeFloat64, o.readFloat64 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 8 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+8) <= " + this.buffer.byteLength) } var n = this.view.getFloat64(t, this.littleEndian); return e && (this.offset += 8), n }, o.readDouble = o.readFloat64, r.MAX_VARINT32_BYTES = 5, r.calculateVarint32 = function (t) { return t >>>= 0, 128 > t ? 1 : 16384 > t ? 2 : 1 << 21 > t ? 3 : 1 << 28 > t ? 4 : 5 }, r.zigZagEncode32 = function (t) { return ((t |= 0) << 1 ^ t >> 31) >>> 0 }, r.zigZagDecode32 = function (t) { return t >>> 1 ^ -(1 & t) | 0 }, o.writeVarint32 = function (t, e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t |= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+0) <= " + this.buffer.byteLength) } var i, o = r.calculateVarint32(t); e += o; var a = this.buffer.byteLength; return e > a && this.resize((a *= 2) > e ? a : e), e -= o, this.view.setUint8(e, i = 128 | t), t >>>= 0, t >= 128 ? (i = t >> 7 | 128, this.view.setUint8(e + 1, i), t >= 16384 ? (i = t >> 14 | 128, this.view.setUint8(e + 2, i), t >= 1 << 21 ? (i = t >> 21 | 128, this.view.setUint8(e + 3, i), t >= 1 << 28 ? (this.view.setUint8(e + 4, t >> 28 & 15), o = 5) : (this.view.setUint8(e + 3, 127 & i), o = 4)) : (this.view.setUint8(e + 2, 127 & i), o = 3)) : (this.view.setUint8(e + 1, 127 & i), o = 2)) : (this.view.setUint8(e, 127 & i), o = 1), n ? (this.offset += o, this) : o }, o.writeVarint32ZigZag = function (t, e) { return this.writeVarint32(r.zigZagEncode32(t), e) }, o.readVarint32 = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength) } var n, r, i = 0, o = 0; do { if (r = t + i, !this.noAssert && r > this.limit) { var a = Error("Truncated"); throw a.truncated = !0, a } n = this.view.getUint8(r), 5 > i && (o |= (127 & n) << 7 * i >>> 0), ++i } while (128 === (128 & n)); return o = 0 | o, e ? (this.offset += i, o) : { value: o, length: i } }, o.readVarint32ZigZag = function (t) { var e = this.readVarint32(t); return "object" == typeof e ? e.value = r.zigZagDecode32(e.value) : e = r.zigZagDecode32(e), e }, t && (r.MAX_VARINT64_BYTES = 10, r.calculateVarint64 = function (e) { "number" == typeof e && (e = t.fromNumber(e)); var n = e.toInt() >>> 0, r = e.shiftRightUnsigned(28).toInt() >>> 0, i = e.shiftRightUnsigned(56).toInt() >>> 0; return 0 == i ? 0 == r ? 16384 > n ? 128 > n ? 1 : 2 : 1 << 21 > n ? 3 : 4 : 16384 > r ? 128 > r ? 5 : 6 : 1 << 21 > r ? 7 : 8 : 128 > i ? 9 : 10 }, r.zigZagEncode64 = function (e) { return "number" == typeof e ? e = t.fromNumber(e, !1) : e.unsigned !== !1 && (e = e.toSigned()), e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned() }, r.zigZagDecode64 = function (e) { return "number" == typeof e ? e = t.fromNumber(e, !1) : e.unsigned !== !1 && (e = e.toSigned()), e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned() }, o.writeVarint64 = function (e, n) { var i = "undefined" == typeof n; if (i && (n = this.offset), !this.noAssert) { if ("number" == typeof e) e = t.fromNumber(e); else if (!(e && e instanceof t)) throw TypeError("Illegal value: " + e + " (not an integer or Long)"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } "number" == typeof e ? e = t.fromNumber(e, !1) : e.unsigned !== !1 && (e = e.toSigned()); var o = r.calculateVarint64(e), a = e.toInt() >>> 0, s = e.shiftRightUnsigned(28).toInt() >>> 0, u = e.shiftRightUnsigned(56).toInt() >>> 0; n += o; var l = this.buffer.byteLength; switch (n > l && this.resize((l *= 2) > n ? l : n), n -= o, o) { case 10: this.view.setUint8(n + 9, u >>> 7 & 1); case 9: this.view.setUint8(n + 8, 9 !== o ? 128 | u : 127 & u); case 8: this.view.setUint8(n + 7, 8 !== o ? s >>> 21 | 128 : s >>> 21 & 127); case 7: this.view.setUint8(n + 6, 7 !== o ? s >>> 14 | 128 : s >>> 14 & 127); case 6: this.view.setUint8(n + 5, 6 !== o ? s >>> 7 | 128 : s >>> 7 & 127); case 5: this.view.setUint8(n + 4, 5 !== o ? 128 | s : 127 & s); case 4: this.view.setUint8(n + 3, 4 !== o ? a >>> 21 | 128 : a >>> 21 & 127); case 3: this.view.setUint8(n + 2, 3 !== o ? a >>> 14 | 128 : a >>> 14 & 127); case 2: this.view.setUint8(n + 1, 2 !== o ? a >>> 7 | 128 : a >>> 7 & 127); case 1: this.view.setUint8(n, 1 !== o ? 128 | a : 127 & a) } return i ? (this.offset += o, this) : o }, o.writeVarint64ZigZag = function (t, e) { return this.writeVarint64(r.zigZagEncode64(t), e) }, o.readVarint64 = function (e) { var n = "undefined" == typeof e; if (n && (e = this.offset), !this.noAssert) { if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: " + e + " (not an integer)"); if (e >>>= 0, 0 > e || e + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + e + " (+1) <= " + this.buffer.byteLength) } var r = e, i = 0, o = 0, a = 0, s = 0; if (s = this.view.getUint8(e++), i = 127 & s, 128 & s && (s = this.view.getUint8(e++), i |= (127 & s) << 7, 128 & s && (s = this.view.getUint8(e++), i |= (127 & s) << 14, 128 & s && (s = this.view.getUint8(e++), i |= (127 & s) << 21, 128 & s && (s = this.view.getUint8(e++), o = 127 & s, 128 & s && (s = this.view.getUint8(e++), o |= (127 & s) << 7, 128 & s && (s = this.view.getUint8(e++), o |= (127 & s) << 14, 128 & s && (s = this.view.getUint8(e++), o |= (127 & s) << 21, 128 & s && (s = this.view.getUint8(e++), a = 127 & s, 128 & s && (s = this.view.getUint8(e++), a |= (127 & s) << 7, 128 & s)))))))))) throw Error("Buffer overrun"); var u = t.fromBits(i | o << 28, o >>> 4 | a << 24, !1); return n ? (this.offset = e, u) : { value: u, length: e - r } }, o.readVarint64ZigZag = function (e) { var n = this.readVarint64(e); return n && n.value instanceof t ? n.value = r.zigZagDecode64(n.value) : n = r.zigZagDecode64(n), n }), o.writeCString = function (t, n) { var r = "undefined" == typeof n; r && (n = this.offset); var i, o = t.length; if (!this.noAssert) { if ("string" != typeof t) throw TypeError("Illegal str: Not a string"); for (i = 0; o > i; ++i) if (0 === t.charCodeAt(i)) throw RangeError("Illegal str: Contains NULL-characters"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } var a = n; o = l.calculateUTF16asUTF8(e(t))[1], n += o + 1; var s = this.buffer.byteLength; return n > s && this.resize((s *= 2) > n ? s : n), n -= o + 1, l.encodeUTF16toUTF8(e(t), function (t) { this.view.setUint8(n++, t) }.bind(this)), this.view.setUint8(n++, 0), r ? (this.offset = n - a, this) : o }, o.readCString = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength) } var r, i = t, o = -1; return l.decodeUTF8toUTF16(function () { if (0 === o) return null; if (t >= this.limit) throw RangeError("Illegal range: Truncated data, " + t + " < " + this.limit); return 0 === (o = this.view.getUint8(t++)) ? null : o }.bind(this), r = n(), !0), e ? (this.offset = t, r()) : { string: r(), length: t - i } }, o.writeIString = function (t, n) { var r = "undefined" == typeof n; if (r && (n = this.offset), !this.noAssert) { if ("string" != typeof t) throw TypeError("Illegal str: Not a string"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } var i, o = n; i = l.calculateUTF16asUTF8(e(t), this.noAssert)[1], n += 4 + i; var a = this.buffer.byteLength; if (n > a && this.resize((a *= 2) > n ? a : n), n -= 4 + i, this.view.setUint32(n, i, this.littleEndian), n += 4, l.encodeUTF16toUTF8(e(t), function (t) { this.view.setUint8(n++, t) }.bind(this)), n !== o + 4 + i) throw RangeError("Illegal range: Truncated data, " + n + " == " + (n + 4 + i)); return r ? (this.offset = n, this) : n - o }, o.readIString = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 4 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+4) <= " + this.buffer.byteLength) } var r, i = 0, o = t; i = this.view.getUint32(t, this.littleEndian), t += 4; var a, s = t + i; return l.decodeUTF8toUTF16(function () { return s > t ? this.view.getUint8(t++) : null }.bind(this), a = n(), this.noAssert), r = a(), e ? (this.offset = t, r) : { string: r, length: t - o } }, r.METRICS_CHARS = "c", r.METRICS_BYTES = "b", o.writeUTF8String = function (t, n) { var r = "undefined" == typeof n; if (r && (n = this.offset), !this.noAssert) { if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } var i, o = n; i = l.calculateUTF16asUTF8(e(t))[1], n += i; var a = this.buffer.byteLength; return n > a && this.resize((a *= 2) > n ? a : n), n -= i, l.encodeUTF16toUTF8(e(t), function (t) { this.view.setUint8(n++, t) }.bind(this)), r ? (this.offset = n, this) : n - o }, o.writeString = o.writeUTF8String, r.calculateUTF8Chars = function (t) { return l.calculateUTF16asUTF8(e(t))[0] }, r.calculateUTF8Bytes = function (t) { return l.calculateUTF16asUTF8(e(t))[1] }, o.readUTF8String = function (t, e, i) { "number" == typeof e && (i = e, e = void 0); var o = "undefined" == typeof i; if (o && (i = this.offset), "undefined" == typeof e && (e = r.METRICS_CHARS), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal length: " + t + " (not an integer)"); if (t |= 0, "number" != typeof i || i % 1 !== 0) throw TypeError("Illegal offset: " + i + " (not an integer)"); if (i >>>= 0, 0 > i || i + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + i + " (+0) <= " + this.buffer.byteLength) } var a, s = 0, u = i; if (e === r.METRICS_CHARS) { if (a = n(), l.decodeUTF8(function () { return t > s && i < this.limit ? this.view.getUint8(i++) : null }.bind(this), function (t) { ++s, l.UTF8toUTF16(t, a) }.bind(this)), s !== t) throw RangeError("Illegal range: Truncated data, " + s + " == " + t); return o ? (this.offset = i, a()) : { string: a(), length: i - u } } if (e === r.METRICS_BYTES) { if (!this.noAssert) { if ("number" != typeof i || i % 1 !== 0) throw TypeError("Illegal offset: " + i + " (not an integer)"); if (i >>>= 0, 0 > i || i + t > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + i + " (+" + t + ") <= " + this.buffer.byteLength) } var c = i + t; if (l.decodeUTF8toUTF16(function () { return c > i ? this.view.getUint8(i++) : null }.bind(this), a = n(), this.noAssert), i !== c) throw RangeError("Illegal range: Truncated data, " + i + " == " + c); return o ? (this.offset = i, a()) : { string: a(), length: i - u } } throw TypeError("Unsupported metrics: " + e) }, o.readString = o.readUTF8String, o.writeVString = function (t, n) { var i = "undefined" == typeof n; if (i && (n = this.offset), !this.noAssert) { if ("string" != typeof t) throw TypeError("Illegal str: Not a string"); if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } var o, a, s = n; o = l.calculateUTF16asUTF8(e(t), this.noAssert)[1], a = r.calculateVarint32(o), n += a + o; var u = this.buffer.byteLength; if (n > u && this.resize((u *= 2) > n ? u : n), n -= a + o, n += this.writeVarint32(o, n), l.encodeUTF16toUTF8(e(t), function (t) { this.view.setUint8(n++, t) }.bind(this)), n !== s + o + a) throw RangeError("Illegal range: Truncated data, " + n + " == " + (n + o + a)); return i ? (this.offset = n, this) : n - s }, o.readVString = function (t) { var e = "undefined" == typeof t; if (e && (t = this.offset), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 1 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+1) <= " + this.buffer.byteLength) } var r, i = this.readVarint32(t), o = t; t += i.length, i = i.value; var a = t + i, s = n(); return l.decodeUTF8toUTF16(function () { return a > t ? this.view.getUint8(t++) : null }.bind(this), s, this.noAssert), r = s(), e ? (this.offset = t, r) : { string: r, length: t - o } }, o.append = function (t, e, n) { ("number" == typeof e || "string" != typeof e) && (n = e, e = void 0); var i = "undefined" == typeof n; if (i && (n = this.offset), !this.noAssert) { if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } t instanceof r || (t = r.wrap(t, e)); var o = t.limit - t.offset; if (0 >= o) return this; n += o; var a = this.buffer.byteLength; return n > a && this.resize((a *= 2) > n ? a : n), n -= o, new Uint8Array(this.buffer, n).set(new Uint8Array(t.buffer).subarray(t.offset, t.limit)), t.offset += o, i && (this.offset += o), this }, o.appendTo = function (t, e) { return t.append(this, e), this }, o.assert = function (t) { return this.noAssert = !t, this }, o.capacity = function () { return this.buffer.byteLength }, o.clear = function () { return this.offset = 0, this.limit = this.buffer.byteLength, this.markedOffset = -1, this }, o.clone = function (t) { var e = new r(0, this.littleEndian, this.noAssert); if (t) { var n = new ArrayBuffer(this.buffer.byteLength); new Uint8Array(n).set(this.buffer), e.buffer = n, e.view = new DataView(n) } else e.buffer = this.buffer, e.view = this.view; return e.offset = this.offset, e.markedOffset = this.markedOffset, e.limit = this.limit, e }, o.compact = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } if (0 === t && e === this.buffer.byteLength) return this; var n = e - t; if (0 === n) return this.buffer = a, this.view = null, this.markedOffset >= 0 && (this.markedOffset -= t), this.offset = 0, this.limit = 0, this; var r = new ArrayBuffer(n); return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t, e)), this.buffer = r, this.view = new DataView(r), this.markedOffset >= 0 && (this.markedOffset -= t), this.offset = 0, this.limit = n, this }, o.copy = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } if (t === e) return new r(0, this.littleEndian, this.noAssert); var n = e - t, i = new r(n, this.littleEndian, this.noAssert); return i.offset = 0, i.limit = n, i.markedOffset >= 0 && (i.markedOffset -= t), this.copyTo(i, 0, t, e), i }, o.copyTo = function (t, e, n, i) { var o, a; if (!this.noAssert && !r.isByteBuffer(t)) throw TypeError("Illegal target: Not a ByteBuffer"); if (e = (a = "undefined" == typeof e) ? t.offset : 0 | e, n = (o = "undefined" == typeof n) ? this.offset : 0 | n, i = "undefined" == typeof i ? this.limit : 0 | i, 0 > e || e > t.buffer.byteLength) throw RangeError("Illegal target range: 0 <= " + e + " <= " + t.buffer.byteLength); if (0 > n || i > this.buffer.byteLength) throw RangeError("Illegal source range: 0 <= " + n + " <= " + this.buffer.byteLength); var s = i - n; return 0 === s ? t : (t.ensureCapacity(e + s), new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(n, i), e), o && (this.offset += s), a && (t.offset += s), this) }, o.ensureCapacity = function (t) { var e = this.buffer.byteLength; return t > e ? this.resize((e *= 2) > t ? e : t) : this }, o.fill = function (t, e, n) { var r = "undefined" == typeof e; if (r && (e = this.offset), "string" == typeof t && t.length > 0 && (t = t.charCodeAt(0)), "undefined" == typeof e && (e = this.offset), "undefined" == typeof n && (n = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal value: " + t + " (not an integer)"); if (t |= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (e >>>= 0, "number" != typeof n || n % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (n >>>= 0, 0 > e || e > n || n > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + e + " <= " + n + " <= " + this.buffer.byteLength) } if (e >= n) return this; for (; n > e;) this.view.setUint8(e++, t); return r && (this.offset = e), this }, o.flip = function () { return this.limit = this.offset, this.offset = 0, this }, o.mark = function (t) { if (t = "undefined" == typeof t ? this.offset : t, !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal offset: " + t + " (not an integer)"); if (t >>>= 0, 0 > t || t + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + t + " (+0) <= " + this.buffer.byteLength) } return this.markedOffset = t, this }, o.order = function (t) { if (!this.noAssert && "boolean" != typeof t) throw TypeError("Illegal littleEndian: Not a boolean"); return this.littleEndian = !!t, this }, o.LE = function (t) { return this.littleEndian = "undefined" != typeof t ? !!t : !0, this }, o.BE = function (t) { return this.littleEndian = "undefined" != typeof t ? !t : !1, this }, o.prepend = function (t, e, n) { ("number" == typeof e || "string" != typeof e) && (n = e, e = void 0); var i = "undefined" == typeof n; if (i && (n = this.offset), !this.noAssert) { if ("number" != typeof n || n % 1 !== 0) throw TypeError("Illegal offset: " + n + " (not an integer)"); if (n >>>= 0, 0 > n || n + 0 > this.buffer.byteLength) throw RangeError("Illegal offset: 0 <= " + n + " (+0) <= " + this.buffer.byteLength) } t instanceof r || (t = r.wrap(t, e)); var o = t.limit - t.offset; if (0 >= o) return this; var a, s = o - n; if (s > 0) { var u = new ArrayBuffer(this.buffer.byteLength + s); a = new Uint8Array(u), a.set(new Uint8Array(this.buffer).subarray(n, this.buffer.byteLength), o), this.buffer = u, this.view = new DataView(u), this.offset += s, this.markedOffset >= 0 && (this.markedOffset += s), this.limit += s, n += s } else a = new Uint8Array(this.buffer); return a.set(new Uint8Array(t.buffer).subarray(t.offset, t.limit), n - o), t.offset = t.limit, i && (this.offset -= o), this }, o.prependTo = function (t, e) { return t.prepend(this, e), this }, o.printDebug = function (t) { "function" != typeof t && (t = console.log.bind(console)), t(this.toString() + "\n-------------------------------------------------------------------\n" + this.toDebug(!0)) }, o.remaining = function () { return this.limit - this.offset }, o.reset = function () { return this.markedOffset >= 0 ? (this.offset = this.markedOffset, this.markedOffset = -1) : this.offset = 0, this }, o.resize = function (t) { if (!this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal capacity: " + t + " (not an integer)"); if (t |= 0, 0 > t) throw RangeError("Illegal capacity: 0 <= " + t) } if (this.buffer.byteLength < t) { var e = new ArrayBuffer(t); new Uint8Array(e).set(new Uint8Array(this.buffer)), this.buffer = e, this.view = new DataView(e) } return this }, o.reverse = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } return t === e ? this : (Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t, e)), this.view = new DataView(this.buffer), this) }, o.skip = function (t) { if (!this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal length: " + t + " (not an integer)"); t |= 0 } var e = this.offset + t; if (!this.noAssert && (0 > e || e > this.buffer.byteLength)) throw RangeError("Illegal length: 0 <= " + this.offset + " + " + t + " <= " + this.buffer.byteLength); return this.offset = e, this }, o.slice = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } var n = this.clone(); return n.offset = t, n.limit = e, n }, o.toBuffer = function (t) { var e = this.offset, n = this.limit; if (e > n) { var r = e; e = n, n = r } if (!this.noAssert) { if ("number" != typeof e || e % 1 !== 0) throw TypeError("Illegal offset: Not an integer"); if (e >>>= 0, "number" != typeof n || n % 1 !== 0) throw TypeError("Illegal limit: Not an integer"); if (n >>>= 0, 0 > e || e > n || n > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + e + " <= " + n + " <= " + this.buffer.byteLength) } if (!t && 0 === e && n === this.buffer.byteLength) return this.buffer; if (e === n) return a; var i = new ArrayBuffer(n - e); return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e, n), 0), i }, o.toArrayBuffer = o.toBuffer, o.toString = function (t, e, n) {
                            if ("undefined" == typeof t) return "ByteBufferAB(offset=" + this.offset + ",markedOffset=" + this.markedOffset + ",limit=" + this.limit + ",capacity=" + this.capacity() + ")";

                            switch ("number" == typeof t && (t = "utf8", e = t, n = e), t) { case "utf8": return this.toUTF8(e, n); case "base64": return this.toBase64(e, n); case "hex": return this.toHex(e, n); case "binary": return this.toBinary(e, n); case "debug": return this.toDebug(); case "columns": return this.toColumns(); default: throw Error("Unsupported encoding: " + t) }
                        }; var u = function () { for (var t = {}, e = [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 43, 47], n = [], r = 0, i = e.length; i > r; ++r) n[e[r]] = r; return t.encode = function (t, n) { for (var r, i; null !== (r = t()) ;) n(e[r >> 2 & 63]), i = (3 & r) << 4, null !== (r = t()) ? (i |= r >> 4 & 15, n(e[63 & (i | r >> 4 & 15)]), i = (15 & r) << 2, null !== (r = t()) ? (n(e[63 & (i | r >> 6 & 3)]), n(e[63 & r])) : (n(e[63 & i]), n(61))) : (n(e[63 & i]), n(61), n(61)) }, t.decode = function (t, e) { function r(t) { throw Error("Illegal character code: " + t) } for (var i, o, a; null !== (i = t()) ;) if (o = n[i], "undefined" == typeof o && r(i), null !== (i = t()) && (a = n[i], "undefined" == typeof a && r(i), e(o << 2 >>> 0 | (48 & a) >> 4), null !== (i = t()))) { if (o = n[i], "undefined" == typeof o) { if (61 === i) break; r(i) } if (e((15 & a) << 4 >>> 0 | (60 & o) >> 2), null !== (i = t())) { if (a = n[i], "undefined" == typeof a) { if (61 === i) break; r(i) } e((3 & o) << 6 >>> 0 | a) } } }, t.test = function (t) { return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t) }, t }(); o.toBase64 = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } var r; return u.encode(function () { return e > t ? this.view.getUint8(t++) : null }.bind(this), r = n()), r() }, r.fromBase64 = function (t, n, i) { if (!i) { if ("string" != typeof t) throw TypeError("Illegal str: Not a string"); if (t.length % 4 !== 0) throw TypeError("Illegal str: Length not a multiple of 4") } var o = new r(t.length / 4 * 3, n, i), a = 0; return u.decode(e(t), function (t) { o.view.setUint8(a++, t) }), o.limit = a, o }, r.btoa = function (t) { return r.fromBinary(t).toBase64() }, r.atob = function (t) { return r.fromBase64(t).toBinary() }, o.toBinary = function (t, e) { if (t = "undefined" == typeof t ? this.offset : t, e = "undefined" == typeof e ? this.limit : e, !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } if (t === e) return ""; for (var n = [], r = []; e > t;) n.push(this.view.getUint8(t++)), n.length >= 1024 && (r.push(String.fromCharCode.apply(String, n)), n = []); return r.join("") + String.fromCharCode.apply(String, n) }, r.fromBinary = function (t, e, n) { if (!n && "string" != typeof t) throw TypeError("Illegal str: Not a string"); for (var i, o = 0, a = t.length, s = new r(a, e, n) ; a > o;) { if (i = t.charCodeAt(o), !n && i > 255) throw RangeError("Illegal charCode at " + o + ": 0 <= " + i + " <= 255"); s.view.setUint8(o++, i) } return s.limit = a, s }, o.toDebug = function (t) { for (var e, n = -1, r = this.buffer.byteLength, i = "", o = "", a = ""; r > n;) { if (-1 !== n && (e = this.view.getUint8(n), i += 16 > e ? "0" + e.toString(16).toUpperCase() : e.toString(16).toUpperCase(), t && (o += e > 32 && 127 > e ? String.fromCharCode(e) : ".")), ++n, t && n > 0 && n % 16 === 0 && n !== r) { for (; i.length < 51;) i += " "; a += i + o + "\n", i = o = "" } i += n === this.offset && n === this.limit ? n === this.markedOffset ? "!" : "|" : n === this.offset ? n === this.markedOffset ? "[" : "<" : n === this.limit ? n === this.markedOffset ? "]" : ">" : n === this.markedOffset ? "'" : t || 0 !== n && n !== r ? " " : "" } if (t && " " !== i) { for (; i.length < 51;) i += " "; a += i + o + "\n" } return t ? a : i }, r.fromDebug = function (t, e, n) { for (var i, o, a = t.length, s = new r((a + 1) / 3 | 0, e, n), u = 0, l = 0, c = !1, f = !1, h = !1, d = !1, p = !1; a > u;) { switch (i = t.charAt(u++)) { case "!": if (!n) { if (f || h || d) { p = !0; break } f = h = d = !0 } s.offset = s.markedOffset = s.limit = l, c = !1; break; case "|": if (!n) { if (f || d) { p = !0; break } f = d = !0 } s.offset = s.limit = l, c = !1; break; case "[": if (!n) { if (f || h) { p = !0; break } f = h = !0 } s.offset = s.markedOffset = l, c = !1; break; case "<": if (!n) { if (f) { p = !0; break } f = !0 } s.offset = l, c = !1; break; case "]": if (!n) { if (d || h) { p = !0; break } d = h = !0 } s.limit = s.markedOffset = l, c = !1; break; case ">": if (!n) { if (d) { p = !0; break } d = !0 } s.limit = l, c = !1; break; case "'": if (!n) { if (h) { p = !0; break } h = !0 } s.markedOffset = l, c = !1; break; case " ": c = !1; break; default: if (!n && c) { p = !0; break } if (o = parseInt(i + t.charAt(u++), 16), !n && (isNaN(o) || 0 > o || o > 255)) throw TypeError("Illegal str: Not a debug encoded string"); s.view.setUint8(l++, o), c = !0 } if (p) throw TypeError("Illegal str: Invalid symbol at " + u) } if (!n) { if (!f || !d) throw TypeError("Illegal str: Missing offset or limit"); if (l < s.buffer.byteLength) throw TypeError("Illegal str: Not a debug encoded string (is it hex?) " + l + " < " + a) } return s }, o.toHex = function (t, e) { if (t = "undefined" == typeof t ? this.offset : t, e = "undefined" == typeof e ? this.limit : e, !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } for (var n, r = new Array(e - t) ; e > t;) n = this.view.getUint8(t++), 16 > n ? r.push("0", n.toString(16)) : r.push(n.toString(16)); return r.join("") }, r.fromHex = function (t, e, n) { if (!n) { if ("string" != typeof t) throw TypeError("Illegal str: Not a string"); if (t.length % 2 !== 0) throw TypeError("Illegal str: Length not a multiple of 2") } for (var i, o = t.length, a = new r(o / 2 | 0, e), s = 0, u = 0; o > s; s += 2) { if (i = parseInt(t.substring(s, s + 2), 16), !n && (!isFinite(i) || 0 > i || i > 255)) throw TypeError("Illegal str: Contains non-hex characters"); a.view.setUint8(u++, i) } return a.limit = u, a }; var l = function () { var t = {}; return t.MAX_CODEPOINT = 1114111, t.encodeUTF8 = function (t, e) { var n = null; for ("number" == typeof t && (n = t, t = function () { return null }) ; null !== n || null !== (n = t()) ;) 128 > n ? e(127 & n) : 2048 > n ? (e(n >> 6 & 31 | 192), e(63 & n | 128)) : 65536 > n ? (e(n >> 12 & 15 | 224), e(n >> 6 & 63 | 128), e(63 & n | 128)) : (e(n >> 18 & 7 | 240), e(n >> 12 & 63 | 128), e(n >> 6 & 63 | 128), e(63 & n | 128)), n = null }, t.decodeUTF8 = function (t, e) { for (var n, r, i, o, a = function (t) { t = t.slice(0, t.indexOf(null)); var e = Error(t.toString()); throw e.name = "TruncatedError", e.bytes = t, e }; null !== (n = t()) ;) if (0 === (128 & n)) e(n); else if (192 === (224 & n)) null === (r = t()) && a([n, r]), e((31 & n) << 6 | 63 & r); else if (224 === (240 & n)) (null === (r = t()) || null === (i = t())) && a([n, r, i]), e((15 & n) << 12 | (63 & r) << 6 | 63 & i); else { if (240 !== (248 & n)) throw RangeError("Illegal starting byte: " + n); (null === (r = t()) || null === (i = t()) || null === (o = t())) && a([n, r, i, o]), e((7 & n) << 18 | (63 & r) << 12 | (63 & i) << 6 | 63 & o) } }, t.UTF16toUTF8 = function (t, e) { for (var n, r = null; ;) { if (null === (n = null !== r ? r : t())) break; n >= 55296 && 57343 >= n && null !== (r = t()) && r >= 56320 && 57343 >= r ? (e(1024 * (n - 55296) + r - 56320 + 65536), r = null) : e(n) } null !== r && e(r) }, t.UTF8toUTF16 = function (t, e) { var n = null; for ("number" == typeof t && (n = t, t = function () { return null }) ; null !== n || null !== (n = t()) ;) 65535 >= n ? e(n) : (n -= 65536, e((n >> 10) + 55296), e(n % 1024 + 56320)), n = null }, t.encodeUTF16toUTF8 = function (e, n) { t.UTF16toUTF8(e, function (e) { t.encodeUTF8(e, n) }) }, t.decodeUTF8toUTF16 = function (e, n) { t.decodeUTF8(e, function (e) { t.UTF8toUTF16(e, n) }) }, t.calculateCodePoint = function (t) { return 128 > t ? 1 : 2048 > t ? 2 : 65536 > t ? 3 : 4 }, t.calculateUTF8 = function (e) { for (var n, r = 0; null !== (n = e()) ;) r += t.calculateCodePoint(n); return r }, t.calculateUTF16asUTF8 = function (e) { var n = 0, r = 0; return t.UTF16toUTF8(e, function (e) { ++n, r += t.calculateCodePoint(e) }), [n, r] }, t }(); return o.toUTF8 = function (t, e) { if ("undefined" == typeof t && (t = this.offset), "undefined" == typeof e && (e = this.limit), !this.noAssert) { if ("number" != typeof t || t % 1 !== 0) throw TypeError("Illegal begin: Not an integer"); if (t >>>= 0, "number" != typeof e || e % 1 !== 0) throw TypeError("Illegal end: Not an integer"); if (e >>>= 0, 0 > t || t > e || e > this.buffer.byteLength) throw RangeError("Illegal range: 0 <= " + t + " <= " + e + " <= " + this.buffer.byteLength) } var r; try { l.decodeUTF8toUTF16(function () { return e > t ? this.view.getUint8(t++) : null }.bind(this), r = n()) } catch (i) { if (t !== e) throw RangeError("Illegal range: Truncated data, " + t + " != " + e) } return r() }, r.fromUTF8 = function (t, n, i) { if (!i && "string" != typeof t) throw TypeError("Illegal str: Not a string"); var o = new r(l.calculateUTF16asUTF8(e(t), !0)[1], n, i), a = 0; return l.encodeUTF16toUTF8(e(t), function (t) { o.view.setUint8(a++, t) }), o.limit = a, o }, r
                    } "function" == typeof e && "object" == typeof n && n && "object" == typeof r && r ? n.exports = function () { var t; try { t = e("long") } catch (n) { } return a(t) }() : "function" == typeof t && t.amd ? t("ByteBuffer", ["Long"], function (t) { return a(t) }) : (o.dcodeIO = o.dcodeIO || {}).ByteBuffer = a(o.dcodeIO.Long)
                }(this)
            }, { "long": 7 }], 11: [function (t, e, n) { "use strict"; function r(t, e) { function n() { return k + 1 } function r() { return k } function s(t, e, n) { return n ? n.map(function (n) { var r = n.x < 0 ? e[0] - t : e[2] + t, i = n.y < 0 ? e[1] - t : e[3] + t; return { x: r, y: i } }) : null } function l(t, e, n, r) { return n ? s(t, e, n).map(function (t) { return t.area = r, t }) : null } function c(t) { var e = !t || !t.length; return e ? (0 > D && (A.push(l(n(), Y, u, P)), D = A.length - 1), [S.length + D]) : p(t, !0) } function f(t) { return p(t, !1) } function h(t) { return t[0] } function d(t) { return t[t.length - 1] } function p(t, e) { for (var i, o, s, u, l, c, f, p, v = e ? n() : r(), _ = [], b = 0; b < t.length; b++) u = a.side(t[b].entrySide), o = b > 0 ? a.side(t[b - 1].exitSide) : void 0, u && o ? (c = t[b - 1], f = t[b], s = m(d(c.arcs), !1, o), l = m(h(f.arcs), !0, u), p = c[4] === !0, i = g(o, u, e, p), _.push(y(s, o, l, u, i, v)), _.push.apply(_, f.arcs)) : _.push.apply(_, t[b].arcs); return t.length > 0 && d(t).exitSide && (f = h(t), c = d(t), u = a.side(f.entrySide), l = m(h(f.arcs), !0, u), o = a.side(c.exitSide), s = m(d(c.arcs), !1, o), p = c[4] === !0, i = g(o, u, e, p), _.push(y(s, o, l, u, i, v))), _ } function g(t, e, n, r) { var i, o, s = t, u = []; do { if (!r && s === e) break; i = n ? a.nextClockwise(s) : a.nextCounterClockwise(s), o = n ? a.nextCornerClockwise(s) : a.nextCornerCounterClockwise(s), u.push(o), s = i } while (s !== e); return u } function m(t, e, n) { var r, i = 0 > t ? ~t : t, o = S[i]; return 0 > t && (e = !e), r = o[e ? 0 : o.length - 1], { x: r[0], y: r[1], area: P } } function y(t, e, n, r, i, o) { function s(t, e, n) { switch (e) { case a.EAST: t.x = t.x + n; break; case a.SOUTH: t.y = t.y - n; break; case a.WEST: t.x = t.x - n; break; case a.NORTH: t.y = t.y + n } } var u = l(o, Y, i, P), c = { x: t.x, y: t.y, area: t.area }, f = [c]; c = { x: t.x, y: t.y, area: t.area }, s(c, e, o), f.push(c), c = { x: n.x, y: n.y, area: n.area }, s(c, r, o); var h = [c]; c = { x: n.x, y: n.y, area: n.area }, h.push(c); var d = f.concat(u).concat(h), p = S.length + A.push(d) - 1; return p } function v(t, e) { e.coordinates = t.coordinates } function _(t, e) { e.coordinates = t.coordinates } function b(t, e) { t.pieces.length > 1 ? (e.type = "MultiLineString", e.arcs = t.pieces.map(function (t) { return t.arcs })) : e.arcs = t.pieces[0].arcs } function w(t, e) { var n = []; t.lines.forEach(function (t) { n.push.apply(n, t.pieces.map(function (t) { return t.arcs })) }), e.arcs = n } function x(t) { var e = t.components.map(function (t) { var e = [c(t.shell)]; return t.holes && (e = e.concat(t.holes.map(f))), e }); return e } function M(t, e) { t.components.length > 1 && (e.type = "MultiPolygon"), e.arcs = x(t), 1 === t.components.length && (e.arcs = e.arcs[0]) } function T(t, e) { e.arcs = t.polygons.map(function (t) { return x(t) }).reduce(function (t, e) { return t.concat(e) }) } function E(t, e) { e.geometries = t.geometries.map(function (t) { return L(t) }) } function L(t) { var e = { id: t.id, properties: t.properties, type: t.type }; void 0 === t.id && delete e.id, void 0 === t.properties && delete e.properties; var n = { Point: v, MultiPoint: _, LineString: b, MultiLineString: w, Polygon: M, MultiPolygon: T, GeometryCollection: E }, r = n[t.type]; return void 0 !== r && r(t, e), e } var S, k, Y, A = [], D = -1, C = .04, I = !1, N = !1, P = 999; return function (t, e) { "number" == typeof t.q && (t.q = [1 << t.q, 1 << t.q]); var n = { type: "Topology", q: [t.q[0], t.q[1]], transform: t.transform }; e && (void 0 !== e.padPercent && e.padPercent >= 0 && e.padPercent <= 1 && (C = e.padPercent), void 0 !== e.serializeAreas && (I = Boolean(e.serializeAreas)), void 0 !== e.invertY && (N = Boolean(e.invertY))), k = Math.round(C * Math.max(n.q[0], n.q[1])), Y = [0, 0, n.q[0], n.q[1]], n.objects = {}, o(t.arcs), S = n.arcs = t.arcs; for (var r in t.layers) { var a = t.layers[r], s = a.map(L); n.objects[r] = { type: "GeometryCollection", geometries: s } } if (S.push.apply(S, A.map(function (t) { return t.map(function (t) { var e = [t.x, t.y]; return I && void 0 !== t.area && e.push(t.area), e }) })), i(S), N) { var u = n.q[1] - 1; n.arcs = S.map(function (t) { return t.map(function (t, e) { return t = t.slice(), t.length >= 2 && (0 === e ? t[1] = u - t[1] : t[1] = -t[1]), t }) }) } return n }(t, e) } var i = t("./delta-encode"), o = t("./delta-decode"), a = t("./side"), s = t("./corner"), u = [s.SOUTHWEST, s.NORTHWEST, s.NORTHEAST, s.SOUTHEAST, s.SOUTHWEST]; e.exports = r }, { "./corner": 12, "./delta-decode": 13, "./delta-encode": 14, "./side": 16 }], 12: [function (t, e, n) { "use strict"; var r = {}; r.NORTHWEST = { x: -1, y: 1 }, r.NORTHEAST = { x: 1, y: 1 }, r.SOUTHEAST = { x: 1, y: -1 }, r.SOUTHWEST = { x: -1, y: -1 }, e.exports = r }, {}], 13: [function (t, e, n) { "use strict"; function r(t) { for (var e = 0; e < t.length; e++) for (var n = t[e], r = 0, i = 0, o = 0; o < n.length; o++) { var a = n[o]; a[0] = r += a[0], a[1] = i += a[1] } return t } e.exports = r }, {}], 14: [function (t, e, n) { "use strict"; function r(t) { for (var e = 0; e < t.length; e++) for (var n = t[e], r = 0, i = 0, o = 0; o < n.length; o++) { var a = n[o], s = a[0], u = a[1]; a[0] = s - r, a[1] = u - i, r = s, i = u } return t } e.exports = r }, {}], 15: [function (t, e, n) { "use strict"; function r(t) { this._proton = w.decode(t) } function i(t) { switch (t) { case b.CoordinatesProto.LayoutProto.XY: return 2; case b.CoordinatesProto.LayoutProto.XYZ: return 3; case b.CoordinatesProto.LayoutProto.XYA: return 3; case b.CoordinatesProto.LayoutProto.XYZA: return 4 } } function o(t) { var e = 0, n = 0, r = 0; return t.map(function (t) { var i = t[0], o = t[1], a = t[2]; return e += i, n += o, r += a, -1 === r ? [e, n] : [e, n, 0 > r ? r + 1 : r] }) } function a(t) { var e = 0, n = 0, r = 0; return t.map(function (t) { var i, o = t[0], a = t[1], s = t[2], u = o - e, l = a - n; return e = o, n = a, void 0 !== s ? (i = s - r, r = s, [u, l, i]) : (r = 0, [u, l]) }) } function s(t) { switch (t.value) { case "bool": return t.bool; case "int": return t["int"].toNumber(); case "float": return t["float"]; case "double": return t["double"]; case "string": return t.string; case "null": return t["null"] } } function u(t) { return { scale: [t[0], t[1]], translate: [t[2], t[3]] } } function l(t) { return t.map(function (t) { for (var e = [], n = t.coordinates, r = i(t.layout), s = 0; s < n.length; s += r) { for (var u = [], l = 0; r > l; l++) u.push(x.fromValue(n[s + l]).toNumber()); e.push(u) } return t.layout === b.CoordinatesProto.LayoutProto.XYZ ? a(o(e)) : e }) } function c(t, e) { return e.type = "Point", e.coordinates = [t.x.toNumber(), t.y.toNumber()], e } function f(t, e) { e.type = "MultiPoint", e.coordinates = []; for (var n = t.coordinates.coordinates, r = i(t.coordinates.layout), o = [0, 0], a = 0; a < t.coordinates.coordinates.length; a += r) { for (var s = 0; r > s; s++) o[s] += x.fromValue(n[a + s]).toNumber(); e.coordinates.push(o.slice()) } return e } function h(t) { var e = { start: t.start, arcs: t.arcs }, n = M[7 & t.intersectionSides], r = M[t.intersectionSides >> 3 & 7]; return r && (e.entrySide = r), n && (e.exitSide = n), e } function d(t, e) { return e.type = "LineString", e.pieces = t.pieces.map(h), e } function p(t, e) { return e.type = "MultiLineString", e.lines = t.lines.map(function (t) { var e = t.pieces.map(h); return { pieces: e } }), t.lineIndices && (e.indices = t.lineIndices), e } function g(t) { var e = {}; if (e.start = t.start, e.arcs = t.arcs, t.sidesAndWind) { var n = M[t.sidesAndWind >> 3 & 7], r = M[7 & t.sidesAndWind], i = t.sidesAndWind & T; n && (e.entrySide = n), r && (e.exitSide = r), i && (e[4] = !0) } return e } function m(t) { var e; return e = t.shell ? t.shell.components.map(function (t) { return { shell: t.pieces.map(g) } }) : [{}], t.holes && t.holes.forEach(function (n, r) { n.components.forEach(function (n) { var i = e[n.shellComponent]; i.holes || (i.holes = []), i.holes.push(n.pieces.map(g)), i.indices || (i.indices = []), i.indices.push(t.holeIndices[r]) }) }), e } function y(t, e) { return e.type = "Polygon", e.components = m(t), e } function v(t, e) { return e.type = "MultiPolygon", e.polygons = t.polygons.map(function (t) { var e = m(t); return { components: e } }), t.polygonIndices && (e.indices = t.polygonIndices), e } function _(t) { var e = new r(t); return e.convert() } var b = t("../gen/tile-geometry-proto"), w = b.TileGeometryTopologyProto, x = t("long"), M = [null, "N", "E", "S", "W"], T = 64; r.prototype = { convert: function () { var t = this._proton, e = this, n = { q: [t.quantization[0].toInt(), t.quantization[1].toInt()], transform: u(t.transform), arcs: l(t.arcs), layers: {} }, r = t.features.map(function (t) { return e.convertFeature(t) }); return t.layers.names.forEach(function (e, i) { var o = i > 0 ? t.layers.offsets[i - 1] : 0, a = i < t.layers.offsets.length ? t.layers.offsets[i] : r.length; n.layers[e] = r.slice(o, a) }), n }, convertFeature: function (t) { var e = {}; return null !== t.id && (e.id = t.id.toString()), this.convertProperties(e, t), t.point ? c(t.point, e) : t.multiPoint ? f(t.multiPoint, e) : t.lineString ? d(t.lineString, e) : t.multiLineString ? p(t.multiLineString, e) : t.polygon ? y(t.polygon, e) : t.multiPolygon ? v(t.multiPolygon, e) : t.geometryCollection ? this.convertGeometryCollection(t.geometryCollection, e) : void 0 }, convertGeometryCollection: function (t, e) { var n = this; return e.type = "GeometryCollection", e.geometries = t.geometries.map(function (t) { return n.convertFeature(t) }), t.geometryIndices && (e.indices = t.geometryIndices), e }, convertProperties: function (t, e) { if (e.properties && e.properties.pointers && e.properties.pointers.length) { var n = this._proton.propertiesHeader, r = {}, i = 0; e.properties.pointers.forEach(function (t) { var o, a; 0 > t ? (t = ~t, o = n.keys[n.kvKeys[t]], a = s(n.kvValues[t])) : (o = n.keys[t], a = s(e.properties.values[i++])), r[o] = a }), t.properties = r } return t } }, r.convert = _, e.exports = r }, { "../gen/tile-geometry-proto": 1, "long": 7 }], 16: [function (t, e, n) { "use strict"; var r = t("./corner"), i = {}; i.NORTH = { x: 0, y: 1 }, i.EAST = { x: 1, y: 0 }, i.SOUTH = { x: 0, y: -1 }, i.WEST = { x: -1, y: 0 }, i.nextClockwise = function (t) { switch (t) { case i.WEST: return i.NORTH; case i.NORTH: return i.EAST; case i.EAST: return i.SOUTH; case i.SOUTH: return i.WEST } }, i.nextCounterClockwise = function (t) { switch (t) { case i.NORTH: return i.WEST; case i.EAST: return i.NORTH; case i.SOUTH: return i.EAST; case i.WEST: return i.SOUTH } }, i.nextCornerClockwise = function (t) { switch (t) { case i.WEST: return r.NORTHWEST; case i.NORTH: return r.NORTHEAST; case i.EAST: return r.SOUTHEAST; case i.SOUTH: return r.SOUTHWEST } }, i.nextCornerCounterClockwise = function (t) { switch (t) { case i.WEST: return r.SOUTHWEST; case i.NORTH: return r.NORTHWEST; case i.EAST: return r.NORTHEAST; case i.SOUTH: return r.SOUTHEAST } }, i.side = function (t) { switch (t) { case "N": return i.NORTH; case "E": return i.EAST; case "S": return i.SOUTH; case "W": return i.WEST } return void 0 }, e.exports = i }, { "./corner": 12 }]
        }, {}, [2])(2)
    })
}, function (t, e, n) { }, function (t, e, n) { (function (e) { var n, r, i; i = e.select("body").append("div").attr("id", "logo").style("position", "absolute").style("bottom", 5).style("z-index", 500).style("right", 7).style("width", 135), i.append("a").attr("href", "http://www.mapsense.co").append("img").attr("src", "img/logo_large_white.png").style("width", "100%"), n = function (t) { var e, n; return t = t.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"), e = new RegExp("[\\?&]" + t + "=([^&#]*)"), n = e.exec(location.search), null == n ? "" : decodeURIComponent(n[1].replace(/\+/g, " ")) }, r = function () { var t, e, n, r; return n = /^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/, t = /[-_a-zA-Z]/, e = /[_a-zA-Z0-9-]/, r = function (n, r) { return (n ? e : t).test(r) }, function (t) { var e, n, i; for (t = "_" + t, i = -1, n = ""; ++i < t.length;) n += r(i, e = t.charAt(i)) ? e : "_"; return n } }(), String.prototype.hashCode = function () { var t, e, n, r = 0; if (0 == this.length) return r; for (t = 0, n = this.length; n > t; t++) e = this.charCodeAt(t) + 1, r = (r << 5) - r + e, r |= 0; return r }, t.exports.getParameterByName = n, t.exports.hopsketch_toClassName = r }).call(e, n(2)) }, , function (t, e, n) { (function (e, r) { var i, o, a, s = [].indexOf || function (t) { for (var e = 0, n = this.length; n > e; e++) if (e in this && this[e] === t) return e; return -1 }; o = n(9), a = org.polymaps, i = { topoToGeo: function (t, e, n) { if (null == e && (e = !1), arguments.length) { if (!t) throw new Error("objectToFeatures may not be null") } else t = i.objectToFeatures.base; return function (r, s, u) { var l; return r.search("geojson") >= 0 || r.search("\\.json") >= 0 ? a.queue.json(r, s) : r.search("proton") >= 0 ? (l = function (n) { var r; return r = o.convert(o.convertProton(n), { invertY: !1 }), i.convertFeatures(u, r, t, e, s) }, a.queue.octetStream(r, l, n)) : a.queue.json(r, function (n) { return i.convertFeatures(u, n, t, e, s) }, n) } }, convertFeatures: function (t, n, r, i, o) { var a, u, l, c, f, h, d, p, g, m, y, v, _, b, w, x; if (x = function (n, i) { var o, a, s, u, l, c, f, h, d, p, g, m, y, v, _, b, w, x, M, T, E; if (g = n.objects, E = "MultiPoint" === (null != (v = T = g[i]) ? v.type : void 0), p = !E && "MultiPoint" === (null != (_ = T = null != (b = g[i]) && null != (w = b.geometries) ? w[0] : void 0) ? _.type : void 0) && 1 === g[i].geometries.length, (E || p) && (null != (x = T.properties) ? x.points : void 0)) { for (y = T.properties.points, o = T.coordinates, m = [], u = l = 0, M = y.length; M >= 0 ? M > l : l > M; u = M >= 0 ? ++l : --l) m.push({ type: "Point", coordinates: o[u], properties: y[u] }); g[i] = { type: "GeometryCollection", geometries: m } } for (n.propertyNameMap && (n.inversePropertyNameMap = e.invert(n.propertyNameMap)), d = [], n.zoom = t.zoom, r(n, i, d), c = 0, f = d.length; f > c; c++) a = d[c], h = a[0], s = a[1], s.properties || (s.properties = {}), s.properties.object = h; return function () { var t, e, n; for (n = [], e = 0, t = d.length; t > e; e++) a = d[e], n.push(a[1]); return n }() }, i) for (v = n.arcs, c = 0, h = v.length; h > c; c++) for (a = v[c], a[0][1] = n.q - a[0][1] - 1, l = f = 1, _ = a.length; _ >= 1 ? _ > f : f > _; l = _ >= 1 ? ++f : --f) a[l][1] = -a[l][1]; if (t.topology = n, n.layering) { b = n.objects; for (g in b) if (y = b[g], s.call(n.layering, g) < 0) throw new Error("Object " + g + "not in layering") } else n.layering = function () { var t; t = []; for (g in n.objects) t.push(g); return t }(); for (u = [], w = n.layering, p = 0, d = w.length; d > p; p++) m = w[p], u = u.concat(x(n, m)); o({ type: "FeatureCollection", features: u }) }, propGroupingObj2Feat: function (t) { var n; return n = function (n, i, o) { var a, s, u, l, c, f, h, d, p, g, m, y, v, _, b; if (n.inversePropertyNameMap) for (_ = [], d = 0, g = t.length; g > d; d++) v = t[d], _.push(n.inversePropertyNameMap[v]); else _ = t; for (y = n.objects[i], h = {}, a = function (e) { var r, i, o, a, s, u, l, c, f, d; if (f = [], e) { for (a = 0, s = _.length; s > a; a++) c = _[a], f.push((null != (d = e.properties) ? d[c] : void 0) || "none"), f.push("_" + n.zoom); if (i = f.join("/"), r = h[i], !r) for (r = h[i] = { type: "GeometryCollection", geometries: [], properties: {} }, r.properties.zoom = "_" + n.zoom, o = l = 0, u = t.length; u > l; o = ++l) c = t[o], r.properties[c] = isNaN(f[o]) ? f[o] : "_" + f[o]; return r.geometries.push(e) } }, l = ("GeometryCollection" === y.type ? y.geometries : [c]) || [], p = 0, m = l.length; m > p; p++) c = l[p], a(c); b = []; for (f in h) u = h[f], s = r.feature(n, u), s.properties ? s.properties = e.extend(s.properties, u.properties) : s.properties = u.properties, b.push(o.push([i, s])); return b } }, objectToFeatures: { base: function (t, e, n) { var i, o, a; return o = e, a = n, i = t.objects[e], a.push([o, r.feature(t, i, function () { return !0 })]) }, subObjects: function (t, n, i) { var o, a, s, u, l, c, f, h, d, p, g, m, y; for ((h = t.propertyNameMap) && (y = e.invert(h).sub_object), o = function (t) { var e, n, r; if (t) return r = (null != t && null != (n = t.properties) ? n[y] : void 0) || "none", e = m[r], e || (e = m[r] = { type: "GeometryCollection", geometries: [] }), e.geometries.push(t) }, d = t.objects[n], m = {}, s = ("GeometryCollection" === d.type ? d.geometries : [u]) || [], c = 0, f = s.length; f > c; c++) u = s[c], o(u); p = []; for (g in m) l = m[g], a = r.feature(t, l), i.push([n, a]), a.properties || (a.properties = {}), p.push(a.properties.sub_object = g); return p }, features: function (t, e, n) { var i, o, a, s, u, l, c; for (o = r.feature(t, t.objects[e]), a = null, a = "Feature" === o.type ? [o] : o.features, c = function (r) { var i, o, a, s, u, l, f, h; if ("FeatureCollection" === r.type) for (l = r.features, o = 0, s = l.length; s > o; o++) i = l[o], c(i); if (t.inversePropertyNameMap) { u = {}, f = null != r ? r.properties : void 0; for (a in f) h = f[a], u[t.propertyNameMap[a]] = h; u.zoom = "_" + t.zoom, r.properties = u } return n.push([e, r]) }, l = [], s = 0, u = a.length; u > s; s++) i = a[s], l.push(c(i)); return l }, landing: function (t, e, n) { var i, o, a, s, u, l, c, f; for (s = e, u = n, a = t.objects[e], l = a.geometries, c = [], i = 0, o = l.length; o > i; i++) f = l[i], c.push(u.push([s, r.feature(t, f, function () { return !0 })])); return c }, spicyTuna_2: function (t, e, n) { var i, o, a; return o = e, a = n, i = t.objects[e], "state" === o ? a.push([o, r.mesh(t, i, function (t, e) { return t !== e }, !1)]) : "country" === o ? (a.push([o + "-boundary", r.mesh(t, i, function (t, e) { return t === e })]), a.push([o + "-interior", r.mesh(t, i, function (t, e) { return t !== e }, !1)])) : "lake" === o || "playa" === o || "np" === o || "pluve" === o ? a.push([o, r.feature(t, i)]) : "pp" !== o ? a.push([o, r.mesh(t, i, function () { return !0 }, !1)]) : void 0 } } }, t.exports = i }).call(e, n(4), n(12)) }, function (t, e, n) { n(17), n(18), n(19), n(21), t.exports = org.polymaps }, function (t, e, n) { (function (e) { "use strict"; function n() { this.width = 0, this.height = 0, this.svg = null, this.group = null, this.parent = null, this.data = null, this.svgClass = "svg", this.groupClass = "group", this.addDefaultGroup = !0 } n.prototype.init = function (t) { return t || (t = {}), this.parent = t.parent || e.select("body"), this.svg = this.parent.append("svg").attr("class", this.svgClass), this.addDefaultGroup && (this.group = this.svg.append("g").attr("class", this.groupClass)), this.setDimension(t), this }, n.prototype.setDimension = function (t) { t || (t = {}), this.width = t.width || window.innerWidth, this.height = t.height || window.innerHeight, this.svg.attr({ width: this.width, height: this.height }) }, n.prototype.run = function (t) { t && (this.data = t) }, t.exports = n }).call(e, n(2)) }, , function (e, n, r) { (function (e) { var n = org.polymaps; n.layer.dispatchTilesChanged = function (n) { function r() { var r = [], a = !1, s = n.cache.locks(); for (t in s) s[t].ready && (r.push(t), a = a || !o.has(t)); (a || r.length != o.size()) && (o = e.set(r), i("change")) } function i(t, e) { e ? e.type = t : e = { type: t }, n.dispatch(e) } var o = e.set(); return n.on("move", r), n.on("load", r), n } }).call(n, r(2)) }, function (t, e, n) { var r = org.polymaps; r.layer.dispatchVisibleTiles = function (t) { function e(e) { t.dispatch({ type: "visible", tile: e }) } var n = t.show; return t.show = function (t) { n && n.apply(this, arguments), t.ready && e(t) }, t.on("load", function (t) { e(t.tile) }), t } }, function (t, e, n) { (function (t) { var e = org.polymaps; e.fetcher = function (n, r, i) { function o(i) { function o(t) { delete i.request, i.data = t, i.ready = !0, r(i), u.dispatch({ type: "load", tile: i }) } var a = i.element = e.svg("rect"); t.select(a).style("display", "none"), null != s ? i.request = n("function" == typeof s ? s(i) : s, o) : o(null) } function a(t) { t.request && t.request.abort(!0), i && i(t) } var s, u = e.layer(o, a); return e.layer.dispatchTilesChanged(u), arguments.length || (n = e.queue.json), u.url = function (t) { return arguments.length ? (s = "string" == typeof t && /{.}/.test(t) ? e.url(t) : t, u.reload()) : s }, t.select(u.container()).classed("fetcher", !0), u } }).call(e, n(2)) }, function (t, e, n) { var r = n(22), i = function () { function t(t) { function e() { if (!c.hasNext()) throw new Error("No such element.") } function n() { return u = i, r = t.call(l), u != o ? (u = a, !0) : !1 } var r, i = 0, o = 1, a = 2, s = 3, u = s, l = { endOfData: function () { u = o } }, c = {}; return c.hasNext = function () { if (u == i) throw new Error("Failed, or illegal state."); switch (u) { case o: return !1; case a: return !0 } return n() }, c.next = function () { return e(), u = s, r }, c.peek = function () { return e(), r }, c } function e(e, n) { return t(function () { for (var t; e.hasNext() ;) if (n(t = e.next())) return t; this.endOfData() }) } function n(t) { for (var e = []; t.hasNext() ;) e.push(t.next()); return e } function i(e, n) { for (var i = r(function (t, e) { return n(t.peek(), e.peek()) }), a = 0; a < e.length; a++) e[a].hasNext() && i.push(o(e[a])); return t(function () { if (0 == i.size()) return this.endOfData(); var t = i.pop(), e = t.next(); return t.hasNext() && i.push(t), e }) } function o(t) { var e, n = !1; return { peek: function () { return n || (e = t.next(), n = !0), e }, hasNext: function () { return n || t.hasNext() }, next: function () { if (!n) return t.next(); var r = e; return n = !1, e = null, r } } } function a(t) { var e = 0, n = t.length; return { hasNext: function () { return n > e }, next: function () { return t[e++] } } } return { mergeSorted: i, peekingIterator: o, fromArray: a, toArray: n, filter: e, abstractIterator: t } }(); t.exports = i }, function (t, e, n) { (function (t, e) { var r = n(20), i = org.polymaps, a = n(9); i.labels = function (n) { function s() { P.on("change", b), P.on("move", u), A && (A.style("display", null), b(), u()) } function u() { var t = L.zoom(), e = L.angle(), n = j != t, r = angle != e; (n || r) && (angle = e, j = t, b()), D && D.call(E), C && C.call(E) } function l() { P.off("change", b), P.off("move", u), A && A.style("display", "none") } function c(t) { return arguments.length ? (S = "function" == typeof t ? t : p(t), N) : S } function f(t) { if (!arguments.length) return k; if ("function" == typeof t) k = t; else { var e = p(arguments[0]), n = p(arguments[1]); k = function (t, r) { var i = e(t), o = n(t); return null == i && (i = 1 / 0), null == o && (o = 1 / 0), r >= i && o > r } } return N } function h(t) { return function (e, n) { var r = t(e), i = t(n); return r != i ? null == r ? 1 : null == i ? -1 : i > r ? -1 : 1 : 0 } } function d(t) { var e = arguments.length; if (!e) return Y; for (var n, r = [], i = 0; e > i; i++) n = arguments[i], r.push("function" == typeof n ? n : h(p(n))); return r.push(h(O)), Y = function (t, n) { for (var i = 0; e > i; i++) { var o = r[i](t, n); if (0 != o) return o } }, N } function p(t) { return function (e) { return e.properties && e.properties[t] } } function g() { var t = [], e = P.cache.locks(); for (var n in e) { var i = e[n]; if (i.ready) { var o; o = r.fromArray(e[n].data), o = r.filter(o, m()), t.push(o) } } var a = r.mergeSorted(t, Y); return r.filter(a, y()) } function m() { var t = L.zoom(); return function (e) { return k(e, t) } } function y() { function t(t) { return n = t.id, r = e, !0 } function e(t) { return n == t.id ? !1 : (n = t.id, !0) } var n, r = t; return function (t) { return r(t) } } function v(t, e) { return t[2] < e[0] || t[3] < e[1] || e[2] < t[0] || e[3] < t[1] } function _(t) { for (var e = 0; e < t.length; e++) { var n = t[e], i = n.id, o = R[i], a = o.dimensions || (o.dimensions = M(n)), s = o.xy = T(n), u = s.x + a.x, l = s.y + a.y; o.bbox = [u, l, u + a.width, l + a.height] } for (var c = {}, e = 1; e < t.length; e++) for (var i = t[e].id, f = R[i].bbox, h = 0; e > h; h++) if (!v(f, R[t[h].id].bbox)) { c[i] = !0; break } return r.filter(r.fromArray(t), function (t) { return !c[t.id] }) } function b() { if (B) var t = window.performance.now(); var e = r.toArray(g()); e = r.toArray(_(e)), B && console.log(window.performance.now() - t), D = A.selectAll("text:not(.calculator)").data(e, O), D.enter().append("text").style("opacity", 0).text(S).call(E).transition().duration(200).style("opacity", 1), C = D.exit(), C.transition().duration(100).style("opacity", 0).remove() } function w(t) { if (t.data) for (var e = 0; e < t.data.length; e++) { var n = t.data[e], r = R[n]; r && 0 == R[n].count-- && delete R[n] } } function x(t) { if (t.data) { t.data.sort(Y); for (var e = 0; e < t.data.length; e++) { var n = t.data[e].id, r = R[n]; r ? r.count++ : R[n] = { count: 1 } } } } function M(t) { return bbox = I.text(S(t)).node().getBBox() } function T(t) { return L.locationPoint({ lon: t.geometry.coordinates[0], lat: t.geometry.coordinates[1] }) } function E(t) { t.attr("transform", function (t) { var e = T(t); return "translate(" + e.x + "," + e.y + ")" }) } n || (n = function (e, n) { function r(e) { var n = []; for (o in e.objects) { var r = t.feature(e, e.objects[o]); if ("Feature" == r.type) n.push(r); else { var i = n, a = r.features; if (i.length < a.length) { var s = i; i = a, a = s } i.push.apply(i, a), n = i } } return n } return -1 !== e.indexOf("proton") ? i.queue.octetStream(e, function (t) { t = a.convert(a.convertProton(t)), n(r(t)) }) : i.queue.json(e, function (t) { n(r(t)) }) }); var L, S, k, Y, A, D, C, I, N = {}, P = i.fetcher(n, x, w), O = function (t) { return t.id }, j = angle = -(1 / 0), R = {}, B = !1; return c("name"), f("minz", "maxz"), d("minz", "name"), s(), N.on = s, N.off = l, N.text = c, N.filter = f, N.comparator = d, N.container = function () { return A.node() }, N.profile = function (t) { return B = t, N }, N.url = function () { return arguments.length ? (P.url.apply(P, arguments), N) : P.url() }, N.map = function (t) { return t && (L && (j = angle = D = null, A.remove()), L = t, A = e.select(t.container()).append("g").attr("class", "labels"), I = A.append("text").attr("class", "calculator").style("visibility", "hidden"), L.panBy({ x: 0, y: 0 })), P.map.apply(P, arguments) }, N } }).call(e, n(12), n(2)) }, function (t, e, n) { var r = function (t) { function e(e) { for (var n = i[e]; e > 0;) { var r = (e + 1 >> 1) - 1, o = i[r]; if (t(n, o) >= 0) break; i[o.index = e] = o, i[n.index = e = r] = n } } function n(e) { for (var n = i[e]; ;) { var r = e + 1 << 1, o = r - 1, a = e, s = i[a]; if (o < i.length && t(i[o], s) < 0 && (s = i[a = o]), r < i.length && t(i[r], s) < 0 && (s = i[a = r]), a === e) break; i[s.index = e] = s, i[n.index = e = a] = n } } var r = {}, i = []; return r.push = function () { for (var t = 0, n = arguments.length; n > t; ++t) { var r = arguments[t]; e(r.index = i.push(r) - 1) } return i.length }, r.pop = function () { var t = i[0], e = i.pop(); return i.length && (i[e.index = 0] = e, n(0)), t }, r.peek = function () { return i[0] }, r.size = function () { return i.length }, r.remove = function (r) { var o = r.index, a = i.pop(); return o !== i.length && (i[a.index = o] = a, (t(a, r) < 0 ? e : n)(o)), o }, r }; t.exports = r }, function (t, e, n) {
    "use strict"; function r() {
        this.timeoutKey = null, this.animationStatus = { start: !1, delay: 83, loop: !1, valRange: 0, defaultRangePercentage: .05, endOfCycle: !1, endOfCycleDelay: 1e3, useRequestAnimationFrame: !0 }, this.animate = function () {
            function t() { var r = o.delay; o.start && (o.endOfCycle && (r = o.endOfCycleDelay), s = new Date, o.useRequestAnimationFrame ? (s - u > r && (e() ? (u = s, n()) : i.stopAnimation()), i.timeoutKey = requestAnimationFrame(t)) : e() ? i.timeoutKey = setTimeout(n, r) : i.stopAnimation()) } function e() { return o.loop ? !0 : i.selectedMax < i.maxVal } function n() { var e = i.getSelectedMin(), n = i.getSelectedMax(); r(e, n), t() } function r(t, e) {
                o.endOfCycle || t > i.getMaxVal() ? (t = i.getMinVal(), e = t + o.valRange, o.endOfCycle = !1, i.setBrushPosition(t, e)) : e >= i.getMaxVal() ? o.endOfCycle = !0 : (t += a,
                e += a, i.setBrushPosition(t, e))
            } var i = this, o = i.animationStatus, a = i.cellInterval, s = null, u = new Date; i.stopAnimation(), o.start || "object" != typeof this.selectedMin && "number" != typeof this.selectedMin || "object" != typeof this.selectedMax && "number" != typeof this.selectedMax || (o.start = !0, o.valRange = i.selectedMax - i.selectedMin, t())
        }, this.stopAnimation = function () { this.timeoutKey && (this.animationStatus.useRequestAnimationFrame ? cancelAnimationFrame(this.timeoutKey) : clearTimeout(this.timeoutKey), this.animationStatus.start = !1, this.endOfAnimation()) }, this.endOfAnimation = function () { }, this.toggleAnimationLoop = function () { this.animationStatus.loop = !this.animationStatus.loop }
    } var i = n(24); r.prototype = new i, r.prototype.init = function (t) { i.prototype.init.call(this, t), window.requestAnimationFrame || (this.animationStatus.useRequestAnimationFrame = !1) }, r.prototype.animateForward = function () { (this.getSelectedMin() == this.getSelectedMax() || this.isFullRangeBrush()) && (this.selectedMin = this.selectedMax = 0), this.selectedMin || this.setSelectedMin(this.getMinVal()), this.selectedMax || this.setSelectedMax(this.getMinVal() + parseInt((this.maxVal - this.minVal) * this.animationStatus.defaultRangePercentage)), this.animate(), this.brushFullRangeLock = !1 }, t.exports = r
}, function (t, e, n) { (function (e) { "use strict"; function r() { this.brush = null, this.brushGroup = null, this.brushBarLeftG = null, this.brushBarRightG = null, this.brushBarLeftRect = null, this.brushBarRightRect = null, this.cellInterval = 0, this.minVal = 0, this.maxVal = 0, this.medianVal = 0, this.selectedMin = 0, this.selectedMax = 0, this.defaultBrushFullRange = !0, this.brushFullRangeLock = !0, this.getSelectedMin = function () { return this.selectedMin }, this.setSelectedMin = function (t) { this.selectedMin = t }, this.getSelectedMax = function () { return this.selectedMax }, this.setSelectedMax = function (t) { this.selectedMax = t }, this.getMinVal = function () { return this.minVal }, this.getMaxVal = function () { return this.maxVal }, this.getBrushExtent = function () { return this.brush.extent() }, this.getBrushExtentWhenMoving = function () { return e.event && e.event.sourceEvent ? this.getBrushExtent() : null }, this.setBrushExtent = function (t, e) { this.setSelectedMinMax(t, e), this.brush && "function" == typeof this.brush.extent && this.brush.extent([this.selectedMin, this.selectedMax]) }, this.onDraggableAreaMoved = function () { }, this.initBrush = function () { this.brush = e.svg.brush(), this.brush.on("brush", this.brushMove.bind(this)), this.brush.on("brushend", this.brushEnd.bind(this)), this.brushGroup = this.svg.append("g").attr("class", "brush") }, this.updateBrush = function () { this.brushGroup.attr("transform", "translate(" + this.marginLeft + "," + this.marginTop + ")"), this.brushGroup.selectAll("rect").attr({ height: this.histogramH }), this.brushBarLeftRect.attr({ width: this.cellW, x: 0 }), this.brushBarRightRect.attr({ width: this.cellW, x: -this.cellW }) }, this.setSelectedMinMax = function (t, e) { this.setSelectedMin(t), this.setSelectedMax(e) }, this.setMedianVal = function (t) { t || (t = this.maxVal - this.minVal), this.medianVal = this.getMinVal() + t / 2 }, this.getXScaleDomain = function () { var t = this.xScale.domain(), e = t[0], n = t[1]; return this.isDateTimeHistogram && (e = e.getTime(), n = n.getTime()), [e, n] } } var i = n(26); r.prototype = new i, r.prototype.init = function (t) { i.prototype.init.call(this, t), this.initBrush() }, r.prototype.initScalesAndHistogramData = function () { i.prototype.initScalesAndHistogramData.call(this); var t, e = this.xScale.domain(); this.minVal = e[0], this.maxVal = e[1], t = this.maxVal - this.minVal, this.cellInterval = t / this.numOfCell, this.setMedianVal(t) }, r.prototype.run = function (t) { var e = this.isFullRangeBrush(); i.prototype.run.call(this, t), this.defaultBrushFullRange && !this.selectedMin && !this.selectedMax || e && this.brushFullRangeLock ? (this.setBrush(), this.setBrushToFullRange()) : this.setBrushAndSelectedBars(this.getSelectedMin(), this.getSelectedMax()) }, r.prototype.setBrushAndSelectedBars = function (t, e) { this.setBrush(t, e), this.setSelectedBars() }, r.prototype.selectedBarsFilter = function (t) { var e = t.x + t.dx; return e - t.dx > this.getSelectedMin() && e < this.getSelectedMax() }, r.prototype.resize = function (t) { i.prototype.resize.call(this, t) && this.setBrushPosition(this.selectedMin, this.selectedMax) }, r.prototype.setSelectedBars = function () { this.bars && this.bars.classed && this.bars.classed("selectedBar", this.selectedBarsFilter.bind(this)), this.onDraggableAreaMoved() }, r.prototype.brushMove = function () { var t = this.getBrushExtentWhenMoving(); t && t.length >= 2 && (this.setSelectedMinMax(t[0], t[1]), this.setSelectedBars(), this.onBrushMove()) }, r.prototype.onBrushMove = function () { }, r.prototype.brushEnd = function () { var t = this.getBrushExtentWhenMoving(); t && t.length >= 2 && this.onBrushEnd() }, r.prototype.onBrushEnd = function () { }, r.prototype.setBrushToFullRange = function () { var t = this.xScale.domain(); return Array.isArray(t) && t.length >= 2 ? (this.setBrushPosition(t[0], t[1]), !0) : !1 }, r.prototype.removeBrush = function () { this.brush.empty() || (this.brushGroup.call(this.brush.clear()), this.setSelectedMinMax(null, null), this.setSelectedBars()) }, r.prototype.setBrush = function (t, e) { this.brush.x(this.xScale), "number" == typeof t && "number" == typeof e && t != e ? (this.setBrushExtent(t, e), this.brushGroup.call(this.brush)) : this.brushGroup.call(this.brush).call(this.brush.event), this.brushBarLeftG = this.brushGroup.select(".resize.w"), this.brushBarRightG = this.brushGroup.select(".resize.e"), this.brushBarLeftRect = this.brushBarLeftG.select("rect"), this.brushBarRightRect = this.brushBarRightG.select("rect"), this.updateBrush() }, r.prototype.setBrushPosition = function (t, e) { return this.brush && this.brushGroup && (t || e) ? (this.setBrushExtent(t, e), this.brushGroup.call(this.brush), this.setSelectedBars(), !0) : (this.removeBrush(), !1) }, r.prototype.isFullRangeBrush = function () { var t = this.getXScaleDomain(), e = this.getBrushExtent(); return t && t.length >= 2 && e && e.length >= 2 && t[0] == e[0] && t[1] == e[1] ? !0 : !1 }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.marginTop = 10, this.marginRight = 0, this.marginBottom = 30, this.marginLeft = 0, this.histogramData = null, this.histogramW = null, this.histogramH = null, this.cellW = null, this.numOfCell = null, this.barWidth = 5, this.division = 100, this.svgClass = "histogram", this.groupClass = "histG", this.colName = "timestamp", this.axisG = null, this.barG = null, this.bars = null, this.barsRect = null, this.xScale = null, this.yScale = null, this.xAxis = null, this.xAxisFormat = null, this.getBarHeight = function (t) { return this.histogramH - this.yScale(t.y) }, this.getBarTranslate = function (t, e) { return "translate(" + this.cellW * e + "," + this.yScale(t.y) + ")" }, this.drawBars = function () { var t = { transform: this.getBarTranslate.bind(this), "class": "histBar" }; this.bars = this.barG.selectAll("g").data(this.histogramData), this.bars.attr(t), this.bars.enter().append("g").attr(t), this.bars.exit().remove(), this.bars.select("rect").remove(), this.bars.append("rect").attr({ x: 1, width: this.cellW - 1, height: this.getBarHeight.bind(this) }) }, this.initXAxis = function () { this.xAxis = e.svg.axis().scale(this.xScale).orient("bottom"), this.updateXAxis() }, this.drawAxis = function () { this.initXAxis(), this.axisG.attr({ transform: "translate(0," + this.histogramH + ")", "class": "axis" }).call(this.xAxis) }, this.setMargins = function (t) { t || (t = {}), "number" == typeof t.marginTop && (this.marginTop = t.marginTop), "number" == typeof t.marginRight && (this.marginRight = t.marginRight), "number" == typeof t.marginBottom && (this.marginBottom = t.marginBottom), "number" == typeof t.marginLeft && (this.marginLeft = t.marginLeft) }, this.initXYScales = function () { this.initXScale(), this.initYScale() }, this.initYScale = function () { this.yScale = e.scale.linear() } } var i = n(15); r.prototype = new i, r.prototype.setDimension = function (t) { t || (t = {}), i.prototype.setDimension.call(this, t), this.setMargins(t), this.histogramH = this.height - this.marginTop - this.marginBottom, this.histogramW = this.width - this.marginLeft - this.marginRight, this.xScale.range([0, this.histogramW]), this.yScale.range([this.histogramH, 0]), this.group.attr("transform", "translate(" + this.marginLeft + "," + this.marginTop + ")"), this.updateDivision = function () { this.division = Math.round(this.histogramW / this.barWidth) } }, r.prototype.initScalesAndHistogramData = function () { this.xScale.domain(Array.isArray(this.data) && this.data.length ? e.extent(this.data) : [0, 0]), this.updateDivision(), this.setHistogramData(), this.yScale.domain([0, e.max(this.histogramData, function (t) { return t.y })]), this.numOfCell = this.histogramData.length, this.numOfCell ? this.cellW = this.histogramW / this.numOfCell : this.cellW = 0 }, r.prototype.setHistogramData = function () { this.histogramData = e.layout.histogram().bins(this.division)(this.data) }, r.prototype.init = function (t) { return t || (t = {}), this.initXYScales(), i.prototype.init.call(this, t), this.barG = this.group.append("g"), this.axisG = this.group.append("g"), this }, r.prototype.run = function (t) { Array.isArray(t) && (i.prototype.run.call(this, t), this.initScalesAndHistogramData(), this.drawBars(), this.drawAxis()) }, r.prototype.initXScale = function () { this.xScale = e.scale.linear() }, r.prototype.updateXAxis = function () { this.xAxis && (this.xAxisFormat && this.xAxis.tickFormat(this.xAxisFormat), this.xAxis.ticks && this.xAxisTicksCounter && this.xAxis.ticks(this.xAxisTicksCounter)) }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.tickWidth = 180, this.xAxisFormat = e.format("s"), this.updateBars = function () { this.bars && this.bars.attr && (this.bars.attr("transform", this.getBarTranslate.bind(this)), this.bars.selectAll("rect").attr({ width: this.cellW - 1, height: this.getBarHeight.bind(this) })) } } var i = n(25); r.prototype = new i, r.prototype.updateXAxis = function () { this.xAxisTicksCounter = Math.ceil(this.histogramW / this.tickWidth), i.prototype.updateXAxis.call(this), this.xAxis.scale(this.xScale), this.axisG.attr("transform", "translate(0," + this.histogramH + ")").call(this.xAxis) }, r.prototype.resize = function (t) { return this.data && this.data.length ? (t || (t = {}), this.setDimension(t), this.initScalesAndHistogramData(), this.drawBars(), this.updateXAxis(), !0) : !1 }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.marginTop = 22, this.marginRight = 0, this.marginLeft = 0, this.marginBottom = 30, this.isDateTimeHistogram = !0, this.d3TimeFormat = e.time.format("%b %d %-I:%M %p %Y"), this.xAxisFormat = null, this.brushBarLeftText = null, this.brushBarRightText = null, this.brushTextAttr = { y: -3, "text-anchor": "middle" }, this.initXScale = function () { this.isDateTimeHistogram ? this.xScale = e.time.scale() : i.prototype.initXScale.call(this) }, this.dateTimeOnOff = function (t, e) { this.isDateTimeHistogram == e && this.xScale || (this.isDateTimeHistogram = !this.isDateTimeHistogram, this.initXScale(), this.xScale.range([0, this.histogramW])), this.yScale || (this.initYScale(), this.yScale.range([this.histogramH, 0])), this.run(t) }, this.dateTimeOn = function (t) { this.dateTimeOnOff(t, !0) }, this.dateTimeOff = function (t) { this.dateTimeOnOff(t, !1) }, this.setBrushBarTexts = function () { var t; this.isDateTimeHistogram && this.brushBarLeftText && this.brushBarRightText && (t = this.brush.extent(), this.brushBarLeftText.text(this.d3TimeFormat(t[0])), this.brushBarRightText.text(this.d3TimeFormat(t[1]))) }, this.getSelectedMin = function () { return this.isDateTimeHistogram && this.selectedMin && "number" != typeof this.selectedMin ? this.selectedMin.getTime() : this.selectedMin }, this.setSelectedMin = function (t) { this.isDateTimeHistogram && "number" == typeof t ? this.selectedMin = new Date(t) : this.selectedMin = t }, this.getSelectedMax = function () { return this.isDateTimeHistogram && this.selectedMax && "number" != typeof this.selectedMax ? this.selectedMax.getTime() : this.selectedMax }, this.setSelectedMax = function (t) { this.isDateTimeHistogram && "number" == typeof t ? this.selectedMax = new Date(t) : this.selectedMax = t }, this.getMinVal = function () { return this.isDateTimeHistogram && "number" != typeof this.minVal ? this.minVal.getTime() : this.minVal }, this.getMaxVal = function () { return this.isDateTimeHistogram && "number" != typeof this.maxVal ? this.maxVal.getTime() : this.maxVal }, this.getDomainExtentToNumber = function (t) { return this.isDateTimeHistogram && t && t.getTime ? t.getTime() : t }, this.getXScaleDomain = function () { return this.xScale.domain().map(this.getDomainExtentToNumber.bind(this)) }, this.getBrushExtent = function () { var t = this.brush.extent(); return Array.isArray(t) ? t.map(this.getDomainExtentToNumber.bind(this)) : null } } var i = n(23); r.prototype = new i, r.prototype.initBrushBarTexts = function () { this.brushBarLeftG && this.brushBarRightG && (this.brushBarLeftG.select("text").remove(), this.brushBarRightG.select("text").remove(), this.isDateTimeHistogram && (this.brushBarLeftText = this.brushBarLeftG.append("text").attr(this.brushTextAttr), this.brushBarRightText = this.brushBarRightG.append("text").attr(this.brushTextAttr))) }, r.prototype.setSelectedBars = function (t, e) { i.prototype.setSelectedBars.call(this, t, e), this.isDateTimeHistogram && this.setBrushBarTexts() }, r.prototype.run = function (t) { i.prototype.run.call(this, t), this.isDateTimeHistogram && this.initBrushBarTexts() }, r.prototype.setBrushExtent = function (t, e) { var n = t, r = e; this.isDateTimeHistogram && ("number" == typeof t && (n = new Date(t)), "number" == typeof e && (r = new Date(e))), i.prototype.setBrushExtent.call(this, t, e) }, r.prototype.setBrushPosition = function (t, e) { i.prototype.setBrushPosition.call(this, t, e) && this.isDateTimeHistogram && this.setBrushBarTexts() }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { var t = e.scale.category20(), n = e.scale.category20b(), r = e.scale.category20c(); this.barColor = "steelblue", this.barMaxColor = "darkblue", this.barMinColor = "white", this.cssPrefix = "colorDChart", this.barLinearColorScale = e.scale.linear(), this.colorRange = t.range().concat(n.range()).concat(r.range()), this.barOrdinalColorScale = e.scale.ordinal().range(this.colorRange), this.barOrdinalIndexScale = e.scale.linear().rangeRound([0, this.colorRange.length]), this.backBarFillStyle = null, this.frontBarFillStyle = null, this.frontBarCssClass = null, this.disableFrontBars = !1, this.barColorSchema = "default", this.groupBy = "counter", this.fillByCssClass = !1, this.getBackBarTagName = function () { return "rect." + this.barBackClass }, this.getFrontBarTagName = function () { return "rect." + this.barFrontClass }, this.fillBarWithCounter = function (t) { return "gradient" == this.barColorSchema ? this.barLinearColorScale(t.counter) : "distinct" == this.barColorSchema ? this.barOrdinalColorScale(t.counter) : void 0 }, this.fillBarWithKey = function (t) { return this.colorRange[this.keyStateHash[t.key].index] }, this.getCssColorClassWithCounter = function (t) { return this.cssPrefix + this.barOrdinalIndexScale(t.counter) }, this.getCssColorClassWithKey = function (t) { var e = t.key, n = this.getKeyStateOther(); return n && Array.isArray(n.collection) && n.collection.indexOf(e) > -1 ? this.cssPrefix + n.index : this.keyStateHash[e] ? this.cssPrefix + this.keyStateHash[t.key].index : this.cssPrefix }, this.cssBarWithKey = function (t) { return this.barFrontClass + " " + this.getCssColorClassWithKey(t) }, this.cssBarWithCounter = function (t) { return this.barFrontClass + " " + this.getCssColorClassWithCounter(t) }, this.getCssClassHash = function (t) { t || (t = {}); var e, n, r, i, o, a, s = {}, u = t.cssAttr || "fill"; if ("key" == this.groupBy) for (e in this.keyStateHash) n = this.getCssColorClassWithKey({ key: e }), r = this.fillBarWithKey({ key: e }), n && r && (s[n] = u + ":" + r + ";"); else for (o = 0, a = this.dataToShow.length; a > o; o++) i = this.dataToShow[o], n = this.getCssColorClassWithCounter(i), r = this.fillBarWithCounter(i), n && r && (s[n] = u + ":" + r + ";"); return s }, this.setStyle = function (t, e, n) { t && e && t.style(e, n) }, this.setStyleDisplay = function (t, e) { t && (e ? t.style("display", "") : t.style("display", "none")) }, this.setCssClass = function (t, e) { t && e && t.attr("class", e) }, this.setGradientColor = function () { this.barColorSchema = "gradient", this.data && this.resize() }, this.setDistinctColor = function (t, e) { this.barColorSchema = "distinct", this.groupBy = t, this.fillByCssClass = e, this.data && this.resize() }, this.setDefaultColor = function () { this.barColorSchema = "default", this.data && this.resize() }, this.cssFunc = function (t) { } } var i = n(31); r.prototype = new i, r.prototype.calculateColWidthAndSpace = function () { i.prototype.calculateColWidthAndSpace.call(this), this.backBarFillStyle = null, this.frontBarFillStyle = null, this.disableFrontBars = !1, this.frontBarCssClass = null, this.barLinearColorScale.domain(this.counterExtent), this.barLinearColorScale.range([this.barMinColor, this.barMaxColor]), this.barOrdinalColorScale.domain(this.counterExtent), this.barOrdinalIndexScale.domain(this.counterExtent), "gradient" == this.barColorSchema ? (this.backBarFillStyle = this.fillBarWithCounter, this.disableFrontBars = !0) : "distinct" == this.barColorSchema && (this.fillByCssClass ? "key" == this.groupBy ? this.frontBarCssClass = this.cssBarWithKey : this.frontBarCssClass = this.cssBarWithCounter : "key" == this.groupBy ? this.frontBarFillStyle = this.fillBarWithKey : this.frontBarFillStyle = this.fillBarWithCounter) }, r.prototype.setBackEnter = function (t, e) { var n = i.prototype.setBackEnter.call(this, t, e); return this.backBarFillStyle ? this.setStyle(n, "fill", this.backBarFillStyle.bind(this)) : this.setStyle(n, "fill", null), n }, r.prototype.setFrontEnter = function (t, e) { var n = i.prototype.setFrontEnter.call(this, t, e); return this.setStyleDisplay(n, !this.disableFrontBars), this.frontBarFillStyle ? this.setStyle(n, "fill", this.frontBarFillStyle.bind(this)) : this.setStyle(n, "fill", null), this.frontBarCssClass && this.setCssClass(n, this.frontBarCssClass.bind(this)), n }, r.prototype.setBarSelection = function (t, e, n, r) { var o = i.prototype.setBarSelection.call(this, t, e, n, r); e == this.getBackBarTagName() && (this.backBarFillStyle ? this.setStyle(o, "fill", this.backBarFillStyle.bind(this)) : this.setStyle(o, "fill", null)), e == this.getFrontBarTagName() && (this.setStyleDisplay(o, !this.disableFrontBars), this.frontBarFillStyle ? this.setStyle(o, "fill", this.frontBarFillStyle.bind(this)) : this.setStyle(o, "fill", null), this.frontBarCssClass && this.setCssClass(o, this.frontBarCssClass.bind(this))) }, r.prototype.run = function (t) { i.prototype.run.call(this, t), "distinct" == this.barColorSchema && this.fillByCssClass && this.cssFunc && "function" == typeof this.cssFunc && this.cssFunc(this) }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.svgClass = "discreteChart", this.groupClass = "discreteG", this.barGClass = "bar", this.barFrontClass = "front", this.barBackClass = "back", this.numOfCol = 3, this.rowSpace = 4, this.colHeight = 24, this.colWidth = null, this.halfColH = null, this.halfColW = null, this.colSpace = null, this.keyStateHash = null, this.discreteData = null, this.dataToShow = null, this.barsG = null, this.counterExtent = null, this.counterMin = null, this.counterMax = null, this.counterSum = null, this.labelAlign = "middle", this.labelX = 0, this.labelY = 0, this.labelMargin = 6, this.textAnchor = "middle", this.alignmentBaseline = "middle", this.doUpdateSvgHeight = !0, this.getText = function (t, e) { return t.key + " (" + t.counter + ")" }, this.getLabel = function (t, e) { return "Key: " + t.key + " / Counter: " + t.counter + " / Index:" + e }, this.getTransform = function (t, e) { return "translate(" + this.getX(e) + "," + this.getY(e) + ")" }, this.getWidth = function (t) { return t.counter / this.counterMax * this.colWidth }, this.getCounter = function (t) { return t.counter }, this.getTextAttrOpts = function () { return { x: this.labelX, y: this.labelY, "text-anchor": this.textAnchor, "alignment-baseline": this.alignmentBaseline } }, this.setBar = function (t, e, n, r, i) { var o = e; n && (o += "." + n), this.setBarSelection(t, o, r, i) }, this.draw = function () { function t() { var t = e.select(this); h(t, "rect", r, s), h(t, "rect", i, u), h(t, "text", null, l, c), h(t, "title", null, null, f) } this.beforeDraw(), this.calculateColWidthAndSpace(); var n, r = this.barBackClass, i = this.barFrontClass, o = this.colHeight, a = { "class": this.barGClass, transform: this.getTransform.bind(this) }, s = { "class": r, width: this.colWidth, height: o }, u = { "class": i, width: this.getWidth.bind(this), height: o }, l = this.getTextAttrOpts(), c = this.getText.bind(this), f = this.getLabel.bind(this), h = this.setBar.bind(this); this.barsG = this.group.selectAll("g.bar").data(this.dataToShow), this.setBarsG(a), this.barsG.each(t), n = this.barsG.enter().append("g").attr(a), this.setBarsGEnter(n, s, u, l, c, f), this.barsG.exit().remove() }, this.resize = function () { this.draw(), this.doUpdateSvgHeight && this.svg.style("height", this.getChartHeight()) }, this.adjustLabelSetting = function () { "middle" == this.labelAlign ? (this.labelX = this.halfColW, this.textAnchor = "middle") : "left" == this.labelAlign ? (this.labelX = this.labelMargin, this.textAnchor = "start") : "right" == this.labelAlign && (this.labelX = this.colWidth - this.labelMargin, this.textAnchor = "end"), this.labelY = this.halfColH }, this.sortFunc = function (t, e) { return e.counter - t.counter }, this.clearKeyStateHash = function () { var t; for (t in this.keyStateHash) delete this.keyStateHash[t]; this.keyStateHash.length = 0 } } var i = n(15); r.prototype = new i, r.prototype.setBackEnter = function (t, e) { return t.append("rect").attr(e) }, r.prototype.setFrontEnter = function (t, e) { return t.append("rect").attr(e) }, r.prototype.setTextEnter = function (t, e, n) { return t.append("text").attr(e).text(n) }, r.prototype.addKeyStateHash = function (t) { t && "undefined" == typeof this.keyStateHash[t] && (this.keyStateHash[t] = {}, this.keyStateHash[t].index = ++this.keyStateHash.length) }, r.prototype.buildDiscreteData = function (t) { var e, n, r, i, o = {}, a = []; for (t || (t = this.data), e = 0, n = t.length; n > e; e++) r = t[e], "number" == typeof o[r] ? o[r]++ : o[r] = 1, this.addKeyStateHash(r); for (i in o) a.push({ key: i, counter: o[i] }); this.discreteData = a }, r.prototype.init = function (t) { i.prototype.init.call(this, t), this.keyStateHash = { length: 0 } }, r.prototype.run = function (t) { i.prototype.run.call(this, t), this.buildDiscreteData(), "function" == typeof this.sortFunc && (this.discreteData = this.discreteData.sort(this.sortFunc)), this.resize() }, r.prototype.calculateColWidthAndSpace = function () { var t, n; 1 == this.numOfCol ? (this.colWidth = this.width, this.colSpace = 0) : (t = Math.floor(100 / this.numOfCol) - 1, n = (100 - t * this.numOfCol) / (this.numOfCol - 1), this.colWidth = Math.floor(this.width * t / 100), this.colSpace = Math.floor(this.width * n / 100)), this.halfColW = this.colWidth / 2, this.halfColH = this.colHeight / 2, this.counterExtent = e.extent(this.dataToShow, this.getCounter), this.counterSum = e.sum(this.dataToShow, this.getCounter), this.counterMin = this.counterExtent[0], this.counterMax = this.counterExtent[1], this.adjustLabelSetting() }, r.prototype.beforeDraw = function () { this.dataToShow = this.discreteData }, r.prototype.getX = function (t) { return 1 == this.numOfCol ? 0 : t % this.numOfCol * (this.colWidth + this.colSpace) }, r.prototype.getY = function (t) { return 1 == this.numOfCol ? (this.colHeight + this.rowSpace) * t : Math.floor(t / this.numOfCol) * (this.colHeight + this.rowSpace) }, r.prototype.getChartHeight = function () { var t = this.dataToShow.length; return this.getY(t - 1) + this.colHeight + this.rowSpace }, r.prototype.setBarsG = function (t) { return this.barsG.attr(t) }, r.prototype.setBarSelection = function (t, e, n, r) { var i; return t && e ? (i = t.select(e), n && i.attr(n), r && i.text(r), i) : null }, r.prototype.setBarsGEnter = function (t, e, n, r, i, o) { this.setBackEnter(t, e), this.setFrontEnter(t, n), this.setTextEnter(t, r, i), t.append("title").text(o) }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { "use strict"; function r() { this.numOfEntryToShow = null, this.groupRestWithOther = !0, this.usingRawData = !1, this.OTHER_LABEL = "Other", this.groupHash = {} } var i = n(29); r.prototype = new i, r.prototype.getKeyStateOther = function () { return this.keyStateHash[this.OTHER_LABEL] }, r.prototype.addKeyStateHash = function (t, e) { i.prototype.addKeyStateHash.call(this, t), t && (null === e ? delete this.keyStateHash[t].group : e && (this.keyStateHash[t].group = e)) }, r.prototype.buildKeyStateHash = function (t) { var e, n, r; for ("undefined" == typeof t && (t = this.discreteData), e = 0, n = t.length; n > e; e++) r = t[e].key, this.addKeyStateHash(r) }, r.prototype.buildDiscreteData = function () { this.usingRawData ? (this.discreteData = this.data, this.buildKeyStateHash()) : i.prototype.buildDiscreteData.call(this) }, r.prototype.setGroup = function (t, e) { var n, r; if ("string" == typeof t) this.addKeyStateHash(t, e), e && (e in this.groupHash ? this.groupHash[e]++ : this.groupHash[e] = 1); else if (Array.isArray(t)) for (n = 0, r = t.length; r > n; n++) this.setGroup(t[n], e); else t && "object" == typeof t && this.setGroup(t.key || t.name, e) }, r.prototype.clearGroupHash = function () { var t, e = this.groupHash; for (t in e) e.hasOwnProperty(t) && delete e[t] }, r.prototype.getDataToShowWithGroupByOther = function () { function t(t) { var e, n, r = { key: a, counter: 0 }; for (e = 0, n = t.length; n > e; e++) r.counter += t[e].counter; return r } var e, n, r, i, o = this.discreteData.length, a = this.OTHER_LABEL; return this.numOfEntryToShow && o > this.numOfEntryToShow ? (r = this.numOfEntryToShow - 1, i = this.discreteData.slice(0, r), e = this.discreteData.slice(r), this.setGroup(this.dataToShow, null), this.setGroup(e, a), n = t(e), i.push(n), this.addKeyStateHash(a)) : i = this.discreteData, i }, r.prototype.beforeDraw = function () { this.clearGroupHash(), this.groupRestWithOther ? this.dataToShow = this.getDataToShowWithGroupByOther() : this.numOfEntryToShow ? this.dataToShow = this.discreteData.slice(0, this.numOfEntryToShow) : this.dataToShow = this.discreteData }, t.exports = r }, function (t, e, n) { "use strict"; function r() { this.order = "topToBottom", this.numOfRowByCol = 3, this.doTransition = !0 } var i = n(30); r.prototype = new i, r.prototype.beforeDraw = function () { i.prototype.beforeDraw.call(this), this.numOfRowByCol = Math.ceil(this.dataToShow.length / this.numOfCol) }, r.prototype.getXLeftToRight = function (t) { return i.prototype.getX.call(this, t) }, r.prototype.getYLeftToRight = function (t) { return i.prototype.getY.call(this, t) }, r.prototype.getXTopToBottom = function (t) { return 1 == this.numOfCol ? 0 : Math.floor(t / this.numOfRowByCol) * (this.colWidth + this.colSpace) }, r.prototype.getYTopToBottom = function (t) { return 1 == this.numOfCol ? (this.colHeight + this.rowSpace) * t : t % this.numOfRowByCol * (this.colHeight + this.rowSpace) }, r.prototype.getX = function (t) { return "leftToRight" == this.order ? this.getXLeftToRight(t) : "topToBottom" == this.order ? this.getXTopToBottom(t) : void 0 }, r.prototype.getY = function (t) { return "leftToRight" == this.order ? this.getYLeftToRight(t) : "topToBottom" == this.order ? this.getYTopToBottom(t) : void 0 }, r.prototype.getChartHeightLeftToRight = function () { return i.prototype.getChartHeight.call(this) }, r.prototype.getChartHeightTopToBottom = function () { return this.getY(this.numOfRowByCol - 1) + this.colHeight + this.rowSpace }, r.prototype.getChartHeight = function () { return "leftToRight" == this.order ? this.getChartHeightLeftToRight() : "topToBottom" == this.order ? this.getChartHeightTopToBottom() : void 0 }, r.prototype.setBarsGWithTransition = function (t) { this.barsG.transition().attr(t) }, r.prototype.setBarsGWithoutTransition = function (t) { i.prototype.setBarsG.call(this, t) }, r.prototype.setBarSelectionWithTransition = function (t, e, n, r) { return t.select(e).transition().attr(n).text(r) }, r.prototype.setBarSelectionWithoutTransition = function (t, e, n, r) { return i.prototype.setBarSelection.call(this, t, e, n, r) }, r.prototype.setBarsG = function (t) { this.doTransition ? this.setBarsGWithTransition(t) : this.setBarsGWithoutTransition(t) }, r.prototype.setBarSelection = function (t, e, n, r) { return this.doTransition ? this.setBarSelectionWithTransition(t, e, n, r) : this.setBarSelectionWithoutTransition(t, e, n, r) }, t.exports = r }, function (t, e, n) { "use strict"; function r() { function t(t) { return "function" == typeof t.toString ? t.toString() : t ? t : "" } function e(t) { return "function" == typeof t.toJson ? t.toJson() : t ? t : {} } this.filterConditionAry = [], this.fCondAry = this.filterConditionAry, this.filterExpression = i(), this.fe = this.filterExpression, this.AND = this.fe.andSign, this.OR = this.fe.orSign, this.opHash = this.fe.operatorHash, this.defaultLogic = this.AND, this.setDefaultLogicToAND = function () { this.defaultLogic = this.AND }, this.setDefaultLogicToOR = function () { this.defaultLogic = this.OR }, this.getFeAry = function (n) { function r(t) { return this.fe.eq(s, t) } function i(t) { return this.fe.ne(s, t) } var o, a, s, u, l, c, f, h, d = []; for (f = 0, h = this.fCondAry.length; h > f; f++) o = this.fCondAry[f], o && (s = o.field, u = o.val, l = o.val2, c = o.operator, s && null !== u && void 0 !== u && (a = isNaN(u) || isNaN(l) ? Array.isArray(u) ? u.length > 0 ? c == this.AND ? this.fe.and(u.map(i.bind(this))) : this.fe.or(u.map(r.bind(this))) : null : c ? this.fe.exprGenerator(s, u, { operator: c }) : this.fe.eq(s, u) : this.fe.range(s, u, l), a && d.push(a))); return "string" == n ? d.map(t) : "json" == n ? d.map(e) : d }, this.filterGroupOfExpr = function (t, e, n) { var r, i, o; if (t && t.length) { for (r = 0, i = t.length; i > r; r++) { if (o = this.filterExprByHash(t[r], e), n == this.AND && !o) return !1; if (n == this.OR && o) return !0 } return n == this.OR ? !1 : !0 } return !0 }, this.filterExprByHash = function (t, e) { var n = t.field, r = t.value, i = t.operator, o = e[n]; if ("undefined" == typeof o) return !0; switch (i) { case this.opHash.EQUAL: if (o == r) return !0; break; case this.opHash.NOT_EQUAL: if (o != r) return !0; break; case this.opHash.GREATER: if (o > r) return !0; break; case this.opHash.GREATER_EQUAL: if (o >= r) return !0; break; case this.opHash.LESS: if (r > o) return !0; break; case this.opHash.LESS_EQUAL: if (r >= o) return !0; break; case this.opHash.LIKE: if (o.toLowerCase().indexOf(r.toLowerCase()) > -1) return !0 } return !1 }, this.toFunc = function (t) { var e = this.getFeAry(), n = this.fe.and; return this.defaultLogic == this.OR && (n = this.fe.or), "string" == t ? n(e).toString() : "json" == t ? n(e).toJson() : void 0 } } var i = n(33); r.prototype.addField = function (t, e, n) { t ? this.fCondAry.push("string" == typeof n ? { field: t, val: e, operator: n } : isNaN(n) ? { field: t, val: e } : { field: t, val: e, val2: n }) : console.error('Parameter "field" is missing!') }, r.prototype.removeField = function (t) { var e; for (e = 0; e < this.fCondAry.length; e++) this.fCondAry[e] && this.fCondAry[e].field != t || (this.fCondAry.splice(e, 1), e--) }, r.prototype.clearAll = function () { for (; this.fCondAry.length;) this.fCondAry.pop() }, r.prototype.getFieldAry = function () { function t(t) { return t.field } return this.fCondAry.map(t) }, r.prototype.filterByHash = function (t) { var e, n, r, i, o, a, s, u, l, c = this.getFeAry("json"); for (s = 0, u = c.length; u > s; s++) { if (e = c[s], n = e.expr, l = e.logicType, r = e.field, i = e.operator, o = e.value, a = this.defaultLogic == this.AND ? !0 : !1, n && l ? a = this.filterGroupOfExpr(n, t, l) : r && i && (a = this.filterExprByHash(e, t)), this.defaultLogic == this.AND && !a) return !1; if (this.defaultLogic == this.OR && a) return !0 } return this.defaultLogic == this.OR ? !1 : !0 }, r.prototype.toString = function () { return this.toFunc("string") }, r.prototype.toJson = function () { return this.toFunc("json") }, t.exports = r }, function (t, e, n) { "use strict"; function r(t) { function e(t, e, n) { function r(t) { var r; return r = n.isString === !0 ? !0 : n.isString === !1 ? !1 : isNaN(t) || null === e ? !0 : !1, r ? "'" + t.replace(/\\/g, "\\\\").replace(/'/g, "\\'") + "'" : t } function i() { return c ? r(a) + g.LESS_EQUAL + t + g.LESS_EQUAL + r(s) : t + u + r(e) } function o() { return c ? { expr: [{ field: t, value: a, operator: g.GREATER_EQUAL }, { field: t, value: s, operator: g.LESS_EQUAL }], logicType: d } : { field: t, value: e, operator: u } } if (void 0 === t || void 0 === e) return { toString: "", toJson: {} }; n || (n = {}); var a, s, u = n.operator, l = n.value2, c = !1; return l && !u && (e > l ? (a = l, s = e) : (a = e, s = l), c = !0), { toString: i, toJson: o } } function n(t, n) { return e(t, n, { operator: g.EQUAL }) } function r(t, n) { return e(t, n, { operator: g.NOT_EQUAL }) } function i(t, n) { return e(t, n, { operator: g.LESS }) } function o(t, n) { return e(t, n, { operator: g.LESS_EQUAL }) } function a(t, n) { return e(t, n, { operator: g.GREATER }) } function s(t, n) { return e(t, n, { operator: g.GREATER_EQUAL }) } function u(t, n, r) { return e(t, n, { value2: r }) } function l(t, n) { return e(t, n, { operator: g.LIKE }) } function c(t, e) { function n(t) { return t && t.toString && "function" == typeof t.toString ? t.toString() : t } function r(t) { return t && t.toJson && "function" == typeof t.toJson ? t.toJson() : t } function i() { var t = ""; return a && a.length ? (t = a.map(n).join(")" + e + "("), a.length > 1 ? "(" + t + ")" : a[0].toString()) : "" } function o() { return a && a.length ? a.length > 1 ? { expr: a.map(r), logicType: e } : a[0].toJson() : {} } var a; return t && t.length && (a = 1 == t.length && Array.isArray(t[0]) ? t[0] : Array.prototype.slice.call(t)), e || (e = d), { toString: i, toJson: o } } function f() { return c(arguments, d) } function h() { return c(arguments, p) } t || (t = {}); var d = t.AND || "AND", p = t.OR || "||", g = {}, m = {}; return g.EQUAL = t.EQUAL || "==", g.NOT_EQUAL = t.NOT_EQUAL || "!=", g.GREATER = t.GREATER || ">", g.GREATER_EQUAL = t.GREATER_EQUAL || ">=", g.LESS = t.LESS || "<", g.LESS_EQUAL = t.LESS_EQUAL || "<=", g.LIKE = t.LIKE || "~~", m[g.EQUAL] = n, m[g.NOT_EQUAL] = r, m[g.GREATER] = a, m[g.GREATER_EQUAL] = s, m[g.LESS] = i, m[g.LESS_EQUAL] = o, m[g.LIKE] = l, { eq: n, equal: n, equals: n, ne: r, notEqual: r, notEquals: r, lt: i, lessThan: i, gt: a, greaterThan: a, range: u, like: l, and: f, or: h, andSign: d, orSign: p, exprGenerator: e, operatorHash: g, operatorFuncHash: m, funcHash: m } } t.exports = r }, function (t, e, n) { "use strict"; function r() { this.doOptimization = !0, i.call(this) } var i = n(32); r.prototype = new i, r.prototype.addField = function (t, e, n) { var r = e, o = n; this.doOptimization && Array.isArray(e) && Array.isArray(n) && (n.length < e.length ? (r = n, o = this.AND) : (r = e, o = this.OR)), i.prototype.addField.call(this, t, r, o) }, t.exports = r }, function (t, e, n) {
    "use strict"; function r(t) {
        this.curFilterName = "default",
        this.fCondMapHash = {}, this.addFilter = function (t) { return t && "string" == typeof t ? (Array.isArray(this.fCondMapHash[t]) ? console.log("Key " + t + " exists already.") : this.fCondMapHash[t] = [], !0) : (console.error('Parameter "filterName" is missing or NOT valid.'), !1) }, this.removeFilter = function (t) { return t && "string" == typeof t ? (Array.isArray(this.fCondMapHash[t]) ? delete this.fCondMapHash[t] : console.log("Key " + t + " does NOT exist."), !0) : (console.error('Parameter "filterName" is missing or NOT valid.'), !1) }, this.switchFilter = function (t) { var e; return void 0 === t || t == this.curFilterName ? !0 : (t && "string" == typeof t || (t = this.curFilterName), this.curFilterName = t, this.fCondMapHash[t] || this.addFilter(t), e = this.fCondMapHash[t], e && Array.isArray(e) ? (this.fCondAry = e, !0) : (console.error('Filter "' + t + '" is NOT found!'), !1)) }
    } var i = n(34); r.prototype = new i, r.prototype.addField = function (t, e, n, r) { this.switchFilter(r) && i.prototype.addField.call(this, t, e, n) }, r.prototype.removeField = function (t, e) { this.switchFilter(e) && i.prototype.removeField.call(this, t) }, r.prototype.clearAll = function (t) { this.switchFilter(t) && i.prototype.clearAll.call(this) }, r.prototype.getFieldAry = function (t) { return this.switchFilter(t) ? i.prototype.getFieldAry.call(this) : [] }, r.prototype.filterByHash = function (t, e) { return this.switchFilter(e) ? i.prototype.filterByHash.call(this, t) : !0 }, r.prototype.toString = function (t) { return this.switchFilter(t) ? i.prototype.toString.call(this) : "" }, r.prototype.toJson = function (t) { return this.switchFilter(t) ? i.prototype.toJson.call(this) : {} }, t.exports = r
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (t, e, n) { (function (e, r) { function i(t) { function n() { x.animateForward(), L.style.display = "none", S.style.display = "block", j || s() } function i() { x.stopAnimation() } function a() { e.select(T).style("top", 0).transition().style("top", 100).duration(1e3).each("end", g) } function s() { g(), e.select(T).style("top", 100).transition().style("top", 0).duration(1e3) } function u() { x.toggleAnimationLoop() } function l() { P.locked ? D.className = "active" : D.className = "" } function c() { var t; P && P.ui && P.ui.brush && (x.stopAnimation(), t = x.brush.extent().map(function (t) { return t.getTime ? t.getTime() : t }), P.ui.brush.extent(t), P.trigger("lockButton:click"), l(), P.locked && f()) } function f() { N && N.trigger && P && (N.trigger("filter", { col: P.selected, range: null }), x.setBrushToFullRange()) } function h() { var t = function () { var t = window.innerWidth, e = 100, n = t; return { height: e, width: n, marginLeft: 55, marginRight: 150 } }; x.onDraggableAreaMoved = function () { var t = { col: x.colName, range: x.brush.extent() }; Array.isArray(t.range) && t.range.length > 1 && t.range[0] != t.range[1] && (x.isFullRangeBrush() && (t.range = null), N.trigger("filter", t)) }, x.endOfAnimation = function () { L.style.display = "block", S.style.display = "none" }; var n = t(), r = function () { x.resize(t()) }; n.parent = e.select(A), x.init(n), e.select(window).on("resize", r, !1), document.body.appendChild(M) } function d(t, e) { return t.length ? (x.colName = e, r.compact(r.pluck(t, e))) : [] } function p(t, e) { var n = d(t, e); n.length && x.run(n) } function g() { j ? m() : y() } function m() { j = !1, A.style.visibility = "hidden", x.stopAnimation(), I.style.display = "inline", D.style.display = "none", C.style.display = "none" } function y() { j = !0, A.style.visibility = "visible", I.style.display = "none", D.style.display = "inline", C.style.display = "inline" } function v(t) { var e, n; t && t.data && t.data.length && t.filter && t.filter.selected && (P = t.filter, p(t.data, P.selected), O && (y(), O = !1, e = P.fView, e.container.empty() || (n = e.container.node(), n.style.display = "none"), l())) } function _(e) { var n, r = t.schema, i = r.filter(function (t) { return "datetime" == t.type }); i && i.length && (n = i[0].name, h(), N = e, N.trigger("filter:add", n), N.on("filter:addDateTime", v)) } function b() { C.style.visibility = "visible" } function w() { C.style.visibility = "hidden" } var x = new o.TimeBrushPlusHistogram, M = document.createElement("div"), T = document.createElement("div"), E = document.createElement("div"), L = document.createElement("div"), S = document.createElement("div"), k = document.createElement("span"), Y = document.createElement("span"), A = document.createElement("div"), D = document.createElement("a"), C = document.createElement("span"), I = document.createElement("a"), N = null, P = null, O = !0, j = !0; return M.setAttribute("class", "timeChartHolder"), T.setAttribute("class", "timeChartInnerHolder"), E.setAttribute("class", "timeChartCtrlHolder"), A.setAttribute("class", "timeChartHistogram"), L.setAttribute("class", "timeChartPlayBtnHolder"), S.setAttribute("class", "timeChartPauseBtnHolder"), k.setAttribute("class", "glyphicon glyphicon-play"), Y.setAttribute("class", "glyphicon glyphicon-pause"), C.setAttribute("class", "icon-prohibited1"), I.setAttribute("class", "showLink"), D.setAttribute("href", "javascript:void(0);"), I.setAttribute("href", "javascript:void(0);"), D.appendChild(document.createTextNode("Lock")), I.appendChild(document.createTextNode("Show")), L.appendChild(k), S.appendChild(Y), E.appendChild(L), E.appendChild(S), E.appendChild(D), E.appendChild(I), T.appendChild(A), T.appendChild(C), M.appendChild(T), M.appendChild(E), L.addEventListener("click", n, !0), S.addEventListener("click", i, !0), D.addEventListener("click", c, !0), C.addEventListener("click", a, !0), I.addEventListener("click", s, !0), u(), t.on("filterGroupLoaded", _), T.addEventListener("mousemove", b, !0), T.addEventListener("mouseout", w, !0), { dateTimeFilter: P, filterGroup: N, run: p, timechart: x, toggleHistogram: g } } var o = n(110); t.exports = i }).call(e, n(2), n(4)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.adjustXAxisLabel = !0, this.displayBrushExtentLabel = !0, this.brushAdjustTimeoutKey = null, this.brushOutRangeTimeoutKey = null, this.dateTimeFormatHash = { year: e.time.format("%b %d %Y"), month: e.time.format("%b %d %-I:%M %p"), week: e.time.format("%b %d %-I:%M %p"), day: e.time.format("%b %d %-I:%M %p") }, this.adjustBrushExtentLabel = function (t) { if (!this.brush.empty() && (this.displayBrushExtentLabel || t)) { var e = this.brushGroup.select("rect.extent"), n = parseInt(e.attr("width")), r = parseInt(e.attr("x")), i = this.brushBarLeftText, o = this.brushBarRightText, a = i.node(), s = o.node(), u = a.offsetWidth, l = s.offsetWidth, c = a.offsetHeight, f = s.offsetHeight, h = u / 2, d = l / 2; n > h + d ? (i.attr("text-anchor", "middle"), o.attr("text-anchor", "middle")) : (i.attr("text-anchor", "end"), o.attr("text-anchor", "start")), i.attr("y", this.brushTextAttr.y), o.attr("y", this.brushTextAttr.y), "end" == i.attr("text-anchor") && u > this.marginLeft + r && i.attr("text-anchor", "middle"), "middle" == i.attr("text-anchor") && h > this.marginLeft + r && i.attr("text-anchor", "start"), "start" == o.attr("text-anchor") && l > this.histogramW - r - n + this.marginRight && o.attr("text-anchor", "middle"), "middle" == o.attr("text-anchor") && d > this.histogramW - r - n + this.marginRight && o.attr("text-anchor", "end"), "middle" == i.attr("text-anchor") && h > n && i.attr("y", i.attr("y") - f - this.brushTextAttr.y), "start" == i.attr("text-anchor") && ("start" == o.attr("text-anchor") && u > n || "middle" == o.attr("text-anchor") && u > n - d) && i.attr("y", i.attr("y") - f - this.brushTextAttr.y), "middle" == o.attr("text-anchor") && d > n && o.attr("y", o.attr("y") - c - this.brushTextAttr.y), "end" == o.attr("text-anchor") && ("end" == i.attr("text-anchor") && l > n || "middle" == i.attr("text-anchor") && l > n - h) && o.attr("y", o.attr("y") - c - this.brushTextAttr.y) } }, this.showHideBrushExtentLabels = function (t) { this.brushBarLeftText && this.brushBarRightText && (t ? (this.brushBarLeftText.style("visibility", "visible"), this.brushBarRightText.style("visibility", "visible")) : (this.brushBarLeftText.style("visibility", "hidden"), this.brushBarRightText.style("visibility", "hidden")), this.displayBrushExtentLabel = t) }, this.showBrushExtentLabels = function () { this.showHideBrushExtentLabels(!0) }, this.hideBrushExtentLabels = function () { this.showHideBrushExtentLabels(!1) } } var i = n(27); r.prototype = new i, r.prototype.init = function (t) { i.prototype.init.call(this, t), this.svg.on("mouseover", this.showBrushExtentLabels.bind(this)), this.svg.on("mouseout", this.hideBrushExtentLabels.bind(this)) }, r.prototype.setSelectedBars = function (t, e) { i.prototype.setSelectedBars.call(this, t, e), this.isDateTimeHistogram && this.brushBarLeftText && this.brushBarRightText && this.adjustBrushExtentLabel() }, r.prototype.initBrushBarTexts = function () { i.prototype.initBrushBarTexts.call(this), this.isDateTimeHistogram && this.hideBrushExtentLabels() }, r.prototype.updateXAxis = function () { if (i.prototype.updateXAxis.call(this), this.adjustXAxisLabel) { var t = this.axisG.selectAll("g.tick").select("text"), e = function (e, n) { return 0 === n ? "start" : n == t[0].length - 1 ? "end" : "middle" }; setTimeout(function () { t.style("text-anchor", e) }, 500) } }, r.prototype.initScalesAndHistogramData = function () { i.prototype.initScalesAndHistogramData.call(this), this.setTimeFormat() }, r.prototype.setTimeFormat = function () { var t = new Date(this.maxVal - this.minVal); e.time.year(t).getFullYear() > 1970 ? this.d3TimeFormat = this.dateTimeFormatHash.year : this.d3TimeFormat = this.dateTimeFormatHash.month }, r.prototype.adjustSelectedMinMax = function () { var t = this.getXScaleDomain(), e = t[0], n = t[1]; this.getSelectedMin() < e && this.setSelectedMin(e), this.getSelectedMax() > n && this.setSelectedMax(n), i.prototype.setBrushAndSelectedBars.call(this, this.selectedMin, this.selectedMax) }, r.prototype.isBrushOutsideOfHistogram = function () { var t = this.getXScaleDomain(), e = t[0], n = t[1]; return this.getSelectedMin() < e && this.getSelectedMax() < e || this.getSelectedMin() > n && this.getSelectedMax() > n }, r.prototype.adjustBrushOutOffRange = function () { this.isBrushOutsideOfHistogram() && (this.stopAnimation(), setTimeout(function () { this.setBrushToFullRange() }.bind(this), 500)) }, r.prototype.setBrushAndSelectedBars = function (t, e) { this.brush.empty() || !this.selectedMin && !this.selectedMax ? i.prototype.setBrushAndSelectedBars.call(this) : this.isBrushOutsideOfHistogram() ? (this.brushOutRangeTimeoutKey && clearTimeout(this.brushOutRangeTimeoutKey), this.brushOutRangeTimeoutKey = setTimeout(this.adjustBrushOutOffRange.bind(this), 1e3)) : (this.animationStatus.start || (this.brushAdjustTimeoutKey && clearTimeout(this.brushAdjustTimeoutKey), this.brushAdjustTimeoutKey = setTimeout(this.adjustSelectedMinMax.bind(this), 1e3)), i.prototype.setBrushAndSelectedBars.call(this, t, e)) }, r.prototype.setBrushToFullRange = function () { return i.prototype.setBrushToFullRange.call(this) ? (this.isDateTimeHistogram && this.brushBarLeftText && this.brushBarRightText && setTimeout(this.adjustBrushExtentLabel.bind(this), 3e3), !0) : !1 }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { "use strict"; function r() { this.isAllSelected = !0, this.selectAll = function (t) { function n(t) { r[t.key].disabled = !1, e.select(this).classed("disabled", !1) } var r = this.keyStateHash; this.barsG && this.barsG.each(n), t || (this.isAllSelected = !0, this.onBarClick(r)) }, this.selectNone = function (t) { function n(t) { r[t.key].disabled = !0, e.select(this).classed("disabled", !0) } var r = this.keyStateHash; this.isAllSelected = !1, this.barsG && this.barsG.each(n), t || this.onBarClick(r) }, this.selectThem = function (t, n) { function r(n) { var r = n.key, o = e.select(this); t.indexOf(r) > -1 ? (i[r].disabled = !1, o.classed("disabled", !1)) : (i[r].disabled = !0, o.classed("disabled", !0)) } var i = this.keyStateHash; this.barsG && this.barsG.each(r), this.isAllSelected = this.checkIsAllSelected(), n || this.onBarClick(i) }, this.toggleBar = function (t) { function n(e) { return e == t } var r, i = this.keyStateHash[t.key], o = e.event.shiftKey || e.event.ctrlKey; r = this.barsG.filter(n), this.isAllSelected && !o && this.selectNone(!0), i.disabled ? (o && this.selectNone(!0), r.classed("disabled", !1), i.disabled = !1) : (o && this.selectAll(!0), r.classed("disabled", !0), i.disabled = !0), this.isAllSelected = this.checkIsAllSelected(), this.onBarClick(i) }, this.checkIsAllSelected = function () { var t, e; if (this.dataToShow && this.dataToShow.length) for (t = 0, e = this.dataToShow.length; e > t; t++) if (this.keyStateHash[this.dataToShow[t].key].disabled) return !1; return !0 }, this.onBarClick = function (t) { console.log(t) }, this.getBarsGDisabled = function (t) { return this.keyStateHash[t.key].disabled }, this.getKeyStateHash = function () { return this.keyStateHash } } var i = n(28); r.prototype = new i, r.prototype.setBarsG = function (t) { var e = this.doTransition; this.doTransition = !1, i.prototype.setBarsG.call(this, t), this.barsG.classed("disabled", this.getBarsGDisabled.bind(this)), this.doTransition = e }, r.prototype.setBackEnter = function (t, e) { var n = i.prototype.setBackEnter.call(this, t, e); return n.on("click", this.toggleBar.bind(this)) }, r.prototype.setFrontEnter = function (t, e) { var n = i.prototype.setFrontEnter.call(this, t, e); return n.on("click", this.toggleBar.bind(this)) }, r.prototype.setTextEnter = function (t, e, n) { var r = i.prototype.setTextEnter.call(this, t, e, n); return r.on("click", this.toggleBar.bind(this)) }, r.prototype.setBarsGEnter = function (t, e, n, r, o, a) { i.prototype.setBarsGEnter.call(this, t, e, n, r, o, a), t.classed("disabled", this.getBarsGDisabled.bind(this)) }, r.prototype.selectedFieldsInGroup = function () { var t, e, n, r = this.getKeyStateHash(), i = !1; for (t in this.groupHash) if (r[t]) { r[t].disabled && (i = !0); for (e in r) n = r[e], "object" == typeof n && n.group == t && (n.disabled = i) } }, r.prototype.getKeyAry = function (t) { var e, n, r = this.getKeyStateHash(), i = []; this.selectedFieldsInGroup(); for (e in r) n = r[e], this.groupHash[e] || "object" != typeof n || (n.disabled === !0 && t ? i.push(e) : n.disabled === !0 || t || i.push(e)); return i }, t.exports = r }).call(e, n(2)) }, function (t, e, n) { "use strict"; function r() { this.CLIENT = "client", this.SERVER = "server", this.fCondMapHash = { client: [], server: [] }, this.addClientField = function (t, e, n) { this.addField(t, e, n, this.CLIENT) }, this.addServerField = function (t, e, n) { this.addField(t, e, n, this.SERVER) }, this.removeClientField = function (t) { this.removeField(t, this.CLIENT) }, this.removeServerField = function (t) { this.removeField(t, this.SERVER) }, this.clearAllClient = function () { this.clearAll(this.CLIENT) }, this.clearAllServer = function () { this.clearAll(this.SERVER) }, this.getClientFieldAry = function () { return this.getFieldAry(this.CLIENT) }, this.getServerFieldAry = function () { return this.getFieldAry(this.SERVER) }, this.toClientString = function () { return this.toString(this.CLIENT) }, this.toServerString = function () { return this.toString(this.SERVER) }, this.toClientJson = function () { return this.toJson(this.CLIENT) }, this.toServerJson = function () { return this.toJson(this.SERVER) }, this.filterClientByHash = function (t) { return this.filterByHash(t, this.CLIENT) }, this.filterServerByHash = function (t) { return this.filterByHash(t, this.SERVER) } } var i = n(35); r.prototype = new i, t.exports = r }, function (t, e, n) { "use strict"; var r = n(23), i = n(24), o = n(25), a = n(26), s = n(15), u = n(27), l = n(107), c = n(108), f = n(28), h = n(29), d = n(30), p = n(31), g = n(109), m = n(32), y = n(34), v = n(33), _ = n(35), b = n(111), w = { AnimatedBrushHistogram: r, BrushHistogram: i, Histogram: o, ResizableHistogram: a, Svg: s, TimeBrushHistogram: u, TimeBrushPlusHistogram: l, ClickableDiscreteChart: c, ColorDiscreteChart: f, DiscreteChart: h, DiscreteChartPlus: d, FlexibleDiscreteChart: p, ClientServerFilter: g, Filter: m, FilterPlus: y, FilterExpression: v, MultiFilter: _, DynamicStyle: b }; t.exports = w }, function (t, e, n) { "use strict"; function r(t) { function e() { document.getElementById(t) ? l = document.getElementById(t) : (l = document.createElement("style"), l.setAttribute("id", t), document.head.appendChild(l)) } function n(t, e) { var n, r = []; if (!t || !e) return console.error("selector or styles is missing!"), 0; if ("object" == typeof e) { for (n in e) r.push(n + ":" + e[n]); c[t] = r.join(";") + ";" } else "string" == typeof e && (c[t] = e) } function r(t) { c[t] && delete c[t] } function i() { var t, e, n = ""; for (t in c) e = c[t], n += t + "{" + e + "}\n"; l.innerHTML = n } function o(t, e) { n(t, e), i() } function a(t) { r(t), i() } function s() { return l.innerHTML } function u() { var t; for (t in c) delete c[t]; i() } var l, c = {}; return t || (t = "dynamicStyle"), e(), { add: o, addAndUpdateStyles: o, addStyles: n, remove: a, removeAndUpdateStyles: a, removeStyles: r, updateStyles: i, getInnerHTML: s, removeAllCss: u, clear: u } } t.exports = r }, function (t, e, n) {
    (function (e, n) {
        if (!r) var r = {}; r.polymaps || (r.polymaps = {}), function (i) {
            function o(t) { var e = t.indexOf(":"); return 0 > e ? t : { space: i.ns[t.substring(0, e)], local: t.substring(e + 1) } } function a(t, e) { if (t.row > e.row) { var n = t; t = e, e = n } return { x0: t.column, y0: t.row, x1: e.column, y1: e.row, dx: e.column - t.column, dy: e.row - t.row } } function s(t, e, n, r, i) { if (n = Math.max(n, Math.floor(e.y0)), r = Math.min(r, Math.ceil(e.y1)), t.x0 == e.x0 && t.y0 == e.y0 ? t.x0 + e.dy / t.dy * t.dx < e.x1 : t.x1 - e.dy / t.dy * t.dx < e.x0) { var o = t; t = e, e = o } o = t.dx / t.dy; var a = e.dx / e.dy, s = t.dx > 0, u = e.dx < 0; for (n = n; r > n; n++) { var l = o * Math.max(0, Math.min(t.dy, n + s - t.y0)) + t.x0; i(Math.floor(a * Math.max(0, Math.min(e.dy, n + u - e.y0)) + e.x0), Math.ceil(l), n) } } function u(t, e, n, r, i, o) { var u = a(t, e); e = a(e, n), t = a(n, t), u.dy > e.dy && (n = u, u = e, e = n), u.dy > t.dy && (n = u, u = t, t = n), e.dy > t.dy && (n = e, e = t, t = n), u.dy && s(t, u, r, i, o), e.dy && s(t, e, r, i, o) } function l() { } function c() { for (var t = 0; t < c.maps.length; t++) c.maps[t].resize() } function f(t, n, r) { function i(i) { i = t(i); var o = r > i, a = e.extent(t.range()), s = a[0]; a = a[1]; var u = o ? r - s : a - r; return 0 == u && (u = a - s), (o ? -1 : 1) * u * (n + 1) / (n + u / Math.abs(i - r)) + r } return i.distortion = function (t) { return arguments.length ? (n = +t, i) : n }, i.focus = function (t) { return arguments.length ? (r = +t, i) : r }, i.copy = function () { return f(t.copy(), n, r) }, i.nice = t.nice, i.ticks = t.ticks, i.tickFormat = t.tickFormat, e.rebind(i, t, "domain", "range") } i.version = "2.5.1"; var h = { x: 0, y: 0 }; i.ns = { svg: "http://www.w3.org/2000/svg", xlink: "http://www.w3.org/1999/xlink" }, i.id = function () { var t = 0; return function () { return ++t } }(), i.svg = function (t) { return document.createElementNS(i.ns.svg, t) }, i.transform = function (t, e, n, r, i, o) { var a, s, u, l = {}; return arguments.length || (t = 1, e = i = n = 0, r = 1, o = 0), l.zoomFraction = function (i) { return arguments.length ? (s = i, a = Math.floor(s + Math.log(Math.sqrt(t * t + e * e + n * n + r * r)) / Math.LN2), u = Math.pow(2, -a), l) : s }, l.apply = function (s) { var u = Math.pow(2, -s.zoom), l = Math.pow(2, s.zoom - a); return { column: (t * s.column * u + n * s.row * u + i) * l, row: (e * s.column * u + r * s.row * u + o) * l, zoom: s.zoom - a } }, l.unapply = function (s) { var u = Math.pow(2, -s.zoom), l = Math.pow(2, s.zoom + a); return { column: (s.column * u * r - s.row * u * n - i * r + o * n) / (t * r - e * n) * l, row: (s.column * u * e - s.row * u * t - i * e + o * t) / (n * e - r * t) * l, zoom: s.zoom + a } }, l.toString = function () { return "matrix(" + [t * u, e * u, n * u, r * u].join(" ") + " 0 0)" }, l.zoomFraction(0) }, i.cache = function (t, e) { function n(t) { c--, e && e(t), delete a[t.key], t.next ? t.next.prev = t.prev : (u = t.prev) && (u.next = null), t.prev ? t.prev.next = t.next : (s = t.next) && (s.prev = null) } function r() { for (var t = u; c > l && t; t = t.prev) t.lock || n(t) } var i = {}, o = {}, a = {}, s = null, u = null, l = 64, c = 0; return i.peek = function (t) { return a[[t.zoom, t.column, t.row].join("/")] }, i.load = function (e, n) { var r = [e.zoom, e.column, e.row].join("/"), i = a[r]; return i ? (i.prev && ((i.prev.next = i.next) ? i.next.prev = i.prev : u = i.prev, i.prev = null, i.next = s, s = s.prev = i), i.lock = 1, o[r] = i) : (i = { key: r, column: e.column, row: e.row, zoom: e.zoom, next: s, prev: null, lock: 1 }, t.call(null, i, n), o[r] = a[r] = i, s ? s.prev = i : u = i, s = i, c++, i) }, i.unload = function (t) { if (!(t in o)) return !1; var e = o[t]; return e.lock = 0, delete o[t], e.request && e.request.abort(!1) && n(e), e }, i.locks = function () { return o }, i.size = function (t) { return arguments.length ? (l = t, r(), i) : l }, i.flush = function () { return r(), i }, i.clear = function () { for (var t in a) { var n = a[t]; n.request && n.request.abort(!1), e && e(a[t]), n.lock && (n.lock = 0, n.element.parentNode.removeChild(n.element)) } return o = {}, a = {}, s = u = null, c = 0, i }, i }, i.queue = function () { function t() { a >= s || !o.length || (a++, o.pop()()) } function e(t) { for (var e = 0; e < o.length; e++) if (o[e] == t) return o.splice(e, 1), !0; return !1 } function n(t, e) { for (var n in e) t[n] = e[n]; return t } function r(n, r, i) { function s() { if (u = new XMLHttpRequest, u.open("GET", n, !0), i && (i.mimeType && u.overrideMimeType && u.overrideMimeType(i.mimeType), i.responseType && (u.responseType = i.responseType), i.xhrFields)) for (var e in i.xhrFields) u[e] = i.xhrFields[e]; u.onreadystatechange = function () { 4 == u.readyState && (a--, u.status < 300 && r(u), t()) }, u.send(null) } var u; return o.push(s), t(), { abort: function (t) { return e(s) ? !0 : t && u ? (u.abort(), !0) : !1 } } } var o = [], a = 0, s = 6; return { text: function (t, e, n) { return r(t, function (t) { t.responseText && e(t.responseText) }, { mimeType: n }) }, xml: function (t, e, i) { return r(t, function (t) { t.responseXML && e(t.responseXML) }, n({ mimeType: "application/xml" }, i)) }, json: function (t, e, i) { return r(t, function (t) { t.responseText && e(JSON.parse(t.responseText)) }, n({ mimeType: "application/json" }, i)) }, octetStream: function (t, e, i) { return r(t, function (t) { t.response && e(t.response) }, n({ mimeType: "application/octet-stream", responseType: "arraybuffer" }, i)) }, image: function (n, r, s) { function u() { l = document.createElement("img"), l.onerror = function () { a--, t() }, l.onload = function () { a--, s(l), t() }, l.src = r, n.setAttributeNS(i.ns.xlink, "href", r) } var l; return o.push(u), t(), { abort: function (t) { return e(u) ? !0 : t && l ? (l.src = "about:", !0) : !1 } } } } }(), i.layer = function (t, n) { function r(t) { e.select(t).style("display", null) } function o(t) { e.select(t).style("display", "none") } function a(t) { for (var e = T[0].nextSibling; t > m; m++) { for (var n = -M + 1; 1 >= n; n++) r(w.insertBefore(T[n], e)); for (n = x; n > 1; n--) o(T[n]); n = T[-M]; for (var i = -M; x > i;) T[i] = T[++i]; T[i] = n } } function s(t) { for (var e = T[0].nextSibling; m > t; m--) { for (var n = x - 1; n >= -1; n--) r(w.insertBefore(T[n], e)); for (n = M; -1 > n; n--) o(T[n]); n = T[x]; for (var i = x; i > -M;) T[i] = T[--i]; T[i] = n } } function c() { function t(t, n) { function r(t, e) { arguments.length < 2 && (e = d); var n = i.map.locationCoordinate(t, e), r = Math.pow(2, u - n.zoom); return { x: D.x * (r * n.column - f), y: D.y * (r * n.row - h) } } function o(t, e) { arguments.length < 2 && (e = p); var n = Math.pow(2, u); return i.map.coordinateLocation({ column: (t.x / D.x + f) / n, row: (t.y / D.y + h) / n, zoom: 0 }, p) } function a(t, e) { var n = o({ x: t, y: e }, p); return n = r(n, d), [Math.round(n.x), Math.round(n.y)] } function s() { return i.cartesianResample(a).inThresh(L).outThresh(outThresh).precision(d == p ? 0 : E) } var u = t.zoom, l = 0 > u ? 1 : 1 << u, f = t.column % l, h = t.row, d = c.displayProjection(), p = c.sourceProjection(); return 0 > f && (f += l), n || (t.pid = d.id()), { pointLocation: o, locationPoint: r, locationPath: e.geo.path().projection({ stream: s().preProject(function (t, e) { var n = r({ lon: t, lat: e }, p); return [n.x, n.y] }) }), sourcePath: e.geo.path().projection({ stream: s() }), purePath: e.geo.path().projection({ stream: function (t) { return { point: function (e, n) { var i = r({ lon: e, lat: n }); t.point(Math.round(2 * i.x) / 2, Math.round(2 * i.y) / 2) }, sphere: function () { t.sphere() }, lineStart: function () { t.lineStart() }, lineEnd: function () { t.lineEnd() }, polygonStart: function () { t.polygonStart() }, polygonEnd: function () { t.polygonEnd() } } } }) } } function n(t, e, r, i, o, a, s) { var u = (a[0] - o[0]) / 2; o = (a[1] - o[1]) / 2; for (var l, c, f, h, d = [], p = t << 1, g = e << 1, m = r + 1, y = !0, v = 0; 1 >= v; v++) { a = u * v, l = u * (v + 1); for (var _ = 0; 1 >= _; _++) c = o * _, f = o * (_ + 1), h = { type: "Polygon", coordinates: [[[a, c], [a, f], [l, f], [l, c], [a, c]]] }, i.area(h) > s ? (d.push.apply(d, n(p + v, g + _, m, i, [a, c], [l, f], s)), console.log("What an area!")) : y = !1 } return y || d.push({ x: t, y: e, z: r }), d } function o(e, n, r) { var i = 2 - B, o = 4 + B, a = v.load({ column: e, row: n, zoom: r }, t); if (!(a.ready || a.key in O)) { a.proxyRefs = {}; for (var s, u, l, c = 1; i >= c; c++) { u = !0; for (var f = 0, h = 1 << c; h >= f; f++) for (var d = 0; h >= d; d++) (l = v.peek(s = { column: (e << c) + d, row: (n << c) + f, zoom: r + c })) && l.ready ? (O[l.key] = v.load(s), l.proxyCount++, a.proxyRefs[l.key] = l) : u = !1; if (u) break } if (!u) for (c = 1; o >= c; c++) if ((l = v.peek(s = { column: e >> c, row: n >> c, zoom: r - c })) && l.ready) { O[l.key] = v.load(s), l.proxyCount++, a.proxyRefs[l.key] = l; break } } O[a.key] = a } var c = y.map(), d = c.zoom(), p = d - (d = Math.round(d)), g = c.size(), A = c.angle(), D = c.tileSize(), C = c.locationCoordinate(c.center()); if (m != d) { d > m ? a(d) : m > d ? s(d) : m = d; for (var I = -M; x >= I; I++) { var N = T[I]; N.setAttribute("class", "zoom" + (0 > I ? "" : "+") + I + " zoom" + (d + I)), N.setAttribute("transform", "scale(" + Math.pow(2, -I) + ")") } } I = Y ? "deg" : "", d = Y ? "px" : "", I = "translate(" + g.x / 2 + d + "," + g.y / 2 + d + ")" + (A ? "rotate(" + A / Math.PI * 180 + I + ")" : ""), w.setAttribute("transform", Y ? "" : I + (p ? "scale(" + Math.pow(2, p) + ")" : "") + (q ? q.zoomFraction(p) : "")), Y && e.select(w).style("-webkit-transform", I).style("-ms-transform", I).style("transform", I); var P = c.pointCoordinate(C, h); I = c.pointCoordinate(C, { x: g.x, y: 0 }), N = c.pointCoordinate(C, g), d = c.pointCoordinate(C, { x: 0, y: g.y }), p || A || q || (C.column = (Math.round(D.x * C.column) + (1 & g.x) / 2) / D.x, C.row = (Math.round(D.y * C.row) + (1 & g.y) / 2) / D.y), q && (P = q.unapply(P), I = q.unapply(I), N = q.unapply(N), d = q.unapply(d), C = q.unapply(C)), p = v.locks(); var O = {}; for (var j in p) p[j].proxyCount = 0; q = c.displayProjection(); var R = c.sourceProjection(); g = q.id(); var B = f ? f(P.zoom) - P.zoom : 0; if (b && B > -5 && 3 > B) if (1 == S || !S && q == R) B && (q = Math.pow(2, B), P.column *= q, P.row *= q, I.column *= q, I.row *= q, N.column *= q, N.row *= q, d.column *= q, d.row *= q, P.zoom = I.zoom = N.zoom = d.zoom += B), A = function (t, e, n) { var r = P.zoom; for (t = t; e > t; t++) o(t, n, r) }, q = P.zoom < 0 ? 1 : 1 << P.zoom, _ ? (u(P, I, N, 0, q, A), u(N, d, P, 0, q, A)) : (N = Math.floor((P.column + N.column) / 2), q = Math.max(0, Math.min(q - 1, Math.floor((I.row + d.row) / 2))), I = Math.min(4, P.zoom), N = N >> I << I, q = q >> I << I, A(N, N + 1, q)); else { var z = 50 / Math.max(D.x, D.y); if (displayCover = { type: "Polygon", coordinates: [[[P.column, P.row], [I.column, I.row], [N.column, N.row], [d.column, d.row], [P.column, P.row]]] }, sourceCover = V(z), numRows = sourceCover.length) for (I = P.zoom + B, q = 0 > I ? 1 : 1 << I, d = -1; ++d < numRows;) { var F = sourceCover[d].row; if (F >= 0 && q >= F) { N = sourceCover[d].columns, A = Math.floor(N.min) - 1; for (var U = Math.floor(N.max) ; ++A <= U;) { N = t({ column: A, row: F, zoom: I }, !0).sourcePath; var H = [D.x, D.y]; z = H[0] * H[1] * 3 / 4, H = n(A, F, I, N, [0, 0], H, z); for (var W = -1; N = H[++W];) o(N.x, N.y, N.z) } } } var V = function (t) { var n = {}, r = { point: function () { var t = { zoom: P.zoom }; if (B) var e = Math.pow(2, B); return function (r, i) { t.column = r, t.row = i; var o = c.locationCoordinate(c.coordinateLocation(t), R); B && (o.column *= e, o.row *= e, o.zoom += B); var a = Math.floor(o.row), s = n[a]; o = o.column, s ? o < s.min ? s.min = o : o > s.max && (s.max = o) : n[a] = { min: o, max: o } } }(), lineStart: l, lineEnd: l, polygonStart: l, polygonEnd: l, sphere: l }; e.geo.segmentize(displayCover, r, z), r = []; for (F in n) r.push({ row: F - 0, columns: n[F] }); if (r.length) { r.sort(function (t, e) { return t.row > e.row }); for (var i, o = 0, a = r[o].row; (i = r[++o]) && (i = i.row) ; a = i) if (i - a != 1) return console.error("Detected insufficient subdivisions to generate source tile cover from display tile cover, recursing with fewer subdivisions"), V(t / 2) } return r } } for (j in O) { N = O[j], q = Math.pow(2, N.level = N.zoom - C.zoom), I = k ? "px" : ""; var q = "translate(" + (N.x = D.x * (N.column - C.column * q)) + I + "," + (N.y = D.y * (N.row - C.row * q)) + I + ")"; k ? (e.select(N.element).style("-webkit-transform", q), e.select(N.element).style("-ms-transform", q), e.select(N.element).style("transform", q)) : N.element.setAttribute("transform", q) } for (j in p) j in O || (N = v.unload(j), N.element.parentNode.removeChild(N.element), y.unshow && y.unshow(N), delete N.proxyRefs); for (j in O) N = O[j], N.pid && N.pid != g && (y.reproject(N, t), N.pid = g), N.element.parentNode != T[N.level] && (r(T[N.level].appendChild(N.element)), y.show && y.show(N)); v.flush(), y.dispatch({ type: "move" }) } var f, d, p, g, m, y = {}, v = y.cache = i.cache(t, n).size(512), _ = !0, b = !0, w = i.svg("g"), x = 2, M = 4, T = {}, E = 5, L = outThresh = 10, S = 0, k = !0, Y = !1; w.setAttribute("class", "layer"); for (var A = -M; -1 >= A; A++) T[A] = w.appendChild(i.svg("g")); for (A = x; A >= 1; A--) T[A] = w.appendChild(i.svg("g")); return T[0] = w.appendChild(i.svg("g")), y.map = function (t) { if (!arguments.length) return p; if (p) { if (p == t) return w.parentNode.appendChild(w), y; p.off("move", c).off("resize", c), w.parentNode.removeChild(w) } return (p = t) && (p.container().appendChild(w), y.init && y.init(w), p.on("move", c).on("resize", c), c()), y }, y.container = function () { return w }, y.levels = function () { return T }, y.id = function (t) { return arguments.length ? (d = t, w.setAttribute("id", t), y) : d }, y.visible = function (t) { return arguments.length ? ((b = t) ? w.removeAttribute("visibility") : w.setAttribute("visibility", "hidden"), p && c(), y) : b }, y.transform = function (t) { return arguments.length ? (g = t, p && c(), y) : g }, y.zoom = function (t) { return arguments.length ? (f = "function" == typeof t || null == t ? t : function () { return t }, p && c(), y) : f }, y.xxx = function (t) { return arguments.length ? (S = t, y) : S }, y.cssTranslate = function (t) { return arguments.length ? (k = t, y) : k }, y.reproject = l, y.tile = function (t) { return arguments.length ? (_ = t, p && c(), y) : _ }, y.reload = function () { return v.clear(), p && c(), y }, y.dispatch = i.dispatch(y), y.on("load", function (t) { if (t.tile.proxyRefs) { for (var e in t.tile.proxyRefs) { var n = t.tile.proxyRefs[e]; --n.proxyCount <= 0 && v.unload(e) && (n.element.parentNode.removeChild(n.element), y.unshow && y.unshow(n)) } delete t.tile.proxyRefs } }), y }, i.image = function () { var t, e = i.layer(function (n) { var r = n.element = i.svg("image"), o = e.map().tileSize(); r.setAttribute("preserveAspectRatio", "none"), r.setAttribute("width", o.x), r.setAttribute("height", o.y), "function" == typeof t ? (r.setAttribute("opacity", 0), o = t(n), null != o ? n.request = i.queue.image(r, o, function (t) { delete n.request, n.ready = !0, n.img = t, r.removeAttribute("opacity"), e.dispatch({ type: "load", tile: n }) }) : (n.ready = !0, e.dispatch({ type: "load", tile: n }))) : (n.ready = !0, null != t && r.setAttributeNS(i.ns.xlink, "href", t), e.dispatch({ type: "load", tile: n })) }, function (t) { t.request && t.request.abort(!0) }); return e.url = function (n) { return arguments.length ? (t = "string" == typeof n && /{.}/.test(n) ? i.url(n) : n, e.reload()) : t }, e }, i.dblclick = function () { function t(t) { var n = e.zoom(); n = t.shiftKey ? Math.ceil(n) - n - 1 : 1 - n + Math.floor(n), "mouse" === i ? e.zoomBy(n, e.mouse(t)) : e.zoomBy(n) } var e, n, r = {}, i = "mouse"; return r.zoom = function (t) { return arguments.length ? (i = t, r) : i }, r.map = function (i) { return arguments.length ? (e && (n.removeEventListener("dblclick", t, !1), n = null), (e = i) && (n = e.container(), n.addEventListener("dblclick", t, !1)), r) : e }, r }, i.wheel = function () { function t() { n = null } function e(e) { var i, o = e.wheelDelta || -e.detail; if (o) if (s) { try { c.scrollTop = 1e3, c.dispatchEvent(e), o = 1e3 - c.scrollTop } catch (l) { } o *= 1 / 1024 } else i = Date.now(), i - a > 200 ? (o = o > 0 ? 1 : -1, a = i) : o = 0; if (o) switch (u) { case "mouse": i = r.mouse(e), n || (n = r.pointLocation(i)), r.off("move", t).zoomBy(o, i, n).on("move", t); break; case "location": r.zoomBy(o, r.locationPoint(n), n); break; default: r.zoomBy(o) } return e.preventDefault(), !1 } var n, r, i, o = {}, a = 0, s = !0, u = "mouse", l = document.createElement("div"), c = document.createElement("div"); return c.style.visibility = "hidden", c.style.top = "0px", c.style.height = "0px", c.style.width = "0px", c.style.overflowY = "scroll", l.style.height = "2000px", c.appendChild(l), document.body.appendChild(c), o.smooth = function (t) { return arguments.length ? (s = t, o) : s }, o.zoom = function (e, i) { return arguments.length ? (u = e, n = i, r && ("mouse" == u ? r.on("move", t) : r.off("move", t)), o) : u }, o.map = function (n) { return arguments.length ? (r && (i.removeEventListener("mousemove", t, !1), i.removeEventListener("mousewheel", e, !1), i.removeEventListener("MozMousePixelScroll", e, !1), i = null, r.off("move", t)), (r = n) && ("mouse" == u && r.on("move", t), i = r.container(), i.addEventListener("mousemove", t, !1), i.addEventListener("mousewheel", e, !1), i.addEventListener("MozMousePixelScroll", e, !1)), o) : r }, o }, i.arrow = function () { function t(t) { if (!(t.ctrlKey || t.altKey || t.metaKey)) { var e = Date.now(), n = 0, a = 0; switch (t.keyCode) { case 37: u.left || (l = e, u.left = 1, u.right || (n = h)); break; case 39: u.right || (l = e, u.right = 1, u.left || (n = -h)); break; case 38: u.up || (l = e, u.up = 1, u.down || (a = h)); break; case 40: u.down || (l = e, u.down = 1, u.up || (a = -h)); break; default: return } (n || a) && o.panBy({ x: n, y: a }), !i && u.left | u.right | u.up | u.down && (i = setInterval(r, f)), t.preventDefault() } } function e(t) { switch (l = Date.now(), t.keyCode) { case 37: u.left = 0; break; case 39: u.right = 0; break; case 38: u.up = 0; break; case 40: u.down = 0; break; default: return } !i || u.left | u.right | u.up | u.down || (i = clearInterval(i)), t.preventDefault() } function n(t) { switch (t.charCode) { case 45: case 95: o.zoom(Math.ceil(o.zoom()) - 1); break; case 43: case 61: o.zoom(Math.floor(o.zoom()) + 1); break; default: return } t.preventDefault() } function r() { if (o && !(Date.now() < l + c)) { var t = (u.left - u.right) * h, e = (u.up - u.down) * h; (t || e) && o.panBy({ x: t, y: e }) } } var i, o, a, s = {}, u = { left: 0, right: 0, up: 0, down: 0 }, l = 0, c = 250, f = 50, h = 16; return s.map = function (r) { return arguments.length ? (o && (a.removeEventListener("keypress", n, !1), a.removeEventListener("keydown", t, !1), a.removeEventListener("keyup", e, !1), a = null), (o = r) && (a = o.focusableParent(), a.addEventListener("keypress", n, !1), a.addEventListener("keydown", t, !1), a.addEventListener("keyup", e, !1)), s) : o }, s.speed = function (t) { return arguments.length ? (h = t, s) : h }, s }, i.hash = function () {
                function t() { var t = a(r); n !== t && location.replace(n = t) } function e() { location.hash !== n && o(r, (n = location.hash).substring(1)) && t() } var n, r, i = {}, o = function (t, e) { var n = e.split("/").map(Number); if (n.length < 3 || n.some(isNaN)) return !0; var r = t.size(); t.zoomBy(n[0] - t.zoom(), { x: r.x / 2, y: r.y / 2 }, { lat: Math.min(89.99999999, Math.max(-89.99999999, n[1])), lon: n[2] }) }, a = function (t) { var e = t.center(); t = t.zoom(); var n = Math.max(0, Math.ceil(Math.log(t) / Math.LN2)); return "#" + t.toFixed(2) + "/" + e.lat.toFixed(n) + "/" + e.lon.toFixed(n) }; return i.map = function (n) {
                    return arguments.length ? (r && (r.off("move", t), window.removeEventListener("hashchange", e, !1)), (r = n) && (r.on("move", t), window.addEventListener("hashchange", e, !1),
                    location.hash ? e() : t()), i) : r
                }, i.parser = function (t) { return arguments.length ? (o = t, i) : o }, i.formatter = function (t) { return arguments.length ? (a = t, i) : a }, i
            }, i.touch = function () { function t(t) { var e = -1, r = t.touches.length, i = Date.now(); if (1 == r && 300 > i - l) { var s = n.zoom(); n.zoomBy(1 - s + Math.floor(s), n.mouse(t.touches[0])), t.preventDefault() } for (l = i, o = n.zoom(), a = n.angle() ; ++e < r;) i = t.touches[e], c[i.identifier] = n.mouse(i), f[i.identifier] = n.pointLocation(n.mouse(i), n.displayProjection()) } function e(t) { switch (t.touches.length) { case 1: var e = t.touches[0]; n.zoomBy(0, n.mouse(e), f[e.identifier]), t.preventDefault(); break; case 2: var r = ""; try { r = "", e = t.touches[0]; var l = t.touches[1], c = n.mouse(e), h = n.mouse(l), d = { x: (c.x + h.x) / 2, y: (c.y + h.y) / 2 }, p = i.map.locationCoordinate(f[e.identifier], s.map().displayProjection()), g = i.map.locationCoordinate(f[l.identifier], s.map().displayProjection()), m = i.map.coordinateLocation({ row: (p.row + g.row) / 2, column: (p.column + g.column) / 2, zoom: 0 }, s.map().displayProjection()), y = Math.log(t.scale) / Math.LN2 + o - n.zoom(); r += "\nzoomBy=" + y, n.zoomBy(y, d, m); var v; u && (v = t.rotation / 180 * Math.PI + a, n.angle(v)), t.preventDefault(); break } catch (_) { debug(r + "\n" + _.message) } } } var n, r, o, a, s = {}, u = !0, l = 0, c = {}, f = {}; return window.addEventListener("touchmove", e, !1), s.touchmove = function (n, r) { t({ touches: [n, r] }), e({ touches: [n, r] }) }, s.rotate = function (t) { return arguments.length ? (u = t, s) : u }, s.map = function (e) { return arguments.length ? (n && (r.removeEventListener("touchstart", t, !1), r = null), (n = e) && (r = n.container(), r.addEventListener("touchstart", t, !1)), s) : n }, s }, i.interact = function () { var t = {}, e = i.drag(), n = i.wheel(), r = i.dblclick(), o = i.touch(), a = i.arrow(); return t.map = function (i) { return e.map(i), n.map(i), r.map(i), o.map(i), a.map(i), t }, t.touch = function () { return o }, t }, i.compass = function () { function t(t) { return L.setAttribute("class", "compass active"), v || (v = setInterval(e, C)), _ && x.panBy(_), A = Date.now(), f(t) } function e() { _ && Date.now() > A + D && x.panBy(_) } function n(t) { return t.shiftKey ? (w = { x0: x.mouse(t) }, x.focusableParent().focus(), f(t)) : void 0 } function r(t) { w && (w.x1 = x.mouse(t), O.setAttribute("x", Math.min(w.x0.x, w.x1.x)), O.setAttribute("y", Math.min(w.x0.y, w.x1.y)), O.setAttribute("width", Math.abs(w.x0.x - w.x1.x)), O.setAttribute("height", Math.abs(w.x0.y - w.x1.y)), O.removeAttribute("display")) } function o() { L.setAttribute("class", "compass"), w && (w.x1 && (x.extent([x.pointLocation({ x: Math.min(w.x0.x, w.x1.x), y: Math.max(w.x0.y, w.x1.y) }), x.pointLocation({ x: Math.max(w.x0.x, w.x1.x), y: Math.min(w.x0.y, w.x1.y) })]), O.setAttribute("display", "none")), w = null), v && (clearInterval(v), v = 0) } function a(t) { return function () { t ? this.setAttribute("class", "active") : this.removeAttribute("class"), _ = t } } function s(t) { return function (e) { L.setAttribute("class", "compass active"); var n = x.zoom(); return x.zoom(0 > t ? Math.ceil(n) - 1 : Math.floor(n) + 1), f(e) } } function u(t) { return function (e) { return x.zoom(t), f(e) } } function l() { this.setAttribute("class", "active") } function c() { this.removeAttribute("class") } function f(t) { return t.stopPropagation(), t.preventDefault(), !1 } function h(e) { var n = Math.SQRT1_2 * k, r = .7 * k, o = .2 * k, s = i.svg("g"), u = s.appendChild(i.svg("path")), l = s.appendChild(i.svg("path")); return u.setAttribute("class", "direction"), u.setAttribute("pointer-events", "all"), u.setAttribute("d", "M0,0L" + n + "," + n + "A" + k + "," + k + " 0 0,1 " + -n + "," + n + "Z"), l.setAttribute("class", "chevron"), l.setAttribute("d", "M" + o + "," + (r - o) + "L0," + r + " " + -o + "," + (r - o)), l.setAttribute("pointer-events", "none"), s.addEventListener("mousedown", t, !1), s.addEventListener("mouseover", a(e), !1), s.addEventListener("mouseout", a(null), !1), s.addEventListener("dblclick", f, !1), s } function d(t) { var e = .4 * k, n = e / 2, r = i.svg("g"), o = r.appendChild(i.svg("path")), a = r.appendChild(i.svg("path")), u = r.appendChild(i.svg("path")), h = r.appendChild(i.svg("path")); return o.setAttribute("class", "back"), o.setAttribute("d", "M" + -e + ",0V" + -e + "A" + e + "," + e + " 0 1,1 " + e + "," + -e + "V0Z"), a.setAttribute("class", "direction"), a.setAttribute("d", o.getAttribute("d")), u.setAttribute("class", "chevron"), u.setAttribute("d", "M" + -n + "," + -e + "H" + n + (t > 0 ? "M0," + (-e - n) + "V" + -n : "")), h.setAttribute("class", "fore"), h.setAttribute("fill", "none"), h.setAttribute("d", o.getAttribute("d")), r.addEventListener("mousedown", s(t), !1), r.addEventListener("mouseover", l, !1), r.addEventListener("mouseout", c, !1), r.addEventListener("dblclick", f, !1), r } function p(t) { var e = .2 * k, n = .4 * k, r = i.svg("g"), o = r.appendChild(i.svg("rect")), a = r.appendChild(i.svg("path")); return o.setAttribute("pointer-events", "all"), o.setAttribute("fill", "none"), o.setAttribute("x", -n), o.setAttribute("y", -.75 * n), o.setAttribute("width", 2 * n), o.setAttribute("height", 1.5 * n), a.setAttribute("class", "chevron"), a.setAttribute("d", "M" + -e + ",0H" + e), r.addEventListener("mousedown", u(t), !1), r.addEventListener("dblclick", f, !1), r } function g() { var t = k + 6, e = t, n = x.size(); switch (I) { case "top-left": break; case "top-right": t = n.x - t; break; case "bottom-left": e = n.y - e; break; case "bottom-right": t = n.x - t, e = n.y - e } L.setAttribute("transform", "translate(" + t + "," + e + ")"), O.setAttribute("transform", "translate(" + -t + "," + -e + ")"); for (var r in S) r == x.zoom() ? S[r].setAttribute("class", "active") : S[r].removeAttribute("class") } function m() { for (; L.lastChild;) L.removeChild(L.lastChild); if (L.appendChild(O), "none" != P) { b = L.appendChild(i.svg("g")), b.setAttribute("class", "pan"); var t = b.appendChild(i.svg("circle")); t.setAttribute("class", "back"), t.setAttribute("r", k), b.appendChild(h({ x: 0, y: -Y })).setAttribute("transform", "rotate(0)"), b.appendChild(h({ x: Y, y: 0 })).setAttribute("transform", "rotate(90)"), b.appendChild(h({ x: 0, y: Y })).setAttribute("transform", "rotate(180)"), b.appendChild(h({ x: -Y, y: 0 })).setAttribute("transform", "rotate(270)"), t = b.appendChild(i.svg("circle")), t.setAttribute("fill", "none"), t.setAttribute("class", "fore"), t.setAttribute("r", k) } else b = null; if ("none" != N) { if (y = L.appendChild(i.svg("g")), y.setAttribute("class", "zoom"), t = -.5, "big" == N) { S = {}; var e = x.zoomRange()[0]; for (t = 0; e <= x.zoomRange()[1]; e++, t++) (S[e] = y.appendChild(p(e))).setAttribute("transform", "translate(0," + -(t + .75) * k * .4 + ")") } e = "none" == P ? .4 : 2, y.setAttribute("transform", "translate(0," + k * (/^top-/.test(I) ? e + .4 * (t + .5) : -e) + ")"), y.appendChild(d(1)).setAttribute("transform", "translate(0," + -(t + .5) * k * .4 + ")"), y.appendChild(d(-1)).setAttribute("transform", "scale(-1)") } else y = null; g() } var y, v, _, b, w, x, M, T, E = {}, L = i.svg("g"), S = {}, k = 30, Y = 16, A = 0, D = 250, C = 50, I = "top-left", N = "small", P = "small", O = i.svg("rect"); return L.setAttribute("class", "compass"), O.setAttribute("class", "back fore"), O.setAttribute("pointer-events", "none"), O.setAttribute("display", "none"), E.radius = function (t) { return arguments.length ? (k = t, x && m(), E) : k }, E.speed = function (t) { return arguments.length ? (Y = t, E) : k }, E.position = function (t) { return arguments.length ? (I = t, x && m(), E) : I }, E.pan = function (t) { return arguments.length ? (P = t, x && m(), E) : P }, E.zoom = function (t) { return arguments.length ? (N = t, x && m(), E) : N }, E.map = function (t) { return arguments.length ? (x && (M.removeEventListener("mousedown", n, !1), M.removeChild(L), M = null, T.removeEventListener("mousemove", r, !1), T.removeEventListener("mouseup", o, !1), T = null, x.off("move", g).off("resize", g)), (x = t) && (M = x.container(), M.appendChild(L), M.addEventListener("mousedown", n, !1), T = M.ownerDocument.defaultView, T.addEventListener("mousemove", r, !1), T.addEventListener("mouseup", o, !1), x.on("move", g).on("resize", g), m()), E) : x }, E }, i.grid = function () { function t() { var t = r.firstChild, n = e.size(), o = e.pointLocation(h); e.pointLocation(n); var a = Math.pow(2, 4 - Math.round(e.zoom())); o.lat = Math.floor(o.lat / a) * a, o.lon = Math.ceil(o.lon / a) * a; for (var s; (s = e.locationPoint(o).x) <= n.x; o.lon += a) t || (t = r.appendChild(i.svg("line"))), t.setAttribute("x1", s), t.setAttribute("x2", s), t.setAttribute("y1", 0), t.setAttribute("y2", n.y), t = t.nextSibling; for (; (s = e.locationPoint(o).y) <= n.y; o.lat -= a) t || (t = r.appendChild(i.svg("line"))), t.setAttribute("y1", s), t.setAttribute("y2", s), t.setAttribute("x1", 0), t.setAttribute("x2", n.x), t = t.nextSibling; for (; t;) n = t.nextSibling, r.removeChild(t), t = n } var e, n = {}, r = i.svg("g"); return r.setAttribute("class", "grid"), n.map = function (i) { return arguments.length ? (e && (r.parentNode.removeChild(r), e.off("move", t).off("resize", t)), (e = i) && (e.on("move", t).on("resize", t), e.container().appendChild(r), e.dispatch({ type: "move" })), n) : e }, n }, i.stylist = function () { function t(t) { var o, a, s, u, l, c, f = t.features.length, h = n.length, d = r.length; for (l = 0; f > l; ++l) if (a = (o = t.features[l]).element) { for (o = o.data, c = 0; h > c; ++c) u = (s = n[c]).value, "function" == typeof u && (u = u.call(null, o)), null == u ? s.name.local ? a.removeAttributeNS(s.name.space, s.name.local) : a.removeAttribute(s.name) : s.name.local ? a.setAttributeNS(s.name.space, s.name.local, u) : a.setAttribute(s.name, u); for (c = 0; d > c; ++c) u = (s = r[c]).value, "function" == typeof u && (u = u.call(null, o)), null == u ? a.style.removeProperty(s.name) : a.style.setProperty(s.name, u, s.priority); if (u = e) { for ("function" == typeof u && (u = u.call(null, o)) ; a.lastChild;) a.removeChild(a.lastChild); null != u && a.appendChild(i.svg("title")).appendChild(document.createTextNode(u)) } } } var e, n = [], r = []; return t.attr = function (e, r) { return n.push({ name: o(e), value: r }), t }, t.style = function (e, n, i) { return r.push({ name: e, value: n, priority: arguments.length < 3 ? null : i }), t }, t.title = function (n) { return e = n, t }, t }, i.url = function (t, e) { function n(n) { var a = n.zoom < 0 ? 1 : 1 << n.zoom, s = n.column; if (o) s = n.column % a, 0 > s && (s += a); else if (0 > s || s >= a) return null; return t.replace(/{(.)}/g, function (t, o) { function a() { var t = i.map.coordinateLocation({ row: n.row, column: s + 1, zoom: n.zoom }, e()), r = Math.ceil(Math.log(n.zoom) / Math.LN2); return t.lat.toFixed(r) + "," + t.lon.toFixed(r) } function u() { var t = i.map.coordinateLocation({ row: n.row + 1, column: s, zoom: n.zoom }, e()), r = Math.ceil(Math.log(n.zoom) / Math.LN2); return t.lat.toFixed(r) + "," + t.lon.toFixed(r) } switch (o) { case "S": return r[(Math.abs(n.zoom) + n.row + s) % r.length]; case "Z": return n.zoom; case "X": return s; case "Y": return n.row; case "L": return u(); case "R": return a(); case "B": return u() + "," + a() } return o }) } var r = [], o = !0; return n.template = function (e) { return arguments.length ? (t = e, n) : t }, n.hosts = function (t) { return arguments.length ? (r = t, n) : r }, n.repeat = function (t) { return arguments.length ? (o = t, n) : o }, n }, i.map = function () { function t() { _ && (m < _[0] ? m = _[0] : m > _[1] && (m = _[C ? 0 : 1])), y = m - (m = Math.round(m)), v = Math.pow(2, y) } function r() { if (D) { var t = 45 / Math.pow(2, m + y - 3), e = Math.max(Math.abs(M * f.x + x * f.y), Math.abs(E * f.x + T * f.y)), n = Math.max(Math.abs(M * f.y + x * f.x), Math.abs(E * f.y + T * f.x)); if (latlon0 = A.xy2latlon({ y: k - e * t / p.y, x: L - n * t / p.x }), latlon1 = A.xy2latlon({ y: Y + e * t / p.y, x: S + n * t / p.x }), isNaN(latlon0.lat) || isNaN(latlon0.lon) || isNaN(latlon1.lat) || isNaN(latlon1.lon)) throw Error("NaN!"); g.lon = Math.max(latlon0.lon, Math.min(latlon1.lon, g.lon)), g.lat = Math.max(latlon0.lat, Math.min(latlon1.lat, g.lat)) } } function o(t) { for (var e = [], n = 0; n < t.length; n++) { var r; t: { for (r = 0; r < e.length; r++) if (e[r] === t[n]) { r = !0; break t } r = !1 } r || e.push(t[n]) } return e } var a, s, u = {}, l = h, f = h, p = { x: 256, y: 256 }, g = { lat: 37.76487, lon: -122.41948 }, m = 12, y = 0, v = 1, _ = [1, 18], w = 0, x = 1, M = 0, T = 1, E = 0, L = -(1 / 0), S = 1 / 0, k = -180, Y = 180, A = P_source = i.projections.mercator, D = [{ lat: A.minlat(k), lon: -(1 / 0) }, { lat: A.maxlat(Y), lon: 1 / 0 }]; u.locationCoordinate = function (t, e) { e || (e = A); var n = i.map.locationCoordinate(t, e), r = Math.pow(2, m); return n.column *= r, n.row *= r, n.zoom += m, n }, u.coordinateLocation = function (t, e) { return e || (e = A), i.map.coordinateLocation(t, e) }, u.coordinatePoint = function (t, e) { var n = Math.pow(2, m - e.zoom), r = Math.pow(2, m - t.zoom), i = (e.column * n - t.column * r) * p.x * v; return n = (e.row * n - t.row * r) * p.y * v, { x: f.x + x * i - M * n, y: f.y + M * i + x * n } }, u.pointCoordinate = function (t, e) { var n = Math.pow(2, m - t.zoom), r = (e.x - f.x) / v, i = (e.y - f.y) / v; return { column: t.column * n + (T * r - E * i) / p.x, row: t.row * n + (E * r + T * i) / p.y, zoom: m } }, u.locationPoint = function (t) { var e = Math.pow(2, m + y - 3) / 45, n = A.latlon2xy(g), r = A.latlon2xy(t); return t = (r.x - n.x) * e * p.x, e = (n.y - r.y) * e * p.y, { x: f.x + x * t - M * e, y: f.y + M * t + x * e } }, u.pointLocation = function (t) { var e = 45 / Math.pow(2, m + y - 3), n = (t.x - f.x) * e; return t = (t.y - f.y) * e, e = A.latlon2xy(g), A.xy2latlon({ x: e.x + (T * n - E * t) / p.x, y: e.y - (E * n + T * t) / p.y }) }; var C = !1, I = i.svg("rect"); I.setAttribute("visibility", "hidden"), I.setAttribute("pointer-events", "all"), u.container = function (t) { return arguments.length ? (a = t, e.select(a).classed("map", !0), a.appendChild(I), u.resize()) : a }, u.focusableParent = function () { for (var t = a; t; t = t.parentNode) if (t.tabIndex >= 0) return t; return window }, u.mouse = function (t) { var e = (a.ownerSVGElement || a).createSVGPoint(); if (0 > d && (window.scrollX || window.scrollY)) { var n = document.body.appendChild(i.svg("svg")); n.style.position = "absolute", n.style.top = n.style.left = "0px"; var r = n.getScreenCTM(); d = !(r.f || r.e), document.body.removeChild(n) } return d ? (e.x = t.pageX, e.y = t.pageY) : (e.x = t.clientX, e.y = t.clientY), e.matrixTransform(a.getScreenCTM().inverse()) }, u.screenPoint = function (t) { var e = t.x; return t = t.y, u.mouse({ pageX: e, pageY: t, clientX: e, clientY: t }) }, u.screenCenter = function () { var t, e, r; return t = n(u.container()), e = t.offset(), r = t.outerWidth(), t = t.outerHeight(), { x: e.left + r / 2, y: e.top + t / 2 } }, u.syncCenter = function (t) { return t.center(u.pointLocation(u.screenPoint(t.screenCenter()))), u }, u.size = function (t) { return arguments.length ? (s = t, u.resize()) : l }, u.resize = function () { return s ? (l = s, c.remove(u)) : (I.setAttribute("width", "100%"), I.setAttribute("height", "100%"), b = I.getBBox(), l = { x: b.width, y: b.height }, c.add(u)), I.setAttribute("width", l.x), I.setAttribute("height", l.y), f = { x: l.x / 2, y: l.y / 2 }, r(), u.dispatch({ type: "resize" }), u }, u.tileSize = function (t) { return arguments.length ? (p = t, u.dispatch({ type: "move" }), u) : p }, u.center = function (t) { return arguments.length ? (g = t, r(), u.dispatch({ type: "move" }), u) : g }, u.syncMove = function (t) { var e = u; e.on("move", function () { t.dispatch({ type: "move" }) }), t.on("move", function () { e.dispatch({ type: "move" }) }) }, u.syncRotates = [u], u.syncRotate = function (t) { for (u.syncRotates = t.syncRotates = o(u.syncRotates.concat(t.syncRotates)), t = 0; t < u.syncRotates.length; t++) { var e = u.syncRotates[t]; e.angle = function () { if (!arguments.length) return e.uangle(); for (var t = 0; t < u.syncRotates.length; t++) { var n = u.syncRotates[t]; n.uangle.apply(n, arguments), n.dispatch({ type: "move" }) } } } }, u.syncPans = [u], u.syncPanBy = function (t) { for (u.syncPans = t.syncPans = o(u.syncPans.concat(t.syncPans)), t = 0; t < u.syncPans.length; t++) u.syncPans[t].panBy = function () { for (var t = arguments, n = 0; n < u.syncPans.length; n++) e.timer(function () { var e = u.syncPans[n]; return function () { return e.upanBy.apply(e, t), !0 } }()) } }, u.panBy = u.upanBy = function (t) { var e = 45 / Math.pow(2, m + y - 3), n = t.x * e; return t = t.y * e, e = A.latlon2xy(g), u.center(A.xy2latlon({ x: e.x + (E * t - T * n) / p.x, y: e.y + (E * n + T * t) / p.y })) }, u.centerRange = function (t) { return arguments.length ? ((D = t) ? (k = D[0].lat > -90 ? A.miny(D[0].lat) : -(1 / 0), Y = D[0].lat < 90 ? A.maxy(D[1].lat) : 1 / 0, L = D[0].lon === -(1 / 0) ? -(1 / 0) : A.minx(D[0].lon), S = D[1].lon === 1 / 0 ? 1 / 0 : A.maxx(D[1].lon)) : (k = -(1 / 0), Y = 1 / 0, L = -(1 / 0), S = 1 / 0), r(), u.dispatch({ type: "move" }), u) : D }, u.zoom = function (e) { return arguments.length ? (m = e, t(), u.center(g)) : m + y }, u.syncZooms = [u], u.syncZoomBy = function (t) { for (u.syncZooms = t.syncZooms = o(u.syncZooms.concat(t.syncZooms)), t = 0; t < u.syncZooms.length; t++) { var e = u.syncZooms[t]; e.zoomBy = function (t, n, r) { var i = arguments; n && !r && (r = r = u.pointLocation(n)); for (var o = 0; o < u.syncZooms.length; o++) (function () { var t = u.syncZooms[o], e = i.slice(0); return r && (e[1] = t.locationPoint(r)), function () { return t.uzoomBy.apply(t, e), !0 } })()(); return e } } }, u.zoomBy = u.uzoomBy = function (e, n, r) { if (arguments.length < 2) return u.zoom(m + y + e); arguments.length < 3 && (r = u.pointLocation(n)), m = m + y + e, t(); var i = u.locationPoint(r); return u.upanBy({ x: n.x - i.x, y: n.y - i.y }) }, function (n) { var r = !1; n.killTransition = function () { r = !1 }, n.transition = function (i, o, a) { var s, u = Date.now(), l = !0; e.timer(function () { return l && (r = !0, l = !1), s = Math.min(1, (Date.now() - u) / i), m = o(s), t(), n.center(a(s)), 1 == s || !r }) } }(u), u.zoomRange = function (t) { return arguments.length ? (_ = t, u.zoom(m + y)) : _ }, u.extent = function (e) { if (!arguments.length) return [u.pointLocation({ x: 0, y: l.y }), u.pointLocation({ x: l.x, y: 0 })]; var n = u.locationPoint(e[0]), r = u.locationPoint(e[1]), i = Math.max((r.x - n.x) / l.x, (n.y - r.y) / l.y); return n = u.pointLocation({ x: (n.x + r.x) / 2, y: (n.y + r.y) / 2 }), m = m + y - Math.log(i) / Math.LN2, t(), u.center(n) }, u.angle = u.uangle = function (t, e, n) { if (!arguments.length) return w; var i = w - t; if (w = t, x = Math.cos(w), M = Math.sin(w), T = Math.cos(-w), E = Math.sin(-w), n || e) { e || (e = u.locationPoint(n)); var o = Math.cos(i); i = Math.sin(i); var a = u.locationPoint(g), s = e.x - a.x; a = e.y - a.y, g = u.pointLocation({ x: e.x - (o * s - i * a), y: e.y - (i * s + o * a) }) } return r(), u.dispatch({ type: "move" }), u }, u.add = function (t) { return t.map(u), u }, u.remove = function (t) { return t.map(null), u }, u.displayProjection = function (t, e) { if (!arguments.length) return A; if (arguments.length < 2 && (e = !0), t.id() == A.id()) throw Error("Projection set but id didn't change! Does the proj have an id?"); return A = t, e && r(), u.dispatch({ type: "move" }), u }, u.transitionDisplayProjection = function (t, n, r, o) { var a = i.projections.interpolate(A, t), s = Date.now(); arguments.length < 3 && (r = 1e3), arguments.length < 4 && (o = e.ease("cubic-in-out")), e.timer(function () { var t = Math.min(1, (Date.now() - s) / r); return u.displayProjection(a(o(t)), n), 1 == t }) }, u.sourceProjection = function (t) { return arguments.length ? (P_source = t, u) : P_source }; var N = []; return u.undoLocalZoom = function () { u.transitionDisplayProjection(N.pop(), !1) }, u.localZoomUnlisten = function () { e.select(u.container()).on("mousedown", null).on("mouseup", null).style("cursor", null) }, u.localZoomListen = function (t) { function n(t, e) { var n = u.pointLocation({ x: t, y: e }); return n = r.latlon2xy(n), [n.x, n.y] } var r = u.displayProjection(); N.push(r), e.select(u.container()).on("mousedown", function () { console.log("local zoom!"); var o = e.mouse(u.container()), a = n(o[0], o[1]); o = Math.abs(a[0] - n(o[0] + (o[0] > 200 ? -200 : 200), o[1])[0]), a = i.projections.fisheye(t).focus(a).radius(o), a = i.projections.compose(r, a), e.event.stopPropagation(), u.transitionDisplayProjection(a, !1) }, !0).on("mouseup", u.localZoomUnlisten).style("cursor", t ? "-webkit-zoom-out" : "-webkit-zoom-in").style("cursor", t ? "-moz-zoom-out" : "-moz-zoom-in") }, u.dispatch = i.dispatch(u, ["move", "resize"]), u }, c.maps = [], c.add = function (t) { for (var e = 0; e < c.maps.length; e++) if (c.maps[e] == t) return; c.maps.push(t) }, c.remove = function (t) { for (var e = 0; e < c.maps.length; e++) if (c.maps[e] == t) return void c.maps.splice(e, 1) }, window.addEventListener && (window.addEventListener("resize", c, !1), window.addEventListener("load", c, !1)), i.map.locationCoordinate = function (t, e) { var n = 1 / 360, r = e.latlon2xy(t); return { column: (r.x + 180) * n, row: (180 - r.y) * n, zoom: 0 } }, i.map.coordinateLocation = function (t, e) { var n = 45 / Math.pow(2, t.zoom - 3); return latlon = e.xy2latlon({ x: n * t.column - 180, y: 180 - n * t.row }) }; var d = /WebKit/.test(navigator.userAgent) ? -1 : 0; i.dispatch = function (t, e) { var n = {}; e = e || [], e = function () { rtrn = {}; for (var t = 0; t < e.length; t++) rtrn[e[t]] = !0; return rtrn }(), t.on = function (e, r) { for (var i = n[e] || (n[e] = []), o = 0; o < i.length; o++) if (i[o].handler == r) return t; return i.push({ handler: r, on: !0 }), t }, t.off = function (e, r) { var i = n[e]; if (i) for (var o = 0; o < i.length; o++) { var a = i[o]; if (a.handler == r) { a.on = !1, i.splice(o, 1); break } } return t }; var r = function (e) { var r = n[e.type]; if (r) { r = r.slice(); for (var i = 0; i < r.length; i++) { var o = r[i]; o.on && o.handler.call(t, e) } } }; return function (t) { if (t.type in e) { var n = t.type; t.type = "pre" + n, r(t), t.type = n, r(t), t.type = "post" + n, r(t), t.type = n } else r(t) } }, i.superLayer = function (t, e) { var n, r; return n = i.layer(t, e), r = function () { var t; return t = {}, function () { var e, r, i, o; r = {}, i = !1, o = n.cache.locks(); for (e in o) r[e] = !0, t[e] || (i = !0); return i = function (t, n) { for (e in t) if (!(e in n)) return !1; return !0 }, (i = !i(t, r) || !i(r, t)) ? (t = r, n.dispatch({ type: "retile" })) : void 0 } }(), n.on("move", r), n.isReady = function () { var t, e, r; r = n.cache.locks(); for (t in r) if (e = r[t], !e.ready) return !1; return !0 }, n }, i.drag = function () { function t(t) { t.shiftKey || (s = r.zoom(), r.killTransition(), velocity = function () { var t = []; return rtrn = function (n, r) { var i = dy = 0; if (null == r && (r = 1e3), t.length > 1) { var o = Date.now(), a = t[t.length - 1]; n = Math.min(n, o - t[0].t), o -= n; for (var s = t.length - 1; s >= 0; s--) if (t[s].t <= o) { if (s < t.length - 1) { i = t[s], s = t[s + 1]; var u = o - i.t; o = u / (u + (s.t - o)), from = e.interpolate({ x: i.x, y: i.y }, { x: s.x, y: s.y })(o), i = a.x - from.x, dy = a.y - from.y } break } } return { x: i / (n / r), y: dy / (n / r) } }, rtrn.observe = function (e) { e.t = Date.now(), t.push(e), t.length > 10 && t.shift() }, rtrn }, a = { x: t.clientX, y: t.clientY, velocity: velocity() }, r.focusableParent().focus(), t.preventDefault(), document.body.style.setProperty("cursor", "move", null)) } function n(t) { a && (r.panBy({ x: t.clientX - a.x, y: t.clientY - a.y }), a.x = t.clientX, a.y = t.clientY, a.velocity.observe({ x: a.x, y: a.y })) } var r, o, a, s, u = {}, l = !0, c = 500, f = 3, h = e.ease("poly", .5), d = 200; return u.map = function (e) { return arguments.length ? (r && (o.removeEventListener("mousedown", t, !1), o = null), (r = e) && (o = r.container(), o.addEventListener("mousedown", t, !1)), u) : r }, u.inertia = function (t) { return arguments.length ? (l = t, u) : l }, u.duration = function (t) { return arguments.length ? (c = t, u) : c }, u.friction = function (t) { return arguments.length ? (f = t, u) : f }, u.ease = function (t) { return arguments.length ? (h = t, u) : h }, u.dt = function (t) { return arguments.length ? (d = t, u) : d }, window.addEventListener("mousemove", n, !1), window.addEventListener("mouseup", function (t) { if (s != r.zoom() && (s = r.zoom(), u.dispatch({ type: "zoomend" })), a) { if (l) { var i, o, p, g = Date.now(), m = { x: 0, y: 0 }, y = a.velocity(d, c / f), v = m.x, _ = m.y, b = e.interpolate(m, y); a = null, e.timer(function () { return m = m, y = y, a ? !0 : (p = Math.min(1, (Date.now() - g) / c), i = b(h(p)), o = { x: i.x - v, y: i.y - _ }, v = i.x, _ = i.y, r.panBy(o), 1 == p) }) } else n(t); a = null, document.body.style.removeProperty("cursor") } }, !1), u.dispatch = i.dispatch(u), u }, i.moveState = function () { var t, e, n, r, i, o; return n = null, o = i = !1, r = {}, e = { premove: function () { return i = !0, t() }, preresize: function () { return o = !0, t() }, postmove: function () { return i = !1 }, postresize: function () { return o = !1 } }, r.state = {}, r.moving = function () { return i }, r.resizing = function () { return o }, r.clear = t = function () { return r.state = {} }, r.map = function (t) { var r, i, o; if (!arguments.length) return n; if (n) for (r in e) i = e[r], n.off(r, i); if (n = t) { o = []; for (r in e) i = e[r], o.push(n.on(r, i)); return o } }, r }, i.geoJson = function (t) { function n(t, e, n) { return t.type in w && w[t.type](t, e, n) } function r() { var t, e, r, i, o, a, s, l = u.map().zoom(), c = u.cache.locks(); if ("fixed" == f) { for (t in c) if ((e = c[t]).scale != l) { for (s = "scale(" + Math.pow(2, e.zoom - l) + ")", i = -1, o = (r = e.features).length; ++i < o;) n((a = r[i]).data.geometry, a.element, s); e.scale = l } } else for (t in c) { for (i = -1, o = (r = (e = c[t]).features).length; ++i < o;) n((a = r[i]).data.geometry, a.element, ""); delete e.scale } } var o, a, s, u = i.layer(function (n, r) { function a(t) { var o = [], a = r(n); a.sourcePath(f); var s = a[h ? "purePath" : d ? "sourcePath" : "locationPath"]; if (p && i.superGeoJson.project(function (t) { var e = p(t); t[0] = e[0], t[1] = e[1] })(t), d) { var l = a.locationPoint, c = map.sourceProjection(); i.superGeoJson.boundAndProject(t, function (t) { var e = l({ lon: t[0], lat: t[1] }, c); t[0] = e.x, t[1] = e.y }) } else i.superGeoJson.bound(t); s.context(v), g ? (e.select(b).datum(t), s(t), v.stroke()) : (n.clip(a), u.toSVG(t, n.g, s, o, n)), n.ready = !0, o.push.apply(n.features, o), u.dispatch({ type: "load", tile: n, features: o }) } var l = u.map().tileSize(), c = _ ? 1 : 0, f = { type: "Polygon", coordinates: [[[-c, -c], [-c, l.y + 2 * c], [l.x + 2 * c, l.y + 2 * c], [l.x + 2 * c, -c], [-c, -c]]] }, v = null; if (g) { c = n.element = i.svg("foreignObject"); var b = n.element.canvas = c.appendChild(document.createElement("canvas")), w = b.width = l.x; l = b.height = l.y, c.setAttribute("width", w), c.setAttribute("height", l), b.setAttribute("width", w), b.setAttribute("height", l), v = b.getContext("2d"), v.fillStyle = "white", v.strokeStyle = "black" } else { if (l = n.element = i.svg("g"), c = n.clipId = "clippath" + i.id(), n.g = l.insertBefore(i.svg("g"), l.firstChild), m) var x = e.select(l.insertBefore(i.svg("path"), l.firstChild)).attr("class", "rectile"); if (y) var M = e.select(n.element).append("path").attr("class", "sol"); var T = e.select(l).append("clipPath").attr("id", c).attr("class", "clipPath").each(function () { e.select(this).append("rect") }).append("path"); n.clipHref = "url(#" + c + ")", n.clip = function (t) { t = t.sourcePath(f), g || (T.attr("d", t), m && x.style("stroke", "none").attr("d", t), y && M.style("stroke", "none").attr("d", t)) } } n.features = [], null != o ? n.request = t("function" == typeof o ? o(n) : o, a, n) : a({ type: "FeatureCollection", features: s || [] }) }, function (t) { t.request && t.request.abort(!0) }), l = u.container(), c = !0, f = "auto", h = !0, d = !1, p = null, g = !(a = !0), m = !0, y = !1, v = null, _ = !1, b = !1; l.setAttribute("fill-rule", "evenodd"), arguments.length || (t = i.queue.json); var w = { Point: function (t, e, n) { t = t.coordinates, e.setAttribute("transform", "translate(" + t.x + "," + t.y + ")" + n) }, MultiPoint: function (t, e, n) { t = t.coordinates; var r = -1, i = o.length; e = e.firstChild; for (var o; ++r < i;) o = t[r], e.setAttribute("transform", "translate(" + o.x + "," + o.y + ")" + n), e = e.nextSibling } }; u.url = function (t) { if (!arguments.length) return o; var e = function () { return u.map().displayProjection() }; return o = "string" == typeof t && /{.}/.test(t) ? i.url(t, e) : t, null != o && (s = null), "string" == typeof o && u.tile(!1), u.reload() }, u.features = function (t) { return arguments.length ? ((s = t) && (o = null, u.tile(!1)), u.reload()) : s }, u.clip = function (t) { if (!arguments.length) return c; c = t; var e = u.cache.locks(); for (var n in e) c ? e[n].element.setAttribute("clip-path", e[n].clipHref) : e[n].element.removeAttribute("clip-path"); return u }; var x = u.tile; u.tile = function (t) { return arguments.length && !t && u.clip(t), x.apply(u, arguments) }; var M = u.map; return u.map = function () { return M.apply(u, arguments) }, u.rectile = function (t) { return arguments.length ? (m = t, u) : t }, u.sol = function (t) { return arguments.length ? (y = t, u) : t }, u.scale = function (t) { return arguments.length ? ((f = t) ? u.on("move", r) : u.off("move", r), u.map() && r(), u) : f }, u.show = function (t) { return c ? t.element.setAttribute("clip-path", t.clipHref) : t.g.removeAttribute("clip-path"), u.dispatch({ type: "show", tile: t, features: t.features }), u }, u.reshow = function () { var t = u.cache.locks(); for (var e in t) u.show(t[e]); return u }, u.rescales = function (t) { return arguments.length ? (w = t, u) : w }, u.toSVG = function (t, n, r, i, o) { if (!("geometry" in t) || t.geometry) { if ("FeatureCollection" != t.type) throw Error("invalid type"); v && r.interpolate("basis"), t = o.update = e.select(n).selectAll("path").data(t.features), t.exit().remove(), n = t.enter().append("path"), i && n.each(function (t) { i.push({ element: this, data: t }) }); var a = []; t.each(function (t, e) { a[e] = r(t), "nullnull" == a[e] && console.log("nullnull") }), t.attr("d", function (t, e) { return a[e] }) } }, u.canvas = function (t) { return arguments.length ? (a = !(g = t), u) : u.canvas }, u.interpolate = function (t) { return arguments.length ? (v = t, u) : v }, u.dilateClipPath = function (t) { return arguments.length ? (_ = t, u) : _ }, u.toLatLon = function (t) { return arguments.length ? (p = t, u) : p }, u.mercatorTiles = function (t, n) { if (!arguments.length) return b; b = t; var r = e.geo.mercator().scale(6378137).translate([0, 0]); return p = function (t) { return r.invert([t[0], n ? -t[1] : t[1]]) }, u }, u.reproject = function (t, n) { var r = n(t), i = r[h ? "purePath" : d ? "sourcePath" : "locationPath"]; if (v && i.interpolate(v), a) t.clip(r), t.update.attr("d", i); else { r = t.element.canvas; var o = r.getContext("2d"); o.clearRect(0, 0, r.width, r.height), i.context(o), i(e.select(r).datum()), o.stroke() } }, u }; var p; i.superGeoJson = function (t) { var n, r, o, a, s, u, l, c; return a = i.geoJson(t), s = function (t) { var e; return e = function (n) { var r, i, o, a; if (!n.type) { if (n[0] instanceof Array) { for (a = [], i = 0, o = n.length; o > i; i++) r = n[i], a.push(e(r)); return a } return t(n) } switch (n.type) { case "FeatureCollection": for (o = n.features, a = [], r = 0, i = o.length; i > r; r++) n = o[r], a.push(e(n)); return a; case "Feature": if (r = n.geometry) { if (r.coordinates) return e(r.coordinates); if (r = r.geometries) { for (a = [], i = 0, o = r.length; o > i; i++) n = r[i], a.push(e(n.coordinates)); return a } } break; case "GeometryCollection": throw Error("unsupported"); default: return e(n.coordinates) } } }, i.superGeoJson.bound = s(function (t) { return t[0] = Math.min(Math.max(t[0], -180), 180), t[1] = Math.min(Math.max(t[1], -90), 90) }), i.superGeoJson.boundAndProject = function (t, e) { return s(function (t) { return t[0] = Math.min(Math.max(t[0], -180), 180), t[1] = Math.min(Math.max(t[1], -90), 90), e(t) })(t) }, i.superGeoJson.project = s, c = function () { var t; return t = function (t) { return e.geo.path().projection(function (e) { return e = t(e), [e.x, e.y] }) }, { d3one: function (n, r, o, a) { switch (i.superGeoJson.bound(n), o = t(o), n.type) { case "FeatureCollection": return r = e.select(r).append("path").attr("d", o(n)).node(), a.push({ element: r, data: n }); default: throw Error("invalid type") } }, d3many: function (n, r, o, a) { switch (i.superGeoJson.bound(n), o = t(o), n.type) { case "FeatureCollection": return e.select(r).selectAll("g").data(n.features).enter().append("g").append("path").attr("d", o).on("click", function (t) { return console.log(t.properties) }).each(function (t) { return a.push({ element: this, data: t }) }); default: throw Error("invalid type") } }, d3manycouples: function (n, r, o, a) { var s; switch (i.superGeoJson.bound(n), s = t(o), n.type) { case "FeatureCollection": return e.select(r).selectAll("g").data(n.features).enter().append("g").each(function (t) { return a.push({ element: this, data: t }) }).each(function () { var t, n, r, i, o; for (i = [1, 2], o = [], n = 0, r = i.length; r > n; n++) t = i[n], o.push(e.select(this).append("path").attr("d", s).attr("class", "couple-" + t).on("click", function (t) { return console.log(t.properties) })); return o }); default: throw Error("invalid type") } }, "default": a.toSVG } }(), a.draw = function (t) { if (t = c[t], !t) throw Error("invalid draw"); return a.toSVG = t, a }, a.on("load", function (t) { var n, i, o, a, s, u; for (s = t.features, u = [], o = 0, a = s.length; a > o; o++) i = s[o], u.push((n = r(i.data, t.tile.zoom)) ? e.select(i.element).attr("class", n) : void 0); return u }), a.rescales({}), u = [], l = !1, n = {}, o = [], a.booleanClasses = function (t) { return arguments.length ? (n = t, a) : n }, a.propertyClasses = function (t, e) { return null == e && (e = !0), arguments.length ? (u = t, l = e, a) : u }, a.functionClasses = function (t) { return arguments.length ? (o = t, a) : o }, r = function (t, e) { var r, i, a, s, c; for (r = [], s = t.properties, a = 0, c = u.length; c > a; a++) i = u[a], s && i in s && r.push((l ? i + "-" : "") + s[i]); for (s = 0, a = n.length; a > s; s++) i = n[s], i.isTrue(t) && r.push(i["class"]); for (i = 0, s = o.length; s > i; i++) a = o[i], (a = a(t, e)) && r.push(a); return r.forEach(function (t) { return p(t) }), r.join(" ") }, a }, p = function () { var t, e, n; return t = /[-_a-zA-Z]/, e = /[_a-zA-Z0-9-]/, n = function (n, r) { return (n ? e : t).test(r) }, function (t) { var e, r, i; for (i = -1, r = ""; ++i < t.length;) r += n(i, e = t.charAt(i)) ? e : "_"; return r } }(), i.projections = function () {
                var t, e; return t = function () { var t; return t = Math.PI / 180, function (e) { return e * t } }(), e = function () { var t, e; return e = function (t) { return 360 / Math.PI * Math.atan(Math.exp(t * Math.PI / 180)) - 90 }, t = function (t) { return 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360)) }, { _y2lat: e, _lat2y: t, xy2latlon: function (t) { return { lat: e(t.y), lon: t.x } }, latlon2xy: function (e) { return { y: t(e.lat), x: e.lon } }, maxlat: function (t) { return e(t) }, minlat: function (t) { return e(t) }, maxy: function (e) { return t(e) }, miny: function (e) { return t(e) }, maxx: function (t) { return t }, minx: function (t) { return t }, maxlon: function (t) { return t }, minlon: function (t) { return t }, id: function () { return "mercator" } } }(), {
                    wgs84: { xy2latlon: function (t) { return { lon: t.x, lat: t.y } }, latlon2xy: function (t) { return { x: t.lon, y: t.lat } }, maxlat: function (t) { return t }, minlat: function (t) { return t }, maxy: function (t) { return t }, miny: function (t) { return t }, maxx: function (t) { return t }, minx: function (t) { return t }, maxlon: function (t) { return t }, minlon: function (t) { return t }, id: function () { return "wgs84" } }, mercator: e, swercator: function (n, r) { var i; return i = function (t) { return (Math.random() - .5) * t * 2 }, n || (n = i(15)), r || (r = i(10)), arguments.length < 2 && (r = 1), { xy2latlon: function (i) { return Math.abs(i.x) !== 1 / 0 && (i = { y: i.y - n * Math.sin(t(i.x) * r), x: i.x }), e.xy2latlon(i) }, latlon2xy: function (i) { return i = e.latlon2xy(i), Math.abs(i.x) !== 1 / 0 && (i.y += n * Math.sin(t(i.x) * r)), i }, id: function () { return "swercator-" + n + "-" + r }, maxlat: function (t) { return e._y2lat(t + n) }, minlat: function (t) { return e._y2lat(t - n) }, maxy: function (t) { return e._lat2y(t) + n }, miny: function (t) { return e._lat2y(t) - n }, maxx: function (t) { return t }, minx: function (t) { return t }, maxlon: function (t) { return t }, minlon: function (t) { return t } } }, shercator: function (t, n) { var r, i, o; i = {}; for (r in e) o = e[r], i[r] = o; return i.xy2latlon = function (r) { return e.xy2latlon({ x: r.x - t, y: r.y - n }) }, i.latlon2xy = function (r) { var i; return { x: (i = e.latlon2xy(r)).x + t, y: i.y + n } }, i.id = function () { return "shercator-" + t + "-" + n }, i }, fisheye: function (t) {
                        var e, n, r, i, o, a, s, u; return s = u = 0 / 0, i = [0, 0], a = 2, e = (a - 1) / s, o = function (t) { var e, n, r, o, l; return e = i[0], n = i[1], o = e - t.x, l = n - t.y, r = o * o + l * l, r > u ? t : (t = (1 - Math.sqrt(r) / s) * (a - 1) + 1, { x: e - o * t, y: n - l * t }) }, n = function (t) { var n, r, o, s, l; return n = i[0], r = i[1], s = n - t.x, l = r - t.y, o = s * s + l * l, o > u ? t : (t = Math.sqrt(o), t = (a - Math.sqrt(a * a - 4 * e * t)) / (2 * e) / t, { x: n - t * s, y: r - t * l }) }, r = {
                            forward: t ? n : o, backward: t ? o : n, radius: function (t) {
                                return arguments.length ? (s = t,
                                u = s * s, e = (a - 1) / s, r) : s
                            }, k: function (t) { return arguments.length ? (a = t, e = (a - 1) / s, r) : a }, focus: function (t) { return arguments.length ? (i = t, r) : i }, id: function () { return s + "-" + a + "-" + i + "-" }
                        }, r.radius(100), r.k(2), r
                    }, compose: function (t, e) { return { xy2latlon: function (n) { return t.xy2latlon(e.backward(n)) }, latlon2xy: function (n) { return e.forward(t.latlon2xy(n)) }, maxlat: function (e) { return t.maxlat(e) }, minlat: function (e) { return t.minlat(e) }, maxy: function (e) { return t.maxy(e) }, miny: function (e) { return t.miny(e) }, maxx: function (e) { return t.maxx(e) }, minx: function (e) { return t.minx(e) }, maxlon: function () { return t.maxlon(lon) }, minlon: function () { return t.minlon(lon) }, id: function () { return t.id() + " * " + e.id() } } }, interpolate: function (t, e) { var n, r, i; return n = function (t, e, n) { return isFinite(t) && (t *= 1 - n), isFinite(e) && (e *= n), e + t }, r = t.id(), i = e.id(), function (o) { return { xy2latlon: function (r) { var i; return i = t.xy2latlon(r), r = e.xy2latlon(r), { lon: n(i.lon, r.lon, o), lat: n(i.lat, r.lat, o) } }, latlon2xy: function (r) { var i; return i = t.latlon2xy(r), r = e.latlon2xy(r), { x: n(i.x, r.x, o), y: n(i.y, r.y, o) } }, id: function () { return r + i + "-" + o }, maxlat: function (r) { return n(t.maxlat(r), e.maxlat(r), o) }, minlat: function (r) { return n(t.minlat(r), e.minlat(r), o) }, maxy: function (r) { return n(t.maxy(r), e.maxy(r), o) }, miny: function (r) { return n(t.miny(r), e.miny(r), o) }, maxx: function (r) { return n(t.maxx(r), e.maxx(r), o) }, minx: function (r) { return n(t.minx(r), e.minx(r), o) }, maxlon: function (r) { return n(t.maxlon(r), e.maxlon(r), o) }, minlon: function (r) { return n(t.minlon(r), e.minlon(r), o) } } } }
                }
            }(), e.geo.segmentize = function (t, n, r) { var i, o, a, s, u; return u = a = s = null, o = !1, i = function (t, e) { var i, o, u; if (n.point(a, s), i = t - a, o = e - s, u = Math.floor(Math.sqrt(i * i + o * o) / r)) for (i /= u + 1, o /= u + 1; u-- > 0;) n.point(a += i, s += o, !0); return a = t, s = e }, e.geo.stream(t, { point: i, lineEnd: function () { return n.lineEnd(), u ? (i(u.x, u.y), o || n.point(a, s)) : this.point = i, u = a = s = null, this.point = i }, lineStart: function () { return n.lineStart(), this.point = function (t, e) { return u = { x: t, y: e }, a = t, s = e, this.point = i } }, polygonStart: function () { return n.polygonStart(), o = !0 }, polygonEnd: function () { return n.polygonEnd(), o = !1 }, sphere: function () { return n.sphere() } }) }, i.cartesianResample = function (t) { function e(e) { function r(n, r) { n = t(n, r), e.point(n[0], n[1]) } function o() { c = 0 / 0, p.point = a, e.lineStart() } function a(r, o) { var a = t(r, o); n(c, f, h, d, c = r, f = o, h = a[0], d = a[1], i, e), e.point(h, d) } function u() { p.point = r, e.lineEnd() } function l() { var t, r, s, l; o(), p.point = function (e, n) { a(t = e, r = n), s = h, l = d, p.point = a }, p.lineEnd = function () { n(c, f, h, d, t, r, s, l, i, e), p.lineEnd = u, u() } } var c, f, h, d, p = { point: r, lineStart: o, lineEnd: u, polygonStart: function () { e.polygonStart(), p.lineStart = l }, polygonEnd: function () { e.polygonEnd(), p.lineStart = o } }; return s ? { point: function (t, e) { var n = s(t, e); p.point(n[0], n[1]) }, sphere: function () { p.sphere() }, lineStart: function () { p.lineStart() }, lineEnd: function () { p.lineEnd() }, polygonStart: function () { p.polygonStart() }, polygonEnd: function () { p.polygonEnd() } } : p } function n(e, i, s, u, l, c, f, h, d, p) { var g = f - s, m = h - u, y = g * g + m * m; if (y > 4 * r && d--) { var v = (e + l) / 2, _ = (i + c) / 2, b = t(v, _), w = b[0]; b = b[1]; var x = w - s, M = b - u, T = m * x - g * M, E = l - e, L = c - i; E = E * E + L * L, g = T * T / y > r || Math.abs((g * x + m * M) / y - .5) > .3, y = y > a || E > o, (g || y) && (n(e, i, s, u, v, _, w, b, d, p), g && p.point(w, b), n(v, _, w, b, l, c, f, h, d, p)) } } var r = .5, i = 16, o = 1, a = 1, s = null; return e.precision = function (t) { return arguments.length ? (i = (r = t * t) > 0 && 16, e) : Math.sqrt(r) }, e.inThresh = function (t) { return arguments.length ? (o = t, e) : o }, e.outThresh = function (t) { return arguments.length ? (a = t, e) : a }, e.preProject = function (t) { return arguments.length ? (s = t, e) : s }, e }, i.fisheye = { scale: function (t) { return f(t(), 3, 0) }, circular: function () { function t(t, n, a) { var l = u[0], c = u[1], f = t - l, h = n - c, d = Math.sqrt(f * f + h * h); if (!d || d >= o) return { x: t, y: n, z: a }; s && (l += o * f / d, c += o * h / d, f = t - l, h = n - c, d = o - d); var p = r * (1 - Math.exp(-d * i)) / d * .75 + .25; return l = { x: l + f * p, y: c + h * p }, arguments.length > 2 && (s ? (f = u[0] - l.x, h = u[1] - l.y, a && (l.z = a + Math.log(1 / e(Math.sqrt(f * f + h * h))))) : l.z = a + Math.log(e(d))), l } function e(t) { var e = 1 + 2 * Math.abs(.5 - t / o) * (a - 1); return t > o / 2 ? 1 / e : e } function n() { return r = Math.exp(a), r = r / (r - 1) * o, i = a / o, t } var r, i, o = 200, a = 2, s = !1, u = [0, 0]; return t.radius = function (t) { return arguments.length ? (o = +t, n()) : o }, t.distortion = function (t) { return arguments.length ? (a = +t, n()) : a }, t.focus = function (e) { return arguments.length ? (u = e, t) : u }, t.invert = function (e) { return arguments.length ? (s = e, t) : s }, n() } }, "object" == typeof t && t.exports && (t.exports = r)
        }(r.polymaps)
    }).call(e, n(2), n(3))
}, , , , , , , , , , , , , , , , function (t, e, n) { (function (e) { var r, i, o, a, s, u; i = n(7), u = n(8).navigateToLoginPage, o = n(129), a = n(140), s = n(11).getParameterByName, r = function () { function t() { var t, n, r; return t = e.select("body").append("div").attr("id", "appDiv").style("height", "100%").style("width", "100%"), r = new a(t, this), n = t.append("div").attr("id", "explorerContainer").style("overflow", "hidden"), s("session") || (this.authentication = new i, this.authentication.on("deauthenticated", function () { return u() }), this.authentication.validate()), this.explorer = new o(n, this), { explorer: this.explorer } } return t }(), t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e, r, i, o) { var a, s, u, l, c, f, h, d, p = [].indexOf || function (t) { for (var e = 0, n = this.length; n > e; e++) if (e in this && this[e] === t) return e; return -1 }; a = n(6), f = n(13), u = n(139), c = n(132), s = n(130), h = n(11).getParameterByName, d = org.polymaps, l = function () { function t(n, l) { var g, m, y, v, _, b, w, x, M, T, E, L, S, k, Y, A, D, C, I; if (this.container = n, this.app = l, e.extend(this, r.Events), E = 512, T = 7, S = 3, Y = 2, k = 18, M = 8, x = 4, g = a.baseMapURL, b = g, _ = "populated5", w = "citrus", y = a.exploreURL, this.data_url = y, v = 175, g = g.replace(/\/$/, ""), b = b.replace(/\/$/, ""), y = y.replace(/\/$/, ""), i.ajaxSetup({ xhrFields: { withCredentials: !0 } }), D = h("session"), this.session = C = D.length ? "&session=" + D : "", ga("send", "explorer_load", "explorer_run"), A = location.hash.split("#")[1], !A) throw new Error("Missing universe"); this.hashData = JSON.parse(A), this.hashData.filters || (this.hashData.filters = {}), this.hashData.query || (this.hashData.query = {}), this.universe = L = this.hashData.universe, m = this.hashData.center ? this.hashData.center : { lat: 37, lon: -95 }, S = this.hashData.z ? this.hashData.z : 3, o.select("body").append("style").attr("id", "basemap_style"), I = function (n) { return function (r) { var a, l, h, m, x, S, A, D, I, N, P; return n.map = d.map().container(n.container.append("svg").classed("map", !0).style("width", "100%").style("height", "100%").append("g").node()).tileSize({ x: E, y: E }).add(d.drag()).add(d.wheel()).add(d.arrow()).zoomRange([Y, k]), r.z && r.center ? n.map.center(r.center).zoom(r.z) : r.extent && (n.map.extent([{ lat: r.extent[0][1], lon: r.extent[0][0] }, { lat: r.extent[1][1], lon: r.extent[1][0] }]), P = n.map.zoom(), n.map.zoom(P - .25)), n.satellite = d.image().url(d.url("https://api.tiles.mapbox.com/v4/mapbox.satellite/{Z}/{X}/{Y}@2x.jpg?access_token=pk.eyJ1IjoiZXJleDc4IiwiYSI6IlRJUGV6YjAifQ.633XK25ZXd0T6Pn5Cz6EjQ")), D = f.propGroupingObj2Feat(["sub_layer"]), n.basemap = d.superGeoJson(f.topoToGeo(D)).url([g, w, "{Z}/{X}/{Y}." + t.tileFormat() + "?"].join("/") + ["select=sub_layer,minz", "s=" + T, "invertTileY=true", "srid=4326", "ringSpan=" + M].join("&")).tile(!0).clip(!0).propertyClasses(["object", "sub_layer", "zoom"], S = !1).dilateClipPath(!0), n.compass = d.compass(), n.map.add(n.basemap).add(n.compass), o.select("head").append("style").attr("id", "colorBySheet"), l = null, i.ajax({ type: "GET", url: y + "/schema?universe=" + L + C, success: function (t) { var r, i; return i = {}, r = t.schema.fields, e.each(r, function (t) { return i[t.name] = t }), n.schema = r, n.schemaMap = i, l = new c(n, n.schemaMap, n.hashData), n.trigger("filterGroupLoaded", l), l.trigger("filterGroup:ready") } }), m = [b, _, "{Z}/{X}/{Y}." + t.tileFormat() + "?"].join("/") + ["select=minz,maxz,NAME", "invertTileY=true", "srid=4326"].join("&"), n.labels = d.labels().url(m).text("NAME").filter("minz", "maxz").comparator("minz", "NAME"), n.map.add(n.labels), n.cols = ["dnd_uuid"], n.wheres = [], n.dataUrl = function () { return [y + "/query/{Z}/{X}/{Y}." + t.tileFormat() + "?", "universe=" + L, "density=" + v, "select=" + this.cols.join(","), "where=" + (null != l ? l.filterUrl() : ""), "asMultiPoint=true", "srid=4326"].join("&") + C }, I = f.objectToFeatures.landing, n.j = d.superGeoJson(f.topoToGeo(I, !1, { xhrFields: { withCredentials: !0 } })).url(n.dataUrl()).tile(!0).clip(!1).rectile(!1).dilateClipPath(!1), n.on("query", function () { return this.j.url(this.dataUrl()) }), n.on("dropdown:change", function (t) { return this.cols.indexOf(t) < 0 ? (this.cols.push(t), this.j.url(this.dataUrl())) : this.trigger("redisplay") }), a = new u(n), n.sizer = function () { return 4 }, n.colorer = null, n.j.toSVG = function (t, r, i, u, c) { return e.each(t.features, function (t, e) { return t.properties._id = e.toString() }), c.crossfilter = new s(t, c, l), c.data = t, c.render = function () { var e, n; if (!(p.call(t, "geometry") >= 0) || t.geometry) return e = c.crossfilter.update(), n = c.update = o.select(r).selectAll("path").data(e.features, function (t) { return t.properties._id }), n.enter().append("path").on("mouseup", function (t) { return a.update(t) }), n.exit().remove(), c.toDraw = e }, c.render(), c.scale = function () { var t; return t = n.map.zoom(), c.update.attr("class", function (t) { return n.colorer ? n.colorer(t) : void 0 }).classed("place", !0).style("display", function (e) { var n; return n = e && e.properties && (e.properties.scalerank || 0), n <= ("function" == typeof t ? t({ "null": "none" }) : void 0) }).attr("d", function (e) { return i.pointRadius(n.sizer(e) * Math.pow(2, c.zoom - t)), i(e) }) }, c.scale() }, h = n.j, A = function () { var t, e, n, r; e = h.cache.locks(), n = []; for (t in e) r = e[t], n.push(r.scale ? r.scale() : void 0); return n }, n.map.on("zoom", A), n.map.add(n.j), n.updateUI = function (t) { var n, r, i, o, a, s; if (t.data && null != l && 0 !== l.filters.length) { n = {}, r = [], o = h.cache.locks(); for (i in o) s = o[i], r = r.concat(null != (a = s.data) ? a.features : void 0); return l.updateUI(e.pluck(e.compact(r), "properties")) } }, n.j.on("load", function (t) { return n.updateUI(t.tile) }), n.on("redisplay", function () { var t, e, n, r; e = this.j.cache.locks(), n = []; for (t in e) r = e[t], n.push(this.j.show(r)); return n }), n.j.show = function (t) { return n.updateUI(t), t.render && t.render(), t.scale && t.scale() }, x = n.map, N = x.zoom(), x.on("move", function () { return n.hashData.z = x.zoom(), n.hashData.center = x.center(), location.replace("#" + JSON.stringify(n.hashData)), N !== x.zoom() ? (N = x.zoom(), x.dispatch({ type: "zoom" })) : void 0 }) } }(this), this.hashData.z && this.hashData.center ? I(this.hashData) : i.ajax({ type: "GET", url: y + "/query/statistics/0/0/0?srid=4326&universe=" + L + C, error: function (t) { return function (t) { return console.log(t), I(t) } }(this), success: function (t) { return function (t) { return I(t) } }(this) }) } return t.tileFormat = function () { return a.useProton ? "proton" : "topojson" }, t }(), t.exports = l }).call(e, n(4), n(5), n(3), n(2)) }, function (t, e, n) { (function (e) { var r, i; i = n(145), r = function () { function t(t, e, n) { this.data = t, this.filterGroup = n, this.cf = i(this.data.features), this.cf.dims = {}, this.filter = function (t) { return function (e, n) { var r, i; return null === n ? t.cf.dims[e] ? (r = t.cf.dims[e].filterAll().top(1 / 0), t.cf.dims[e].dispose(), delete t.cf.dims[e], r) : t.data.features : (t.cf.dims[e] || (t.cf.dims[e] = t.cf.dimension(function (t) { return t.properties[e] })), i = t.filterGroup.filterType(e), "continuous" === i ? t.cf.dims[e].filter(n).top(1 / 0) : "discrete" === i ? t.cf.dims[e].filter(function (t) { var e, r, i, o, a, s; if (Array.isArray(t)) { for (i = 0, a = t.length; a > i; i++) for (r = t[i], o = 0, s = n.length; s > o; o++) if (e = n[o], e == r) return !0; return !1 } return n.indexOf(t) >= 0 }).top(1 / 0) : void 0) } }(this) } return t.prototype.update = function () { var t, n, r, i; if (this.filterGroup && 0 !== e.keys(this.filterGroup.crossFilters).length) { r = this.filterGroup.crossFilters; for (n in r) i = r[n], t = this.filter(n, i); return { type: "FeatureCollection", features: t } } return this.data }, t }(), t.exports = r }).call(e, n(4)) }, function (t, e, n) { (function (e, r) { var i, o, a, s, u; i = n(133), a = n(135), s = n(136), u = n(138), o = function () { function t(t, n, o, l) { var c, f, h, d, p, g; this.schema = n, e.extend(this, r.Events), this.locked = !1, this.active = !1, this.updateUI = function (t) { return function (n) { var r, i; return r = e.pluck(n, t.selected), null != (i = t.ui) ? i.update(r) : void 0 } }(this), this.fView = f = new a(this, t.insert("div", "#newFilterButton"), l), d = function (t) { return function () { return t.selected && (t.locked && g(), o.trigger("filter", { col: t.selected, range: null }), p && o.trigger("sizeBy:remove"), c) ? o.trigger("colorBy:remove") : void 0 } }(this), h = function (t) { return function () { var n, r, i, a; if (t.ui) { if (n = t.ui.filterParams(), o.trigger("filter:query", { col: t.selected, range: n }), "continuous" === t.filterType)["int", "long"].indexOf(o.schemaType(t.selected)) > -1 ? (r = Math.round(n[0]).toString(), i = Math.round(n[1]).toString()) : (r = n[0].toString(), i = n[1].toString()), t.filterUrl = "(" + r + "<=" + t.selected + "<=" + i + ")"; else if ("discrete" === t.filterType) { if (a = [], 0 === n.length) return void (t.filterUrl = ""); e.each(n, function (e) { return a.push(t.selected + "=='" + e.toString() + "'") }), a = a.join("||"), t.filterUrl = "(" + a + ")" } else "text" === t.filterType && (t.filterUrl = "(" + t.selected + "=='" + n + "')"); return o.trigger("query") } } }(this), g = function (t) { return function () { return delete t.filterUrl, o.trigger("filter:query", { col: t.selected, range: null }), t.locked = !1, o.trigger("query") } }(this), c = null, this.on("colorButton:click", function (t) { return this.selected !== o.colorBy ? (c = !0, f.trigger("filter:colorBy", t), this.ui.colorBy = !0, o.trigger("colorBy", { selected: this.selected, ui: this.ui })) : (c = !1, f.trigger("filter:colorBy", null), o.trigger("colorBy:remove")) }), p = null, this.on("sizeButton:click", function (t) { return this.selected !== o.sizeBy ? (p = !0, f.trigger("filter:sizeBy", t), o.trigger("sizeBy", this.selected)) : (p = !1, f.trigger("filter:sizeBy", null), o.trigger("sizeBy:remove")) }), this.on("removeButton:click", function () { return d(), o.removeFilter(this) }), this.on("lockButton:click", function () { return this.locked ? (g(), this.locked = !1, f.trigger("filter:unlock")) : (this.locked = !0, h(), f.trigger("filter:lock")) }), this.on("setValue", function (t) { return this.ui.setValue(t) }), this.on("dropdown:change", function (t) { return function (n) { return d(), t.active = !1, f.trigger("filter:unlock"), e.contains(e.pluck(o.filters, "selected"), n) ? void f.trigger("filter:duplicate") : (t.selected = n, t.filterType = o.filterType(n), t.schemaType = o.schemaType(n), "none" === t.filterType ? f.trigger("filter:notQuantifiable") : ("continuous" === t.filterType ? (t.ui = new s(t, f.uiDiv, [0, 1]), f.trigger("filter:newContinuous")) : "discrete" === t.filterType ? (t.ui = new i(t, f.uiDiv), f.trigger("filter:newDiscrete")) : "text" === t.filterType && (t.ui = new u(t, f.uiDiv)), o.trigger("filter:add", n), o.explorer.trigger("dropdown:change", n), t.ui)) } }(this)), this.on("filter", function (t) { return function (e) { var n; return "continuous" === t.filterType ? n = { col: t.selected, range: [e[0], 1.000000000000001 * e[1]] } : "discrete" === t.filterType && (n = { col: t.selected, range: e }), o.trigger("filter", n) } }(this)) } return t }(), t.exports = o }).call(e, n(4), n(5)) }, function (t, e, n) { (function (e, r, i) { var o, a, s, u; o = n(131), s = n(134), u = n(11).hopsketch_toClassName, a = function () { function t(t, n, a) { var l, c, f; e.extend(this, r.Events), this.explorer = t, l = new s(this), this.filters = [], this.colorByUI = null, this.crossFilters = {}, this.addFilter = function (e) { return function () { var n; return e.filters.push(n = new o(l.container, t.schema, e)), n } }(this), this.schemaType = function (t) { return n[t].type }, this.filterType = function (t) { var e; return e = n[t].type, "int" === e || "long" === e || "double" === e || "float" === e || "datetime" === e ? "continuous" : "string" === e || "boolean" === e || "relation" === e ? "discrete" : "text" === e ? "text" : "none" }, this.removeFilter = function (t) { return this.filters = e.filter(this.filters, function (e) { return e !== t }) }, f = function () { return location.replace("#" + JSON.stringify(t.hashData)) }, c = i.scale.linear().clamp(!0).range([3, 12]), this.sizeBy = null, this.on("sizeBy", function (e) { return "continuous" === this.filterType(e) ? (t.hashData.sizeBy = e, f(), this.sizeBy = e, t.trigger("redisplay")) : void 0 }), this.on("sizeBy:remove", function () { return delete t.hashData.sizeBy, f(), this.sizeBy = null, t.sizer = function () { return 4 }, t.trigger("redisplay") }), this.on("colorBy", function (e) { var n; return t.hashData.colorBy = e.selected, f(), this.colorBy = e.selected, null != (n = this.colorByUI) && (n.colorBy = !1), this.colorByUI = e.ui, t.colorer = function (t) { return function (e) { var n; return n = e.properties[t.colorBy], void 0 === n ? void 0 : "_colorBy_" + u(n.toString()) } }(this), t.trigger("redisplay") }), this.on("colorBy:remove", function () { var e; return delete t.hashData.colorBy, f(), t.colorer = null, null != (e = this.colorByUI) && (e.colorBy = !1), this.colorByUI = null, i.select("#colorBySheet").text(""), this.colorBy = null, t.trigger("redisplay") }), this.on("filter", function (e) { var n, r, i; null === e.range ? delete t.hashData.filters[e.col] : t.hashData.filters[e.col] = e.range, f(), this.crossFilters[e.col] = e.range, r = t.j.cache.locks(); for (n in r) { if (i = r[n], !i.crossfilter) return; i.render(), i.scale() } return null === e.range ? delete this.crossFilters[e.col] : void 0 }), this.on("filter:add", function (e) { return ga("send", "filter_add", e), t.hashData.filters[e] = null, f() }), this.filterUrl = function () { var t; return t = [], e.each(this.filters, function (e, n) { return e.locked ? t.push(e.filterUrl) : void 0 }), e.compact(t).join("AND") }, this.on("query", function (e) { return function () { var n; return n = e.filterUrl(), t.trigger("query") } }(this)), this.on("filterGroup:ready", function () { var t, n, r, i, o, s, u, l; for (o = JSON.parse(JSON.stringify(a)), l = [], l = l.concat(e.keys(a.filters)), l = l.concat(e.keys(a.query)), a.sizeBy && l.push(a.sizeBy), a.colorBy && l.push(a.colorBy), s = e.uniq(l), u = [], r = 0, i = s.length; i > r; r++) t = s[r], n = this.addFilter(), n.fView.dd.node().value = t, n.trigger("dropdown:change", t), o.sizeBy === t && n.trigger("sizeButton:click", n.fView.container.select(".sizeButton").node()), o.colorBy === t && n.trigger("colorButton:click", n.fView.container.select(".colorButton").node()), o.query[t] && (n.trigger("setValue", o.query[t]), n.trigger("lockButton:click")), u.push(o.filters[t] ? n.trigger("setValue", o.filters[t]) : void 0); return u }), this.on("filter:query", function (e) { return null === e.range ? delete t.hashData.query[e.col] : t.hashData.query[e.col] = e.range, f() }), this.updateUI = function (n) { var r, i, o; return r = null, e.each(this.filters, function (t) { return t && "datetime" === t.schemaType && (r = t), t.updateUI(n) }), r && this.trigger("filter:addDateTime", { filter: r, data: n }), (o = this.sizeBy) ? (i = e.compact(e.pluck(n, o)), c.domain([e.min(i), e.max(i)]), t.sizer = function (t) { return c(t.properties[o]) }) : void 0 } } return t }(), t.exports = a }).call(e, n(4), n(5), n(2)) }, function (t, e, n) { (function (e, r) { var i, o; o = n(11).hopsketch_toClassName, i = function () { function t(t, n, i) { var a, s, u, l, c, f, h, d, p; null == i && (i = 3), l = [], d = 320, a = 20, c = n.append("svg").attr("width", d).style("margin", "7px 0px"), p = e.scale.linear().range([0, d / i - 5]), c.attr("height", 0), f = c.append("g"), this.setValue = function (e) { return e ? (t.active || (t.active = !0), l = e, f.selectAll(".movingBar").filter(function (t) { return indexOf(e, t[0]) > 0 }).classed("histUnselected", !1), t.trigger("filter", l)) : void 0 }, u = function () { return l = [], f.selectAll(".movingBar").classed("histUnselected", !1), t.active = !1, t.trigger("filter", null) }, n.append("span", "svg").classed("histSelector", !0).text("All").on("mouseup", u), n.append("span", "svg").classed("histSelector", !0).text("None").on("mouseup", function () { return l = [], f.selectAll(".movingBar").classed("histUnselected", !0), t.trigger("filter", l) }), this.colorBy = !1, h = {}, s = ["rgba(255, 191, 255,.6)", "rgba(178, 0, 0,.6)", "rgba(255, 166, 77,.6)", "rgba(1, 160, 162,.6)", "rgba(151, 108, 26,.6)", "rgba(195, 124, 137,.6)", "rgba(255, 225, 0,.6)", "rgba(51, 160, 44,.6)", "rgba(178, 223, 138,.6)", "rgba(206, 206, 191,.6)", "rgba(127, 0, 255,.6)", "rgba(179, 153, 255,.6)", "rgba(255, 0, 255,.6)", "rgba(0, 127, 255,.6)", "rgba(166, 206, 227,.6)"], this.filterParams = function () { return l }, this.update = function (n) { var u, g, m, y, v, _, b, w, x, M; m = {}, r.each(n, function (t) { return m[t] ? m[t]++ : m[t] = 1 }), y = []; for (_ in m) M = m[_], y.push(M); p.domain([r.min([0, r.min(y)]), r.max(y)]), w = []; for (_ in m) M = m[_], "boolean" === t.schemaType && (_ = "true" === _), w.push([_, M]); return w = r.sortBy(w, function (t) { return -t[1] }), w = w.slice(0, 21), this.colorBy && (g = r.map(w, function (t) { return "_colorBy_" + o(t[0].toString()) }), x = "", r.each(g, function (t) { return function (t) { var e, n, i; if (h[t]) i = h[t]; else { for (e = Math.abs(t.hashCode()) % s.length, i = s[e], n = 0; -1 !== r.values(h).indexOf(i) && n < s.length;) e++, n++, i = s[e % s.length]; h[t] = i } return x = x + " ." + t + "{fill:" + i + "}" } }(this)), e.select("#colorBySheet").text(x)), b = Math.ceil(w.length / i), c.attr("height", (w.length / i + .7) * a), u = f.selectAll(".bar").data(w, function (t) { return t[0] }), v = u.enter().append("g").classed("bar", !0).style("cursor", "pointer"), v.append("title").text(function (t) { return t[0] }), v.on("mouseup", function (n) { var r, i, o; return t.active || (f.selectAll(".movingBar").classed("histUnselected", !0), t.active = !0), i = n[0], -1 === (r = l.indexOf(i)) ? (l.push(i), o = e.select(this), o.select(".movingBar").classed("histUnselected", !1)) : (l.splice(r, 1), o = e.select(this), o.select(".movingBar").classed("histUnselected", !0)), t.trigger("filter", l) }), v.append("rect").attr("class", "staticBar").attr("height", a - 1).attr("width", function () { return d / i - 5 }).style("fill", "#444444"), v.append("rect").attr("class", "movingBar").attr("height", a - 1), v.append("text").classed("histBarText", !0).attr("fill", "white").text(function (t) { return String(t[0]).slice(0, 13) }), u.select(".movingBar").attr("x", function (t, e) { return Math.floor(e / b) * (d / i) + 1 }).attr("y", function (t, e) { return e % b * a + 1 }).attr("class", function (t) { return function (e) { return t.colorBy ? "movingBar _colorBy_" + o(e[0].toString()) : "movingBar" } }(this)).classed("histUnselected", function (e) { return t.active ? -1 === l.indexOf(e[0]) : !1 }).transition().attr("width", function (t) { return Math.max(p(t[1]), 5) }), u.select(".staticBar").attr("x", function (t, e) { return Math.floor(e / b) * (d / i) + 1 }).attr("y", function (t, e) { return e % b * a + 1 }), u.select("text").attr("dx", function (t, e) { return Math.floor(e / b) * (d / i) + 8 }).attr("dy", function (t, e) { return e % b * a + a / 2 + 3 }), u.exit().remove() } } return t }(), t.exports = i }).call(e, n(2), n(4)) }, function (t, e, n) { (function (e, r, i) { var o, a; a = n(11).getParameterByName, o = function () { function t(t) { var n; e.extend(this, r.Events), n = a("session"), n.length ? (this.container = i.select("body").append("div").classed("filterHolder", !0).style("top", 0).style("left", 0).append("div").classed("filterCreator", !0), i.select(".dataPointView").style("top", 10)) : this.container = i.select("body").append("div").classed("filterHolder", !0).append("div").classed("filterCreator", !0), this.title = i.select("#navBar").append("span").classed("filterGroupTitle", !0).html(t.explorer.universe.toUpperCase()), this.container.append("div").classed("newFilterButton", !0).text("+").attr("id", "newFilterButton").on("mouseup", function () { return t.addFilter() }), t.trigger("fGView:ready") } return t }(), t.exports = o }).call(e, n(4), n(5), n(2)) }, function (t, e, n) { (function (e, n, r, i) { var o; o = function () { function t(t, o) { var a, s, u, l, c, f, h; e.extend(this, n.Events), this.container = o, o.classed("filterDiv", !0), h = o.append("span").classed("removeButton", !0).classed("icon-prohibited1", !0).on("mouseup", function () { return t.trigger("removeButton:click"), o.remove() }), a = this.dd = o.append("select").classed("dd", !0), a.selectAll("option").data([{ name: "" }].concat(t.schema)).enter().append("option").style("font-weight", "300").text(function (t) { return t.name }), f = function (e) { return function () { var n, i; return i = a.node().selectedIndex - 1, -1 !== i ? (o.selectAll(".filterButton").remove(), o.selectAll(".drillDown").remove(), r(e.uiDiv.node().children).remove(), n = t.schema[i].name, t.trigger("dropdown:change", n)) : void 0 } }(this), a.node().onchange = f, s = null, l = function () { return s = o.append("span").classed("drillDown", !0).text("Lock").on("mouseup", function () { return t.trigger("lockButton:click") }) }, u = function () { return o.insert("span", ".dd").classed("filterButton", !0).classed("colorButton", !0).classed("icon-paintbrush10", !0).on("mouseup", function () { return t.trigger("colorButton:click", this) }) }, c = function () { return o.insert("span", ".dd").classed("sizeButton", !0).classed("filterButton", !0).classed("icon-overlapping10", !0).on("mouseup", function () { return t.trigger("sizeButton:click", this) }) }, this.on("filter:newContinuous", function () { return l(), c() }), this.on("filter:newDiscrete", function () { return l(), u() }), this.uiDiv = o.append("div").classed("uiDiv", !0).style("margin-top", 5), this.on("filter:notQuantifiable", function (t) { return function () { return t.uiDiv.append("div").classed("filterErr", !0).text("This column isn't quantifiable.") } }(this)), this.on("filter:duplicate", function (t) { return function () { return t.uiDiv.append("div").classed("filterErr", !0).text("You already have that column.") } }(this)), this.on("filter:sizeBy", function (t) { return i.selectAll(".sizeButton").classed("buttonActive", function () { return this === t }) }), this.on("filter:colorBy", function (t) { return i.selectAll(".colorButton").classed("buttonActive", function () { return this === t }) }), this.on("filter:lock", function () { return null != s ? s.style("color", "#F35B5B") : void 0 }), this.on("filter:unlock", function () { return null != s ? s.style("color", "#CCCCCC") : void 0 }) } return t }(), t.exports = o }).call(e, n(4), n(5), n(3), n(2)) }, function (t, e, n) { (function (e) { var r, i, o = function (t, e) { return function () { return t.apply(e, arguments) } }, a = function (t, e) { function n() { this.constructor = t } for (var r in e) s.call(e, r) && (t[r] = e[r]); return n.prototype = e.prototype, t.prototype = new n, t.__super__ = e.prototype, t }, s = {}.hasOwnProperty; i = n(137), r = function (t) { function n(t, r, i) { this.update = o(this.update, this); var a, s; s = 95, r = r.append("div").style("margin-top", 10).style("height", s), n.__super__.constructor.call(this, r, i), a = function (e) { return function () { var n; return n = e.brush.extent(), e.bars.classed("selectedBars", function (t) { return t.x + t.dx >= n[0] && t.x + t.dx <= n[1] }), e.g.call(e.brush), t.trigger("filter", n) } }(this), this.brush = e.svg.brush().x(this.xScale).on("brush", a), this.svg.classed("slider", !0), this.g = this.svg.append("g").attr("class", "brush").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")").call(this.brush), this.g.selectAll("rect").attr("height", this.h), this.filterParams = function () { return this.brush.extent() }, this.setValue = function (t) { return t ? (this.brush.extent(t), a()) : void 0 }, r.selectAll(".resize").select("rect").style("visibility", "visible").attr("width", 5) } return a(n, t), n.prototype.update = function (t) { var e; return n.__super__.update.call(this, t), this.brush ? (e = this.brush.extent(), this.bars.classed("selectedBars", function (t) { return e[0] === e[1] ? !0 : t.x >= e[0] && t.x + t.dx <= e[1] }), this.brush.x(this.xScale), this.g.call(this.brush.extent(e))) : void 0 }, n }(i), t.exports = r }).call(e, n(2)) }, function (t, e, n) { (function (e) { var n, r = function (t, e) { return function () { return t.apply(e, arguments) } }; n = function () { function t(t, n) { this.update = r(this.update, this); var i; this.margin = i = { top: 0, right: 8, bottom: 17, left: 7 }, this.w = parseInt(t.style("width")) - i.left - i.right, this.h = parseInt(t.style("height")) - i.top - i.bottom, this.svg = t.style("margin-bottom", "25px").append("svg").attr("width", this.w + i.left + i.right).attr("height", this.h + i.top + i.bottom), this.hist = e.layout.histogram().bins(60), this.histg = this.svg.append("g").attr("transform", "translate(" + i.left + "," + i.top + ")"), this.axis = this.histg.append("g").classed("histAxis", !0).attr("transform", "translate(0," + this.h + ")"), this.update(n) } return t.prototype.update = function (t) { var n, r, i, o, a, s; if (t && 0 !== t.length) return i = e.max(t), o = e.min(t), this.xScale = e.scale.linear().domain([o, i]).range([0, this.w]).clamp(!0), a = e.svg.axis().scale(this.xScale).orient("bottom").ticks(3), this.axis.call(a), r = this.hist(t), s = e.scale.linear().domain([0, e.max(r, function (t) { return t.y })]).range([this.h, 0]), this.histg.selectAll(".histBar").select("rect").remove(), n = this.histg.selectAll(".histBar").data(r), n.enter().append("g").classed("histBar", !0), n.attr("transform", function (t) { return function (e) { return "translate(" + t.xScale(e.x) + "," + s(e.y) + ")" } }(this)), this.bars = n.append("rect").attr("x", 1).attr("width", this.xScale(o + r[0].dx) - 1).attr("height", function (t) { return function (e) { return t.h - s(e.y) } }(this)) }, t }(), t.exports = n }).call(e, n(2)) }, function (t, e, n) { (function (e, n) { var r; r = function () { function t(t, r) { var i; this.container = r.append("div"), i = this.container.append("input").classed("searchInput", !0), this.container.append("span").classed("glyphicon glyphicon-search", !0).classed("searchButton", !0).on("mouseup", function () { var n; return n = e.select(this), t.trigger("lockButton:click") }), this.setValue = function (t) { return n(i.node()).val(t) }, this.filterParams = function () { return n(i.node()).val() }, this.update = function () { } } return t }(), t.exports = r }).call(e, n(2), n(3)) }, function (t, e, n) { (function (e, n, r) { var i; i = function () { function t(t, e) { var n; this.explorer = t, this.container = r.select("body").append("div").classed("dataPointView", !0).style("max-height", 500), this.remove = n = this.container.append("div").classed("icon-prohibited1 dataPointRemove", !0), n.on("mouseup", function (t) { return function () { return "true" === t.container.attr("open") ? t.container.style("visibility", "hidden").attr("open", !1) : t.container.style("visibility", "visible").attr("open", !0) } }(this)), e || this.container.style("visibility", "hidden"), this.update(e) } return t.prototype.update = function (t) { var r, i; return t ? (this.container.style("visibility", "visible"), i = this.explorer.schemaMap, r = function (t, e) { var n; return n = i[e] && i[e].type || "unknow", "datetime" === n ? new Date(t).toDateString() : t }, e.ajax({ url: this.explorer.data_url + "/query/0/0/0.topojson?universe=" + this.explorer.universe + '&where=dnd_uuid=="' + t.properties.dnd_uuid + '"' + this.explorer.session, type: "GET", success: function (t) { return function (e) { var i, o, a, s, u; return a = e.objects[""].geometries[0].properties, i = n.pairs(n.mapObject(n.omit(a, "dnd_uuid"), r)), "true" !== t.container.attr("open") && t.container.style("visilibity", "visibile").attr("open", !0), t.container.select(".detailCard").remove(), o = t.container.append("div").attr("class", "detailCard").append("table").append("tbody"), u = o.selectAll("tr").data(i).enter().append("tr"), s = u.selectAll("td").data(function (t) { return t }).enter().append("td").text(function (t) { return "number" == typeof t ? Math.round(1e3 * t) / 1e3 : t }).attr("class", function (t, e) { return 0 === e ? "detailKey" : "detailVal" }) } }(this) })) : void 0 }, t }(), t.exports = i }).call(e, n(3), n(4), n(2)) }, function (t, e, n) { (function (e, r) { var i, o, a; o = n(141), a = n(11).getParameterByName, i = function () { function t(t, n) { var i; a("session") || (i = t.append("div").attr("id", "navBar").attr("class", "container-fluid navBox"), i.append("span").append("a").attr("href", "../dashboard/").append("img").attr("src", "img/logo_large_white.png").attr("height", "22px").style("margin", "7px").style("margin-left", "0"), i.append("form").attr("id", "logout-form").attr("action", "").attr("method", "POST").style("float", "right").style("margin-bottom", "7px").style("display", "inline-block").append("button").attr("class", "logoutButton").style("font-size", "13px").text("Logout").attr("type", "submit").classed("navStyle", !0), e("#logout-form").submit(function (t) { return n.authentication.logout(), t.preventDefault() }), i.append("span").classed("navStyle", !0).style("height", "19px").style("margin-top", 13).style("margin-right", -10).classed("glyphicon glyphicon-cog", !0).on("mouseup", function () { return new o(n) }), i.append("span").classed("navStyle", !0).style("height", "19px").style("margin-top", 13).style("margin-right", -10).classed("glyphicon glyphicon-download-alt", !0).attr("title", "Download up to 1000 rows that match your filters").on("mouseup", function () { var t, e; return e = n.explorer.dataUrl(), e = e.replace("{Z}/{X}/{Y}.topojson", "csv"), e += "&n=1000&select=*", t = r.select("body").append("iframe").style("display", "none").attr("src", e) })) } return t }(), t.exports = i }).call(e, n(3), n(2)) }, function (t, e, n) {
    (function (e, n) {
        var r; r = function () {
            function t(t) {
                var r, i; i = e.select("body").append("div").classed("styleContainer", !0), r = ["dark", "light", "grayscale", "blackprint", "newsprint", "parchment", "vintage", "tron", "satellite"], i.selectAll(".imageTile").data(r).enter().append("div").classed("imageTile", !0).style("float", "left").append("img").attr("src", function (t) { return "img/" + t + ".png" }).on("mousedown", function (n) { return e.text("css/map_styles/" + n + ".css", function (r) { var i; return e.select("#basemap_style").text(r), i = t.explorer, "satellite" === n ? (i.map.remove(i.basemap), i.map.add(i.satellite), e.select(i.satellite.container()).style("opacity", .6)) : (i.map.remove(i.satellite), i.map.add(i.basemap)), i.map.add(i.j), i.map.add(i.labels), i.map.add(i.compass) }) }).on("mouseover", function (t) {
                    return e.select(this.parentElement).append("div").style("position", "absolute").style("bottom", 0).style("color", "#CCCCCC").style("font-weight", 600).style("background-color", "rgba(0,0,0,.7)").text(t);

                }).on("mouseout", function (t) { return e.select(this.parentElement).select("div").remove() }), n(i.node()).mouseleave(function () { return e.select(this).remove() })
            } return t
        }(), t.exports = r
    }).call(e, n(2), n(3))
}, , , function (t, e, n) { !function (t) { function e(t) { return t } function n(t, e) { for (var n = 0, r = e.length, i = new Array(r) ; r > n; ++n) i[n] = t[e[n]]; return i } function r(t) { function e(e, n, r, i) { for (; i > r;) { var o = r + i >>> 1; t(e[o]) < n ? r = o + 1 : i = o } return r } function n(e, n, r, i) { for (; i > r;) { var o = r + i >>> 1; n < t(e[o]) ? i = o : r = o + 1 } return r } return n.right = n, n.left = e, n } function i(t) { function e(t, e, n) { for (var i = n - e, o = (i >>> 1) + 1; --o > 0;) r(t, o, i, e); return t } function n(t, e, n) { for (var i, o = n - e; --o > 0;) i = t[e], t[e] = t[e + o], t[e + o] = i, r(t, 1, o, e); return t } function r(e, n, r, i) { for (var o, a = e[--i + n], s = t(a) ; (o = n << 1) <= r && (r > o && t(e[i + o]) > t(e[i + o + 1]) && o++, !(s <= t(e[i + o]))) ;) e[i + n] = e[i + o], n = o; e[i + n] = a } return e.sort = n, e } function o(t) { function e(e, r, i, o) { var a, s, u, l, c = new Array(o = Math.min(i - r, o)); for (s = 0; o > s; ++s) c[s] = e[r++]; if (n(c, 0, o), i > r) { a = t(c[0]); do (u = t(l = e[r]) > a) && (c[0] = l, a = t(n(c, 0, o)[0])); while (++r < i) } return c } var n = i(t); return e } function a(t) { function e(e, n, r) { for (var i = n + 1; r > i; ++i) { for (var o = i, a = e[i], s = t(a) ; o > n && t(e[o - 1]) > s; --o) e[o] = e[o - 1]; e[o] = a } return e } return e } function s(t) { function e(t, e, i) { return (Y > i - e ? r : n)(t, e, i) } function n(n, r, i) { var o, a = (i - r) / 6 | 0, s = r + a, u = i - 1 - a, l = r + i - 1 >> 1, c = l - a, f = l + a, h = n[s], d = t(h), p = n[c], g = t(p), m = n[l], y = t(m), v = n[f], _ = t(v), b = n[u], w = t(b); d > g && (o = h, h = p, p = o, o = d, d = g, g = o), _ > w && (o = v, v = b, b = o, o = _, _ = w, w = o), d > y && (o = h, h = m, m = o, o = d, d = y, y = o), g > y && (o = p, p = m, m = o, o = g, g = y, y = o), d > _ && (o = h, h = v, v = o, o = d, d = _, _ = o), y > _ && (o = m, m = v, v = o, o = y, y = _, _ = o), g > w && (o = p, p = b, b = o, o = g, g = w, w = o), g > y && (o = p, p = m, m = o, o = g, g = y, y = o), _ > w && (o = v, v = b, b = o, o = _, _ = w, w = o); var x = p, M = g, T = v, E = _; n[s] = h, n[c] = n[r], n[l] = m, n[f] = n[i - 1], n[u] = b; var L = r + 1, S = i - 2, k = E >= M && M >= E; if (k) for (var Y = L; S >= Y; ++Y) { var A = n[Y], D = t(A); if (M > D) Y !== L && (n[Y] = n[L], n[L] = A), ++L; else if (D > M) for (; ;) { var C = t(n[S]); { if (!(C > M)) { if (M > C) { n[Y] = n[L], n[L++] = n[S], n[S--] = A; break } n[Y] = n[S], n[S--] = A; break } S-- } } } else for (var Y = L; S >= Y; Y++) { var A = n[Y], D = t(A); if (M > D) Y !== L && (n[Y] = n[L], n[L] = A), ++L; else if (D > E) for (; ;) { var C = t(n[S]); { if (!(C > E)) { M > C ? (n[Y] = n[L], n[L++] = n[S], n[S--] = A) : (n[Y] = n[S], n[S--] = A); break } if (S--, Y > S) break } } } if (n[r] = n[L - 1], n[L - 1] = x, n[i - 1] = n[S + 1], n[S + 1] = T, e(n, r, L - 1), e(n, S + 2, i), k) return n; if (s > L && S > u) { for (var I, C; (I = t(n[L])) <= M && I >= M;)++L; for (; (C = t(n[S])) <= E && C >= E;)--S; for (var Y = L; S >= Y; Y++) { var A = n[Y], D = t(A); if (M >= D && D >= M) Y !== L && (n[Y] = n[L], n[L] = A), L++; else if (E >= D && D >= E) for (; ;) { var C = t(n[S]); { if (!(E >= C && C >= E)) { M > C ? (n[Y] = n[L], n[L++] = n[S], n[S--] = A) : (n[Y] = n[S], n[S--] = A); break } if (S--, Y > S) break } } } } return e(n, L, S + 1) } var r = a(t); return e } function u(t) { for (var e = new Array(t), n = -1; ++n < t;) e[n] = 0; return e } function l(t, e) { for (var n = t.length; e > n;) t[n++] = 0; return t } function c(t, e) { if (e > 32) throw new Error("invalid array width!"); return t } function f(t, e) { return function (n) { var r = n.length; return [t.left(n, e, 0, r), t.right(n, e, 0, r)] } } function h(t, e) { var n = e[0], r = e[1]; return function (e) { var i = e.length; return [t.left(e, n, 0, i), t.left(e, r, 0, i)] } } function d(t) { return [0, t.length] } function p() { return null } function g() { return 0 } function m(t) { return t + 1 } function y(t) { return t - 1 } function v(t) { return function (e, n) { return e + +t(n) } } function _(t) { return function (e, n) { return e - t(n) } } function b() { function t(t) { var e = E, n = t.length; return n && (b = b.concat(t), k = I(k, E += n), D.forEach(function (r) { r(t, e, n) })), c } function r() { for (var t = w(E, E), e = [], n = 0, r = 0; E > n; ++n) k[n] ? t[n] = r++ : e.push(n); Y.forEach(function (t) { t(0, [], e) }), C.forEach(function (e) { e(t) }); for (var i, n = 0, r = 0; E > n; ++n) (i = k[n]) && (n !== r && (k[r] = i, b[r] = b[n]), ++r); for (b.length = r; E > r;) k[--E] = 0 } function a(t) { function r(e, r, i) { q = e.map(t), G = K(x(i), 0, i), q = n(q, G); var o, a = Q(q), s = a[0], u = a[1]; if ($) for (o = 0; i > o; ++o) $(q[o], o) || (k[G[o] + r] |= X); else { for (o = 0; s > o; ++o) k[G[o] + r] |= X; for (o = u; i > o; ++o) k[G[o] + r] |= X } if (!r) return W = q, V = G, nt = s, void (rt = u); var l = W, c = V, f = 0, h = 0; for (W = new Array(E), V = w(E, E), o = 0; r > f && i > h; ++o) l[f] < q[h] ? (W[o] = l[f], V[o] = c[f++]) : (W[o] = q[h], V[o] = G[h++] + r); for (; r > f; ++f, ++o) W[o] = l[f], V[o] = c[f]; for (; i > h; ++h, ++o) W[o] = q[h], V[o] = G[h] + r; a = Q(W), nt = a[0], rt = a[1] } function a(t, e, n) { tt.forEach(function (t) { t(q, G, e, n) }), q = G = null } function u(t) { for (var e, n = 0, r = 0; E > n; ++n) k[e = V[n]] && (n !== r && (W[r] = W[n]), V[r] = t[e], ++r); for (W.length = r; E > r;) V[r++] = 0; var i = Q(W); nt = i[0], rt = i[1] } function l(t) { var e = t[0], n = t[1]; if ($) return $ = null, R(function (t, r) { return r >= e && n > r }), nt = e, rt = n, Z; var r, i, o, a = [], s = []; if (nt > e) for (r = e, i = Math.min(nt, n) ; i > r; ++r) k[o = V[r]] ^= X, a.push(o); else if (e > nt) for (r = nt, i = Math.min(e, rt) ; i > r; ++r) k[o = V[r]] ^= X, s.push(o); if (n > rt) for (r = Math.max(e, rt), i = n; i > r; ++r) k[o = V[r]] ^= X, a.push(o); else if (rt > n) for (r = Math.max(nt, n), i = rt; i > r; ++r) k[o = V[r]] ^= X, s.push(o); return nt = e, rt = n, Y.forEach(function (t) { t(X, a, s) }), Z } function c(t) { return null == t ? O() : Array.isArray(t) ? P(t) : "function" == typeof t ? j(t) : A(t) } function A(t) { return l((Q = f(T, t))(W)) } function P(t) { return l((Q = h(T, t))(W)) } function O() { return l((Q = d)(W)) } function j(t) { return Q = d, R($ = t), nt = 0, rt = E, Z } function R(t) { var e, n, r, i = [], o = []; for (e = 0; E > e; ++e) !(k[n = V[e]] & X) ^ (r = t(W[e], e)) && (r ? (k[n] &= J, i.push(n)) : (k[n] |= X, o.push(n))); Y.forEach(function (t) { t(X, i, o) }) } function B(t) { for (var e, n = [], r = rt; --r >= nt && t > 0;) k[e = V[r]] || (n.push(b[e]), --t); return n } function z(t) { for (var e, n = [], r = nt; rt > r && t > 0;) k[e = V[r]] || (n.push(b[e]), --t), r++; return n } function F(t) { function n(e, n, r, i) { function o() { ++q === H && (v = N(v, U <<= 1), O = N(O, U), H = M(U)) } var c, f, h, d, g, m, y = P, v = w(q, H), _ = B, x = F, T = q, L = 0, S = 0; for (Z && (_ = x = p), P = new Array(q), q = 0, O = T > 1 ? I(O, E) : w(E, H), T && (h = (f = y[0]).key) ; i > S && !((d = t(e[S])) >= d) ;)++S; for (; i > S;) { for (f && d >= h ? (g = f, m = h, v[L] = q, (f = y[++L]) && (h = f.key)) : (g = { key: d, value: x() }, m = d), P[q] = g; !(d > m || (O[c = n[S] + r] = q, k[c] & J || (g.value = _(g.value, b[c])), ++S >= i)) ;) d = t(e[S]); o() } for (; T > L;) P[v[L] = q] = y[L++], o(); if (q > L) for (L = 0; r > L; ++L) O[L] = v[O[L]]; c = Y.indexOf(G), q > 1 ? (G = a, $ = u) : (1 === q ? (G = s, $ = l) : (G = p, $ = p), O = null), Y[c] = G } function r() { if (q > 1) { for (var t = q, e = P, n = w(t, t), r = 0, i = 0; E > r; ++r) k[r] && (n[O[i] = O[r]] = 1, ++i); for (P = [], q = 0, r = 0; t > r; ++r) n[r] && (n[r] = q++, P.push(e[r])); if (q > 1) for (var r = 0; i > r; ++r) O[r] = n[O[r]]; else O = null; Y[Y.indexOf(G)] = q > 1 ? ($ = u, G = a) : 1 === q ? ($ = l, G = s) : $ = G = p } else if (1 === q) { for (var r = 0; E > r; ++r) if (k[r]) return; P = [], q = 0, Y[Y.indexOf(G)] = G = $ = p } } function a(t, e, n) { if (t !== X && !Z) { var r, i, o, a; for (r = 0, o = e.length; o > r; ++r) k[i = e[r]] & J || (a = P[O[i]], a.value = B(a.value, b[i])); for (r = 0, o = n.length; o > r; ++r) (k[i = n[r]] & J) === t && (a = P[O[i]], a.value = z(a.value, b[i])) } } function s(t, e, n) { if (t !== X && !Z) { var r, i, o, a = P[0]; for (r = 0, o = e.length; o > r; ++r) k[i = e[r]] & J || (a.value = B(a.value, b[i])); for (r = 0, o = n.length; o > r; ++r) (k[i = n[r]] & J) === t && (a.value = z(a.value, b[i])) } } function u() { var t, e; for (t = 0; q > t; ++t) P[t].value = F(); for (t = 0; E > t; ++t) k[t] & J || (e = P[O[t]], e.value = B(e.value, b[t])) } function l() { var t, e = P[0]; for (e.value = F(), t = 0; E > t; ++t) k[t] & J || (e.value = B(e.value, b[t])) } function c() { return Z && ($(), Z = !1), P } function f(t) { var e = j(c(), 0, P.length, t); return R.sort(e, 0, e.length) } function h(t, e, n) { return B = t, z = e, F = n, Z = !0, D } function d() { return h(m, y, g) } function x(t) { return h(v(t), _(t), g) } function T(t) { function e(e) { return t(e.value) } return j = o(e), R = i(e), D } function L() { return T(e) } function S() { return q } function A() { var t = Y.indexOf(G); return t >= 0 && Y.splice(t, 1), t = tt.indexOf(n), t >= 0 && tt.splice(t, 1), t = C.indexOf(r), t >= 0 && C.splice(t, 1), D } var D = { top: f, all: c, reduce: h, reduceCount: d, reduceSum: x, order: T, orderNatural: L, size: S, dispose: A, remove: A }; et.push(D); var P, O, j, R, B, z, F, U = 8, H = M(U), q = 0, G = p, $ = p, Z = !0; return arguments.length < 1 && (t = e), Y.push(G), tt.push(n), C.push(r), n(W, V, 0, E), d().orderNatural() } function U() { var t = F(p), e = t.all; return delete t.all, delete t.top, delete t.order, delete t.orderNatural, delete t.size, t.value = function () { return e()[0].value }, t } function H() { et.forEach(function (t) { t.dispose() }); var t = D.indexOf(r); for (t >= 0 && D.splice(t, 1), t = D.indexOf(a), t >= 0 && D.splice(t, 1), t = C.indexOf(u), t >= 0 && C.splice(t, 1), t = 0; E > t; ++t) k[t] &= J; return L &= J, Z } var W, V, q, G, $, Z = { filter: c, filterExact: A, filterRange: P, filterFunction: j, filterAll: O, top: B, bottom: z, group: F, groupAll: U, dispose: H, remove: H }, X = ~L & -~L, J = ~X, K = s(function (t) { return q[t] }), Q = d, tt = [], et = [], nt = 0, rt = 0; return D.unshift(r), D.push(a), C.push(u), L |= X, (S >= 32 ? !X : L & (1 << S) - 1) && (k = N(k, S <<= 1)), r(b, 0, E), a(b, 0, E), Z } function u() { function t(t, e) { var n; if (!d) for (n = e; E > n; ++n) k[n] || (u = l(u, b[n])) } function e(t, e, n) { var r, i, o; if (!d) { for (r = 0, o = e.length; o > r; ++r) k[i = e[r]] || (u = l(u, b[i])); for (r = 0, o = n.length; o > r; ++r) k[i = n[r]] === t && (u = c(u, b[i])) } } function n() { var t; for (u = f(), t = 0; E > t; ++t) k[t] || (u = l(u, b[t])) } function r(t, e, n) { return l = t, c = e, f = n, d = !0, h } function i() { return r(m, y, g) } function o(t) { return r(v(t), _(t), g) } function a() { return d && (n(), d = !1), u } function s() { var n = Y.indexOf(e); return n >= 0 && Y.splice(n), n = D.indexOf(t), n >= 0 && D.splice(n), h } var u, l, c, f, h = { reduce: r, reduceCount: i, reduceSum: o, value: a, dispose: s, remove: s }, d = !0; return Y.push(e), D.push(t), t(b, 0, E), i() } function l() { return E } var c = { add: t, remove: r, dimension: a, groupAll: u, size: l }, b = [], E = 0, L = 0, S = 8, k = A(0), Y = [], D = [], C = []; return arguments.length ? t(arguments[0]) : c } function w(t, e) { return (257 > e ? A : 65537 > e ? D : C)(t) } function x(t) { for (var e = w(t, t), n = -1; ++n < t;) e[n] = n; return e } function M(t) { return 8 === t ? 256 : 16 === t ? 65536 : 4294967296 } b.version = "1.3.7", b.permute = n; var T = b.bisect = r(e); T.by = r; var E = b.heap = i(e); E.by = i; var L = b.heapselect = o(e); L.by = o; var S = b.insertionsort = a(e); S.by = a; var k = b.quicksort = s(e); k.by = s; var Y = 32, A = u, D = u, C = u, I = l, N = c; "undefined" != typeof Uint8Array && (A = function (t) { return new Uint8Array(t) }, D = function (t) { return new Uint16Array(t) }, C = function (t) { return new Uint32Array(t) }, I = function (t, e) { if (t.length >= e) return t; var n = new t.constructor(e); return n.set(t), n }, N = function (t, e) { var n; switch (e) { case 16: n = D(t.length); break; case 32: n = C(t.length); break; default: throw new Error("invalid array width!") } return n.set(t), n }), t.crossfilter = b }("undefined" != typeof e && e || this) }, function (t, e, n) { t.exports = n(144).crossfilter }, , , , function (t, e, n) { }, function (t, e, n) { }, function (t, e, n) { }, function (t, e, n) { }, function (t, e, n) { }, function (t, e, n) { }, , , , , , , , , , , function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/blackprint.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/dark.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/grayscale.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/light.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/newsprint.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/parchment.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/satellite.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/sketch.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/tron.css" }, function (t, e, n) { t.exports = n.p + "harrison/css/map_styles/vintage.css" }, function (t, e, n) { t.exports = n.p + "harrison/img/XoutDefault.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/blackprint.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/blueprint.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/carnival.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/close_white.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/dark.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/grayscale.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/greyscale.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/light.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/light_roads.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/logo_large.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/logo_large_white.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/mars.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/newsprint.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/parchment.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/satellite.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/sketch.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/tron.png" }, function (t, e, n) { t.exports = n.p + "harrison/img/vintage.png" }, function (t, e, n) { t.exports = n.p + "harrison/index.html" }]);